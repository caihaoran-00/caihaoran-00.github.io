<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"caihaoran-00.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="å‰è¨€å‰é¢çœ‹äº†Qwen2.5 VLçš„æŠ€æœ¯æŠ¥å‘Šï¼Œä½†æ„Ÿè§‰è¿˜æ˜¯æ²¡æœ‰ä¸ªå…·è±¡çš„è®¤è¯†ï¼Œé‚æ‰“ç®—ä»é›¶è®­ç»ƒä¸ªå¤§æ¨¡å‹ï¼Œä¸€èˆ¬è®¤ä¸º1BåŠä»¥ä¸Šå‚æ•°é‡æ‰æ˜¯å¤§æ¨¡å‹ï¼Œç”±äºæˆ‘åªæœ‰ä¸€å¼ 4090ï¼Œè€Œä¸”ä»…æ˜¯ä¸ºäº†å¯¹å…¨æµç¨‹æœ‰ä¸€ä¸ªå…·è±¡çš„è®¤è¯†ï¼Œé‚é€‰æ‹©ChatLM-mini-Chineseæ¨¡å‹ï¼Œè¯¥æ¨¡å‹ä»…æœ‰0.2 Bå‚æ•°é‡ï¼Œæœ¬æ–‡è®°å½•æˆ‘çš„å®æ“è¿‡ç¨‹ï¼Œå°½é‡è®°å½•è¯¦ç»†å¹¶ç»™å‡ºè‡ªå·±çš„æ€è€ƒã€‚ é¡¹ç›®åœ°å€ï¼šhttps:&#x2F;&#x2F;github.com&#x2F;charent&#x2F;ChatL">
<meta property="og:type" content="article">
<meta property="og:title" content="ä»é›¶è®­ç»ƒå¤§æ¨¡å‹ç³»åˆ—ä¹‹ChatLM-mini-Chinese">
<meta property="og:url" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/index.html">
<meta property="og:site_name" content="Chr&#39;s Blog">
<meta property="og:description" content="å‰è¨€å‰é¢çœ‹äº†Qwen2.5 VLçš„æŠ€æœ¯æŠ¥å‘Šï¼Œä½†æ„Ÿè§‰è¿˜æ˜¯æ²¡æœ‰ä¸ªå…·è±¡çš„è®¤è¯†ï¼Œé‚æ‰“ç®—ä»é›¶è®­ç»ƒä¸ªå¤§æ¨¡å‹ï¼Œä¸€èˆ¬è®¤ä¸º1BåŠä»¥ä¸Šå‚æ•°é‡æ‰æ˜¯å¤§æ¨¡å‹ï¼Œç”±äºæˆ‘åªæœ‰ä¸€å¼ 4090ï¼Œè€Œä¸”ä»…æ˜¯ä¸ºäº†å¯¹å…¨æµç¨‹æœ‰ä¸€ä¸ªå…·è±¡çš„è®¤è¯†ï¼Œé‚é€‰æ‹©ChatLM-mini-Chineseæ¨¡å‹ï¼Œè¯¥æ¨¡å‹ä»…æœ‰0.2 Bå‚æ•°é‡ï¼Œæœ¬æ–‡è®°å½•æˆ‘çš„å®æ“è¿‡ç¨‹ï¼Œå°½é‡è®°å½•è¯¦ç»†å¹¶ç»™å‡ºè‡ªå·±çš„æ€è€ƒã€‚ é¡¹ç›®åœ°å€ï¼šhttps:&#x2F;&#x2F;github.com&#x2F;charent&#x2F;ChatL">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/fa7def4c95ae9b52114c9913be5af16.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/33f81f22284ae303577bc3f96d8f8ce.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/9f1e7ddf11ec364329f95d8a4946541.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/02936efbc49baa2164c16c2041a6482.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/581aa414b4e49cd72090ca0f8047842.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/56990b8a32e9c9d383bd24529cbb991.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/5adfc70a140c401c06ac7fa4f7aa95f.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/79528face960a3e59d52c9934c5caf3.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/018ade7a8ad04e38063ce00ac67844a.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/96ec2e98b0f075e87284581846a2a11.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/ff07f320532d665cb0891e865eb005a.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/aa9445b8e38fdec2f0f2167921cb7f3.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/758a746fde78ede686731711c97f781.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/image-20250321202529850.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/b47fb1d38c4863fbb8fbf699b330640.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/6a6bcabed9b7bb65acae8b98a741880.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/06e8c7567031d208f2dda383b1eb9f0.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/c0fe0ead2ee03428a0c2b49943b68a4.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/2f7c0d35b027b359fecfd6f7a185996.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/4d0a28c8a61a6cf72a8bd04e7e8c45a.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/image-20250325101716479.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/2d9dd25e5279a6444be89dd6ae9db4e.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/42e7638999c83740bea73557c23c9f2.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/af3b357acf806a9fd91bf83ee450432.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/image-20250326110851718.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/c3a38a8e6ce3e077de06a9411d56881.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/image-20250325193813523.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/6323398b3316d8f21637256586767e8.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/4c827d26cc2f531350a0c46f16fe5ea.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/d42712e2f723e6b3d9fd87ede8e40ef.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/image-20250326142917174.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/276b78ff698e642d99babdbf9ad95e1.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/99b30048901aa654d190e49846588d6.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/image-20250326152851163.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/04733e147854cb62395463940ce8326.png">
<meta property="og:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/11142dca3a425570c53ff7d93c52ba2.png">
<meta property="article:published_time" content="2025-03-20T02:37:10.000Z">
<meta property="article:modified_time" content="2025-04-17T10:06:58.116Z">
<meta property="article:author" content="Chr">
<meta property="article:tag" content="SFT">
<meta property="article:tag" content="ChatLM-mini-Chinese">
<meta property="article:tag" content="Pre-train">
<meta property="article:tag" content="DPO">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/fa7def4c95ae9b52114c9913be5af16.png">


<link rel="canonical" href="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/","path":"2025/03/20/ä»é›¶è®­ç»ƒå¤§æ¨¡å‹ç³»ç»Ÿä¹‹ChatLM-mini-Chinese/","title":"ä»é›¶è®­ç»ƒå¤§æ¨¡å‹ç³»åˆ—ä¹‹ChatLM-mini-Chinese"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>ä»é›¶è®­ç»ƒå¤§æ¨¡å‹ç³»åˆ—ä¹‹ChatLM-mini-Chinese | Chr's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Chr's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Record and Share</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="æœç´¢..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="nav-number">2.</span> <span class="nav-text">ç¯å¢ƒå‡†å¤‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tokenizer%E8%AE%AD%E7%BB%83"><span class="nav-number">3.</span> <span class="nav-text">Tokenizerè®­ç»ƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87"><span class="nav-number">3.1.</span> <span class="nav-text">æ•°æ®å‡†å¤‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%AD%E7%BB%83"><span class="nav-number">3.2.</span> <span class="nav-text">è®­ç»ƒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E6%B5%8B%E8%AF%95"><span class="nav-number">3.3.</span> <span class="nav-text">ç®€å•æµ‹è¯•</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A2%84%E8%AE%AD%E7%BB%83"><span class="nav-number">4.</span> <span class="nav-text">é¢„è®­ç»ƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%84%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%8B%E8%BD%BD"><span class="nav-number">4.1.</span> <span class="nav-text">é¢„è®­ç»ƒæ•°æ®é›†ä¸‹è½½</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%85%E6%B4%97%E6%95%B0%E6%8D%AE"><span class="nav-number">4.2.</span> <span class="nav-text">æ¸…æ´—æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%84%E8%AE%AD%E7%BB%83%EF%BC%88%E5%8D%95%E6%9C%BA%E5%8D%95%E5%8D%A1%EF%BC%89"><span class="nav-number">4.3.</span> <span class="nav-text">é¢„è®­ç»ƒï¼ˆå•æœºå•å¡ï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%95%E9%AA%8C%E4%B8%80%E4%B8%8B"><span class="nav-number">4.4.</span> <span class="nav-text">è¯•éªŒä¸€ä¸‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SFT%E5%BE%AE%E8%B0%83"><span class="nav-number">5.</span> <span class="nav-text">SFTå¾®è°ƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E6%95%B0%E6%8D%AE%E9%9B%86"><span class="nav-number">5.1.</span> <span class="nav-text">ä¸‹è½½æ•°æ®é›†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%85%E6%B4%97%E6%95%B0%E6%8D%AE-1"><span class="nav-number">5.2.</span> <span class="nav-text">æ¸…æ´—æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%95%E9%AA%8C%E4%B8%80%E4%B8%8B-1"><span class="nav-number">5.3.</span> <span class="nav-text">è¯•éªŒä¸€ä¸‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RLHF-DPO"><span class="nav-number">6.</span> <span class="nav-text">RLHF -&gt; DPO</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%8B%E8%BD%BD%E5%8F%8A%E5%88%B6%E4%BD%9C"><span class="nav-number">6.1.</span> <span class="nav-text">æ•°æ®é›†ä¸‹è½½åŠåˆ¶ä½œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DPO%E8%AE%AD%E7%BB%83"><span class="nav-number">6.2.</span> <span class="nav-text">DPOè®­ç»ƒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%95%E9%AA%8C%E4%B8%80%E4%B8%8B-2"><span class="nav-number">6.3.</span> <span class="nav-text">è¯•éªŒä¸€ä¸‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E6%B8%B8%E4%BB%BB%E5%8A%A1%E5%BE%AE%E8%B0%83-%E4%B8%89%E5%85%83%E7%BB%84%E4%BF%A1%E6%81%AF%E6%8A%BD%E5%8F%96"><span class="nav-number">7.</span> <span class="nav-text">ä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒ-ä¸‰å…ƒç»„ä¿¡æ¯æŠ½å–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84%E5%BD%95"><span class="nav-number">8.</span> <span class="nav-text">é™„å½•</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#token-type"><span class="nav-number">8.1.</span> <span class="nav-text">token_type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dpo%E6%97%A5%E5%BF%97"><span class="nav-number">8.2.</span> <span class="nav-text">dpoæ—¥å¿—</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="nav-number">9.</span> <span class="nav-text">å‚è€ƒé“¾æ¥</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Chr</p>
  <div class="site-description" itemprop="description">Welcome to my little world</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">114</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">132</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:1299964565@qq.com" title="E-Mail â†’ mailto:1299964565@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://caihaoran-00.github.io/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chr">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chr's Blog">
      <meta itemprop="description" content="Welcome to my little world">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="ä»é›¶è®­ç»ƒå¤§æ¨¡å‹ç³»åˆ—ä¹‹ChatLM-mini-Chinese | Chr's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ä»é›¶è®­ç»ƒå¤§æ¨¡å‹ç³»åˆ—ä¹‹ChatLM-mini-Chinese
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-03-20 10:37:10" itemprop="dateCreated datePublished" datetime="2025-03-20T10:37:10+08:00">2025-03-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-04-17 18:06:58" itemprop="dateModified" datetime="2025-04-17T18:06:58+08:00">2025-04-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>4.9k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>18 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‰é¢çœ‹äº†Qwen2.5 VLçš„æŠ€æœ¯æŠ¥å‘Šï¼Œä½†æ„Ÿè§‰è¿˜æ˜¯æ²¡æœ‰ä¸ªå…·è±¡çš„è®¤è¯†ï¼Œé‚æ‰“ç®—ä»é›¶è®­ç»ƒä¸ªå¤§æ¨¡å‹ï¼Œä¸€èˆ¬è®¤ä¸º1BåŠä»¥ä¸Šå‚æ•°é‡æ‰æ˜¯å¤§æ¨¡å‹ï¼Œç”±äºæˆ‘åªæœ‰ä¸€å¼ 4090ï¼Œè€Œä¸”ä»…æ˜¯ä¸ºäº†å¯¹å…¨æµç¨‹æœ‰ä¸€ä¸ªå…·è±¡çš„è®¤è¯†ï¼Œé‚é€‰æ‹©ChatLM-mini-Chineseæ¨¡å‹ï¼Œè¯¥æ¨¡å‹ä»…æœ‰0.2 Bå‚æ•°é‡ï¼Œæœ¬æ–‡è®°å½•æˆ‘çš„å®æ“è¿‡ç¨‹ï¼Œå°½é‡è®°å½•è¯¦ç»†å¹¶ç»™å‡ºè‡ªå·±çš„æ€è€ƒã€‚</p>
<p><strong>é¡¹ç›®åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/charent/ChatLM-mini-Chinese">https://github.com/charent/ChatLM-mini-Chinese</a></strong></p>
<span id="more"></span>

<hr>
<h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><p>è¿è¡Œï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">git clone --depth <span class="number">1</span> https://github.com/charent/ChatLM-mini-Chinese.git</span><br><span class="line"></span><br><span class="line">cd ChatLM-mini-Chinese</span><br><span class="line"></span><br><span class="line">conda create -n chatlm_mini_chinese -y python=<span class="number">3.10</span></span><br><span class="line"></span><br><span class="line">conda activate chatlm_mini_chinese</span><br><span class="line"></span><br><span class="line">pip install -r ./requirements.txt</span><br><span class="line"></span><br><span class="line">(å¯é€‰ï¼ŒæŸ¥çœ‹torchæ˜¯å¦æ”¯æŒcuda, æˆ‘çš„è¾“å‡ºæ˜¯<span class="number">2.11</span>+cu121å°±æ˜¯æ”¯æŒcuda)ï¼š</span><br><span class="line">python -c <span class="string">&quot;import torch;print(torch.__version__)&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="Tokenizerè®­ç»ƒ"><a href="#Tokenizerè®­ç»ƒ" class="headerlink" title="Tokenizerè®­ç»ƒ"></a>Tokenizerè®­ç»ƒ</h2><h3 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h3><p><a target="_blank" rel="noopener" href="https://dumps.wikimedia.org/zhwiki/latest/zhwiki-latest-pages-articles-multistream.xml.bz2">ç‚¹å‡»è¿™é‡Œ</a>ä¸‹è½½ç»´åŸºç™¾ç§‘ä¸­æ–‡è¯­æ–™ï¼ˆ3.2Gï¼‰ï¼Œä¸‹è½½å®Œæˆåï¼Œå›åˆ°æ¡Œé¢ï¼ˆå»ä½ ç®¡ç†ç¨‹åºåº“çš„åœ°æ–¹ï¼‰æ‰“å¼€ä¸ªç»ˆç«¯ï¼Œè¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/attardi/wikiextractor</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> wikiextractor</span><br></pre></td></tr></table></figure>

<p>å°†ä¸‹è½½çš„ç»´åŸºç™¾ç§‘æ•°æ®<code>zhwiki-latest-pages-articles-multistream.xml.bz2</code>æ”¾åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ï¼Œè¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m wikiextractor.WikiExtractor -b 1000M -o zhwik zhwiki-latest-pages-articles-multistream.xml.bz2 </span><br></pre></td></tr></table></figure>

<p>è€—æ—¶ï¼š14:28~15:18</p>
<p>æˆ–è€…ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m wikiextractor.WikiExtractor -b 1000M -o zhwik1 zhwiki-latest-pages-articles-multistream.xml.bz2 --no-templates</span><br></pre></td></tr></table></figure>

<p>è€—æ—¶ï¼š15:20~15:26</p>
<p><strong>ä¸åŒç‚¹ï¼š</strong></p>
<p>ä¸åŠ <code>--no-templates</code></p>
<p>&lt;doc id&#x3D;â€13â€ url&#x3D;â€<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki?curid=13">https://zh.wikipedia.org/wiki?curid=13</a>â€œ title&#x3D;â€æ•°å­¦â€&gt;<br>æ•°å­¦</p>
<p>&amp;lt;templatestyles src&#x3D;â€Ambox&#x2F;style.cssâ€ &#x2F;&amp;gt;<br>&amp;lt;templatestyles src&#x3D;â€Ambox&#x2F;style.cssâ€ &#x2F;&amp;gt;<br>æ•°å­¦æ˜¯ç ”ç©¶æ•¸é‡ã€ç»“æ„â€¦</p>
<p>å‚è€ƒä¹¦ç›®.<br>&amp;lt;templatestyles src&#x3D;â€Template:ReflistH&#x2F;styles.cssâ€ &#x2F;&amp;gt;</p>
<p>&lt;&#x2F;doc&gt;</p>
<p>åŠ <code>--no-templates</code></p>
<p>&lt;doc id&#x3D;â€13â€ url&#x3D;â€<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki?curid=13">https://zh.wikipedia.org/wiki?curid=13</a>â€œ title&#x3D;â€æ•°å­¦â€&gt;<br>æ•°å­¦</p>
<p>æ•°å­¦æ˜¯ç ”ç©¶æ•¸é‡ã€ç»“æ„â€¦</p>
<p>&lt;&#x2F;doc&gt;</p>
<p>è¿›å…¥åˆ°ä½ çš„æå–å¥½çš„wikiæ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œè¿™äº›æ–‡ä»¶<code>wiki_00ã€wiki_01ã€wiki_02</code>å†…å®¹æ˜¯ç¹ä½“çš„ï¼Œè¦å…ˆè½¬åŒ–ä¸ºç¹ä½“ï¼Œä½¿ç”¨openccï¼Œç»ˆç«¯è¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install opencc</span><br><span class="line"></span><br><span class="line">opencc -i wiki_00 -o wiki0.txt -c t2s.json</span><br></pre></td></tr></table></figure>

<p>ç­‰å¾…ç‰‡åˆ»å®Œæˆåï¼Œå°†<code>wiki0.txt</code>å¤åˆ¶åˆ°<code>ChatLM-mini-Chinese/data</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰“å¼€<code>train_tokenizer.py</code>ï¼Œå°†151è¡Œæ”¹æˆï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cropus_file = PROJECT_ROOT + <span class="string">&#x27;/data/wiki0.txt&#x27;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯æˆ‘æœªè¿è¡Œè®­ç»ƒå‘½ä»¤æ—¶çš„å†…å­˜å ç”¨ï¼š</p>
<p>![2a06d299a89475b93bed10e77a714db](..&#x2F;..&#x2F;..&#x2F;..&#x2F;WeChat Files&#x2F;wxid_noknx8x7zbmf22&#x2F;FileStorage&#x2F;Temp&#x2F;2a06d299a89475b93bed10e77a714db.png)</p>
<h3 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h3><p>å¥½çš„ï¼Œåœ¨ä½ çš„condaç¯å¢ƒä¸‹å¼€ç‚®è¯•ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python train_tokenizer.py</span><br></pre></td></tr></table></figure>

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/fa7def4c95ae9b52114c9913be5af16.png" class="" title="fa7def4c95ae9b52114c9913be5af16">

<p>ä¸è¡Œï¼Œè¿è¡Œä¸èµ·æ¥ï¼ŒæŠŠèƒ½å…³çš„éƒ½å…³ä¸Šï¼Œåªç•™ä¸‰ä¸ªç»ˆç«¯ï¼ˆæ­¤æ—¶æ˜¾å­˜å ç”¨3.2Gå·¦å³ï¼‰ï¼š</p>
<ul>
<li>æ˜¾å­˜<code>watch -n 1 gpustat</code></li>
<li>å†…å­˜<code>htop</code></li>
<li>è¿è¡Œè®­ç»ƒä»£ç <code>python train_tokenizer.py</code></li>
</ul>
<p>å¥½çš„ï¼Œè¿è¡Œèµ·æ¥äº†ï¼Œä½†æ˜¯ä¹Ÿå¡ä½äº†ğŸ˜…ï¼Œå£å¤´æè¿°ä¸€ä¸‹å§ï¼š</p>
<ul>
<li>æ˜¾å­˜å ç”¨æœªå¢åŠ </li>
<li>å†…å­˜å ç”¨30 G</li>
<li>è¿è¡Œäº”åˆ†é’Ÿåè¿˜æ˜¯è¢«å¼ºåˆ¶åœæ­¢äº†</li>
</ul>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/33f81f22284ae303577bc3f96d8f8ce.png" class="" title="33f81f22284ae303577bc3f96d8f8ce">

<p>å†æƒ³æƒ³åŠæ³•ï¼ŒæŠŠSwpç¼“å†²åŒºé‡Šæ”¾äº†è¯•è¯•ï¼ˆä½†æ˜¯å‘ç°è™½ç„¶Swpæ¸…é›¶äº†ï¼Œä½†æ˜¯è¿™éƒ¨åˆ†è½¬ç§»åˆ°Memäº†ï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> swapoff -a</span><br><span class="line"><span class="built_in">sudo</span> swapon -a</span><br></pre></td></tr></table></figure>

<p>å¼€ç‚®ï¼å¥½çš„ï¼ŒMemä»<code>5.20G</code>ä¸€ç›´å‡é«˜ï¼Œå‡é«˜åˆ°<code>28G</code>çš„æ ·å­å‡é«˜<code>Swp</code>ï¼Œ<code>Swp</code>å‡æ»¡åï¼Œ<code>Mem</code>å‡é«˜è‡³30.4Gï¼Œå°±åˆå¡ä½äº†(16:42)ï¼Œç­‰ä¸€ä¼šå§ï¼Œ(17:07)åˆè¢«å˜äº†ï¼Œè€—æ—¶25åˆ†é’Ÿï¼Œæ²¡æ³•äº†ï¼Œå¾—æ”¹ä¸‹ä»£ç å’¯ï¼ˆä¸ï¼å°±ä¸æ”¹ï¼ï¼‰ï¼Œæˆ‘è¦æ‰©å……Swpçš„å®¹é‡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">free -m  <span class="comment"># æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„swapå¤§å°</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> swapoff -a <span class="comment"># å…³é—­swap</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/swapfile bs=1G count=32  <span class="comment"># åˆ›å»ºæ–°çš„swapæ–‡ä»¶ï¼Œbs*count=swapå¤§å°ï¼Œè¿™é‡Œç›´æ¥è®¾ç½®32G</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> 600 /swapfile <span class="comment"># è®¾ç½®æƒé™</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> mkswap /swapfile  <span class="comment"># è®¾ç½®swap</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> swapon /swapfile  <span class="comment"># å¯ç”¨swap</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;/swapfile none swap sw 0 0&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> -a /etc/fstab  <span class="comment"># ä½¿Swapæ–‡ä»¶æ°¸ä¹…ç”Ÿæ•ˆï¼ˆé‡å¯è¯•äº†ï¼Œç¡®å®æœ‰æ•ˆï¼‰</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œå†ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python train_tokenizer.py</span><br></pre></td></tr></table></figure>

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/9f1e7ddf11ec364329f95d8a4946541.png" class="" title="9f1e7ddf11ec364329f95d8a4946541">

<h3 id="ç®€å•æµ‹è¯•"><a href="#ç®€å•æµ‹è¯•" class="headerlink" title="ç®€å•æµ‹è¯•"></a>ç®€å•æµ‹è¯•</h3><p>æˆäº†ï¼å¹¶ä¸”ä¹Ÿå¾ˆå¿«ï¼Œåæ­£ä¸è¦åŠå°æ—¶ï¼Œç®€å•çš„ä½“éªŒä¸‹è¿™æ˜¯ä¸ªä»€ä¹ˆï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoTokenizer</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½ çš„ tokenizer å­˜æ”¾è·¯å¾„</span></span><br><span class="line">tokenizer_path = <span class="string">&quot;/home/chr/æ¡Œé¢/ChatLM-mini-Chinese/model_save/hf_tokenizer&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½ tokenizer</span></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(tokenizer_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.ç›´æ¥åŠ è½½æµ‹è¯•Tokenizer</span></span><br><span class="line"><span class="comment"># æµ‹è¯•åˆ†è¯æ•ˆæœ</span></span><br><span class="line">text = <span class="string">&quot;ä½ å¥½ï¼Œæ¬¢è¿ä½¿ç”¨ Tokenizerï¼&quot;</span></span><br><span class="line">tokens = tokenizer.tokenize(text)</span><br><span class="line">ids = tokenizer.convert_tokens_to_ids(tokens)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;åŸå§‹æ–‡æœ¬:&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;åˆ†è¯ç»“æœ:&quot;</span>, tokens)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Token ID:&quot;</span>, ids)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ä½¿ç”¨tokenizer.encoder()å’Œtokenizer.decoder()</span></span><br><span class="line">encoded = tokenizer.encode(text)</span><br><span class="line">decoded = tokenizer.decode(encoded)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç¼–ç ç»“æœ:&quot;</span>, encoded)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è§£ç ç»“æœ:&quot;</span>, decoded)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.æ‰¹é‡æµ‹è¯•ä¸åŒç±»å‹æ–‡æœ¬</span></span><br><span class="line">test_cases = [</span><br><span class="line">    <span class="string">&quot;ä½ å¥½ï¼Œæˆ‘å«å°æ˜ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;AI å‘å±•è¿…çŒ›ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ä»Šå¤©çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ChatGPT æ˜¯ä¸€ä¸ªå¤§å‹è¯­è¨€æ¨¡å‹ã€‚&quot;</span>,</span><br><span class="line">    <span class="string">&quot;BERT, GPT-3 å’Œ LLaMA æ˜¯ NLP é¢†åŸŸçš„é‡è¦æ¨¡å‹ã€‚&quot;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> text <span class="keyword">in</span> test_cases:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;åŸå§‹æ–‡æœ¬: <span class="subst">&#123;text&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;åˆ†è¯ç»“æœ: <span class="subst">&#123;tokenizer.tokenize(text)&#125;</span>\n&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.ç»Ÿè®¡è¯è¡¨å¤§å°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¯è¡¨å¤§å°:&quot;</span>, tokenizer.vocab_size)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.ç»Ÿè®¡ä¸åŒæ–‡æœ¬çš„å¹³å‡Tokené•¿åº¦</span></span><br><span class="line">texts = [<span class="string">&quot;ä»Šå¤©å¤©æ°”å¾ˆå¥½ï¼Œæˆ‘ä»¬å»å…¬å›­ç©å§ï¼&quot;</span>,</span><br><span class="line">         <span class="string">&quot;Transformer æ˜¯ä¸€ç§åŸºäºè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„ç¥ç»ç½‘ç»œæ¨¡å‹ã€‚&quot;</span>,</span><br><span class="line">         <span class="string">&quot;BERT å’Œ GPT æ˜¯ NLP é¢†åŸŸçš„é‡è¦çªç ´ã€‚&quot;</span>,</span><br><span class="line">         <span class="string">&quot;è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªåˆ†æ”¯ã€‚&quot;</span>,</span><br><span class="line">         <span class="string">&quot;è¿™æ˜¯ä¸€æ¡å¾ˆçŸ­çš„å¥å­ã€‚&quot;</span>]</span><br><span class="line"></span><br><span class="line">lengths = [<span class="built_in">len</span>(tokenizer.tokenize(text)) <span class="keyword">for</span> text <span class="keyword">in</span> texts]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å¹³å‡ Token é•¿åº¦:&quot;</span>, <span class="built_in">sum</span>(lengths) / <span class="built_in">len</span>(lengths))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å•ä¸ªæ–‡æœ¬ Token æ•°:&quot;</span>, lengths)</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡ºï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/home/<span class="built_in">chr</span>/anaconda3/envs/chatlm_mini_chinese/<span class="built_in">bin</span>/python /home/<span class="built_in">chr</span>/æ¡Œé¢/ChatLM-mini-Chinese/val_tokenizer.py </span><br><span class="line">åŸå§‹æ–‡æœ¬: ä½ å¥½ï¼Œæ¬¢è¿ä½¿ç”¨ Tokenizerï¼</span><br><span class="line">åˆ†è¯ç»“æœ: [<span class="string">&#x27;â–ä½ &#x27;</span>, <span class="string">&#x27;å¥½&#x27;</span>, <span class="string">&#x27;â–,&#x27;</span>, <span class="string">&#x27;â–&#x27;</span>, <span class="string">&#x27;æ¬¢è¿&#x27;</span>, <span class="string">&#x27;ä½¿ç”¨&#x27;</span>, <span class="string">&#x27;â–T&#x27;</span>, <span class="string">&#x27;ok&#x27;</span>, <span class="string">&#x27;en&#x27;</span>, <span class="string">&#x27;iz&#x27;</span>, <span class="string">&#x27;er&#x27;</span>, <span class="string">&#x27;â–!&#x27;</span>]</span><br><span class="line">Token ID: [<span class="number">21418</span>, <span class="number">6386</span>, <span class="number">19161</span>, <span class="number">2986</span>, <span class="number">20848</span>, <span class="number">19253</span>, <span class="number">19318</span>, <span class="number">21700</span>, <span class="number">19311</span>, <span class="number">24092</span>, <span class="number">19248</span>, <span class="number">19703</span>]</span><br><span class="line">ç¼–ç ç»“æœ: [<span class="number">21418</span>, <span class="number">6386</span>, <span class="number">19161</span>, <span class="number">2986</span>, <span class="number">20848</span>, <span class="number">19253</span>, <span class="number">19318</span>, <span class="number">21700</span>, <span class="number">19311</span>, <span class="number">24092</span>, <span class="number">19248</span>, <span class="number">19703</span>]</span><br><span class="line">è§£ç ç»“æœ: ä½ å¥½, æ¬¢è¿ä½¿ç”¨ Tokenizer!</span><br><span class="line">åŸå§‹æ–‡æœ¬: ä½ å¥½ï¼Œæˆ‘å«å°æ˜ã€‚</span><br><span class="line">åˆ†è¯ç»“æœ: [<span class="string">&#x27;â–ä½ &#x27;</span>, <span class="string">&#x27;å¥½&#x27;</span>, <span class="string">&#x27;â–,&#x27;</span>, <span class="string">&#x27;â–æˆ‘&#x27;</span>, <span class="string">&#x27;å«&#x27;</span>, <span class="string">&#x27;å°&#x27;</span>, <span class="string">&#x27;æ˜&#x27;</span>, <span class="string">&#x27;â–ã€‚&#x27;</span>]</span><br><span class="line"></span><br><span class="line">åŸå§‹æ–‡æœ¬: AI å‘å±•è¿…çŒ›ã€‚</span><br><span class="line">åˆ†è¯ç»“æœ: [<span class="string">&#x27;â–A&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;â–å‘å±•&#x27;</span>, <span class="string">&#x27;è¿…&#x27;</span>, <span class="string">&#x27;çŒ›&#x27;</span>, <span class="string">&#x27;â–ã€‚&#x27;</span>]</span><br><span class="line"></span><br><span class="line">åŸå§‹æ–‡æœ¬: ä»Šå¤©çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ</span><br><span class="line">åˆ†è¯ç»“æœ: [<span class="string">&#x27;â–ä»Šå¤©&#x27;</span>, <span class="string">&#x27;çš„å¤©&#x27;</span>, <span class="string">&#x27;æ°”&#x27;</span>, <span class="string">&#x27;æ€ä¹ˆ&#x27;</span>, <span class="string">&#x27;æ ·&#x27;</span>, <span class="string">&#x27;â–?&#x27;</span>]</span><br><span class="line"></span><br><span class="line">åŸå§‹æ–‡æœ¬: ChatGPT æ˜¯ä¸€ä¸ªå¤§å‹è¯­è¨€æ¨¡å‹ã€‚</span><br><span class="line">åˆ†è¯ç»“æœ: [<span class="string">&#x27;â–Ch&#x27;</span>, <span class="string">&#x27;at&#x27;</span>, <span class="string">&#x27;GP&#x27;</span>, <span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27;â–æ˜¯ä¸€ä¸ª&#x27;</span>, <span class="string">&#x27;å¤§å‹&#x27;</span>, <span class="string">&#x27;è¯­è¨€&#x27;</span>, <span class="string">&#x27;æ¨¡å‹&#x27;</span>, <span class="string">&#x27;â–ã€‚&#x27;</span>]</span><br><span class="line"></span><br><span class="line">åŸå§‹æ–‡æœ¬: BERT, GPT-<span class="number">3</span> å’Œ LLaMA æ˜¯ NLP é¢†åŸŸçš„é‡è¦æ¨¡å‹ã€‚</span><br><span class="line">åˆ†è¯ç»“æœ: [<span class="string">&#x27;â–B&#x27;</span>, <span class="string">&#x27;ER&#x27;</span>, <span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27;â–,&#x27;</span>, <span class="string">&#x27;â–G&#x27;</span>, <span class="string">&#x27;P&#x27;</span>, <span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27;â–-&#x27;</span>, <span class="string">&#x27;â–3&#x27;</span>, <span class="string">&#x27;â–å’Œ&#x27;</span>, <span class="string">&#x27;â–L&#x27;</span>, <span class="string">&#x27;L&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;MA&#x27;</span>, <span class="string">&#x27;â–æ˜¯&#x27;</span>, <span class="string">&#x27;â–N&#x27;</span>, <span class="string">&#x27;L&#x27;</span>, <span class="string">&#x27;P&#x27;</span>, <span class="string">&#x27;â–&#x27;</span>, <span class="string">&#x27;é¢†åŸŸ&#x27;</span>, <span class="string">&#x27;çš„é‡è¦&#x27;</span>, <span class="string">&#x27;æ¨¡å‹&#x27;</span>, <span class="string">&#x27;â–ã€‚&#x27;</span>]</span><br><span class="line"></span><br><span class="line">è¯è¡¨å¤§å°: <span class="number">40960</span></span><br><span class="line">å¹³å‡ Token é•¿åº¦: <span class="number">11.8</span></span><br><span class="line">å•ä¸ªæ–‡æœ¬ Token æ•°: [<span class="number">10</span>, <span class="number">13</span>, <span class="number">16</span>, <span class="number">14</span>, <span class="number">6</span>]</span><br><span class="line"></span><br><span class="line">Process finished <span class="keyword">with</span> exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>

<h2 id="é¢„è®­ç»ƒ"><a href="#é¢„è®­ç»ƒ" class="headerlink" title="é¢„è®­ç»ƒ"></a>é¢„è®­ç»ƒ</h2><h3 id="é¢„è®­ç»ƒæ•°æ®é›†ä¸‹è½½"><a href="#é¢„è®­ç»ƒæ•°æ®é›†ä¸‹è½½" class="headerlink" title="é¢„è®­ç»ƒæ•°æ®é›†ä¸‹è½½"></a>é¢„è®­ç»ƒæ•°æ®é›†ä¸‹è½½</h3><ol>
<li><p><a target="_blank" rel="noopener" href="https://drive.google.com/open?id=1u2yW_XohbYL2YAK6Bzc5XrngHstQTf0v">ç¤¾åŒºé—®ç­”jsonç‰ˆ(webtext2019zh) å¤§è§„æ¨¡é«˜è´¨é‡æ•°æ®é›†</a></p>
<p>å°†ä¸‹è½½å®Œæˆçš„<code>webtext2019zh.zip</code>æ”¾åˆ°<code>data/raw_data</code>ä¸‹ï¼ˆæ²¡æœ‰å°±åˆ›å»ºï¼‰ï¼Œå¹¶è¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip webtext2019zh.zip</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼Œè§£å‹å¾—åˆ°ä¸‰ä¸ªæ–‡ä»¶<code>web_text_zh_testa.json</code>ï¼ˆæˆ‘æ²¡å†™é”™ï¼‰ã€<code>web_text_zh_train.json</code>å’Œ<code>web_text_zh_valid.json</code>ï¼Œéœ€è¦æŠŠ<code>web_text_zh_testa.json</code>æ”¹ä¸º<code>web_text_zh_test.json</code>ã€‚</p>
</blockquote>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.kaggle.com/datasets/terrychanorg/baike-qa2019?resource=download&amp;select=baike_qa_train.json">baike_qa2019ç™¾ç§‘é—®ç­”ç±»</a></p>
<p>æ“ä½œä¸1ç±»ä¼¼ï¼Œä¸å†èµ˜è¿°</p>
</li>
<li><p>ä¸­å›½åŒ»è¯é¢†åŸŸé—®ç­”æ•°æ®é›†</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥data/raw_dataç›®å½•</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/Toyhom/Chinese-medical-dialogue-data.git</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å…‹éš†å®Œæˆåï¼Œå°†æ–‡ä»¶å¤¹åç§°æ”¹ä¸ºchinese_medical_dialogue_datasets</p>
</blockquote>
</li>
<li><p>çŸ¥ä¹é—®ç­”æ•°æ®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¹Ÿæ˜¯åœ¨data/raw_dataç›®å½•</span></span><br><span class="line">git <span class="built_in">clone</span> https://huggingface.co/datasets/wangrui6/Zhihu-KOL</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å…‹éš†å®Œæˆåï¼Œå°†æ–‡ä»¶å¤¹åç§°æ”¹ä¸ºzhihu-kolã€‚</p>
</blockquote>
</li>
</ol>
<h3 id="æ¸…æ´—æ•°æ®"><a href="#æ¸…æ´—æ•°æ®" class="headerlink" title="æ¸…æ´—æ•°æ®"></a>æ¸…æ´—æ•°æ®</h3><p>æ¸…æ´—æ•°æ®çš„è„šæœ¬ä½äº<code>utils/raw_data_process.py</code>ï¼Œåœ¨è¿è¡Œä¹‹å‰å…ˆç•¥å¾®é…ç½®ä¸‹ä»£ç ï¼Œå°†<code>process_web_text</code>ä¸‹é¢çš„ä»£ç å…¨æ³¨é‡Šæ‰ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/02936efbc49baa2164c16c2041a6482.png" class="" title="02936efbc49baa2164c16c2041a6482">

<p>condaç¯å¢ƒä¸‹è¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python raw_data_process.py</span><br></pre></td></tr></table></figure>

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/581aa414b4e49cd72090ca0f8047842.png" class="" title="581aa414b4e49cd72090ca0f8047842">

<p>è€Œä¸”<code>logs/raw_data_process.log</code>ä¸­ä¹Ÿä¼šæœ‰è°ƒè¯•ä¿¡æ¯ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/56990b8a32e9c9d383bd24529cbb991.png" class="" title="56990b8a32e9c9d383bd24529cbb991">

<p>å¥½çš„ï¼Œç»§ç»­ï¼Œæ³¨é‡Šæ‰<code>process_web_text</code>ï¼Œæ‰“å¼€<code>process_bake_qa</code>ï¼Œ<code>process_chinese_medical_datasets</code>ï¼Œ<code>process_zhihu_kol_dataset</code>ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/5adfc70a140c401c06ac7fa4f7aa95f.png" class="" title="5adfc70a140c401c06ac7fa4f7aa95f">

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/79528face960a3e59d52c9934c5caf3.png" class="" title="79528face960a3e59d52c9934c5caf3">

<p>è¿˜å·®ä¸€äº›æ­¥éª¤ï¼ˆå…ˆæŠŠåŸæ¥æ­¥éª¤æ³¨é‡Šæ‰ï¼‰ï¼Œå¦‚å›¾ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/018ade7a8ad04e38063ce00ac67844a.png" class="" title="018ade7a8ad04e38063ce00ac67844a">

<p>ç„¶åç»§ç»­ï¼š<code>python raw_data_process.py</code>ï¼Œç»è¿‡æ¼«é•¿çš„ç­‰å¾…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(chatlm_mini_chinese) chr@chr:~/æ¡Œé¢/ChatLM-mini-Chinese/utils$ python raw_data_process.py </span><br><span class="line">process file: /home/chr/æ¡Œé¢/ChatLM-mini-Chinese/data/my_data/my_web_text_zh.parquet</span><br><span class="line">Working... â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% 0:00:58</span><br><span class="line">process file: /home/chr/æ¡Œé¢/ChatLM-mini-Chinese/data/my_data/my_baike_qa.parquet</span><br><span class="line">Working... â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% 0:00:32</span><br><span class="line">process file: /home/chr/æ¡Œé¢/ChatLM-mini-Chinese/data/my_data/zhihu_kol.parquet</span><br><span class="line">Working... â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% 0:00:34</span><br><span class="line">process file: /home/chr/æ¡Œé¢/ChatLM-mini-Chinese/data/my_data/my_chinese_medical_dialogue.parquet</span><br><span class="line">Working... â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% 0:00:15</span><br><span class="line">[2025-03-21 16:08:24.638] [INFO]: merge into file: /home/chr/æ¡Œé¢/ChatLM-mini-Chinese/data/my_dataset.parquet, å…¨éƒ¨æ•°æ®å…±5718789è¡Œï¼Œæ¸…æ´—åå‰©ä½™5718644è¡Œ</span><br><span class="line">Working... â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% 2:34:53</span><br><span class="line">Working... â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% 0:02:30</span><br><span class="line">[2025-03-21 18:45:51.019] [INFO]: merge into file: /home/chr/æ¡Œé¢/ChatLM-mini-Chinese/data/my_dataset_no_dulpticates.parquet, å…¨éƒ¨æ•°æ®å…±5718644è¡Œï¼Œæ–‡æ¡£å»é‡åå‰©ä½™5519322è¡Œ</span><br><span class="line">start shuffle...</span><br><span class="line">Working... â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% 0:02:34</span><br><span class="line">[2025-03-21 18:50:53.355] [INFO]: [[<span class="string">&#x27;file_name&#x27;</span>, <span class="string">&#x27;count&#x27;</span>], [<span class="string">&#x27;my_dataset.parquet&#x27;</span>, 5718644], [<span class="string">&#x27;æ±‡æ€»&#x27;</span>, 5718644]]</span><br><span class="line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”“</span><br><span class="line">â”ƒ file_name          â”ƒ countâ”ƒ</span><br><span class="line">â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”©</span><br><span class="line">â”‚ my_dataset.parquet â”‚ 5718644 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ æ±‡æ€»               â”‚ 5718644 â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">Working... â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% 0:00:08</span><br></pre></td></tr></table></figure>

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/96ec2e98b0f075e87284581846a2a11.png" class="" title="96ec2e98b0f075e87284581846a2a11">

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/ff07f320532d665cb0891e865eb005a.png" class="" title="ff07f320532d665cb0891e865eb005a">

<p>ä½†æ˜¯å‘¢ï¼Œè¿›åº¦åœ¨è¿™é‡Œä¸åŠ¨äº†ï¼Œè€Œä¸”å›¾å·²ç»ç”»å‡ºæ¥äº†ï¼ˆç”»å›¾æ˜¯æœ€åä¸€æ­¥ï¼‰ï¼Œ</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/aa9445b8e38fdec2f0f2167921cb7f3.png" class="" title="aa9445b8e38fdec2f0f2167921cb7f3">

<p>è€Œä¸”å†…å­˜å ç”¨ä¹Ÿæ²¡é‡Šæ”¾ï¼Œç‚¹å›è½¦ä¹Ÿæ²¡ç”¨ğŸ˜…ï¼Œæ€ä¹ˆåŠæ€ä¹ˆåŠï¼Œä¸ç®¡äº†ï¼Œåº”è¯¥æ˜¯è¿è¡Œå®Œäº†ï¼Œç›´æ¥ctrl+cç»™å…³æ‰ã€‚</p>
<h3 id="é¢„è®­ç»ƒï¼ˆå•æœºå•å¡ï¼‰"><a href="#é¢„è®­ç»ƒï¼ˆå•æœºå•å¡ï¼‰" class="headerlink" title="é¢„è®­ç»ƒï¼ˆå•æœºå•å¡ï¼‰"></a>é¢„è®­ç»ƒï¼ˆå•æœºå•å¡ï¼‰</h3><p>å¥½çš„ï¼Œå¼€ç‚®ï¼</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/758a746fde78ede686731711c97f781.png" class="" title="758a746fde78ede686731711c97f781">

<p>å“¦ï¼Œè¯´åœ¨<code>model_save</code>æ–‡ä»¶å¤¹ä¸‹æ‰¾ä¸åˆ°è®­ç»ƒå¥½çš„<code>Tokenizer</code>ï¼Œå‰é¢æ˜æ˜æ˜¯ä¿å­˜åˆ°<code>model_save/hf_tokenizer</code>ä¸‹äº†ï¼Œåœ¨<code>model_save</code>ä¸‹å“ªèƒ½æ‰¾åˆ°ï¼Œæ‰“å¼€<code>config.py</code>ï¼Œç®­å¤´ä½ç½®æ”¹ä¸€ä¸‹ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/image-20250321202529850.png" class="" title="image-20250321202529850">

<p>å¼€ç‚®ï¼</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/b47fb1d38c4863fbb8fbf699b330640.png" class="" title="b47fb1d38c4863fbb8fbf699b330640">

<p>æ˜¾å­˜ã€å†…å­˜å ç”¨ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/6a6bcabed9b7bb65acae8b98a741880.png" class="" title="6a6bcabed9b7bb65acae8b98a741880">

<p>å¥½çš„ï¼Œç­‰å¾…ç€å§ï¼Œç°åœ¨æ˜¯25-3-21ï¼ˆ20:28ï¼‰ï¼Œå¥½çš„ï¼Œè¿è¡Œå®Œäº†ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/06e8c7567031d208f2dda383b1eb9f0.png" class="" title="06e8c7567031d208f2dda383b1eb9f0">

<p>çœ‹æ ·å­ç”¨äº†2 days + 10hï¼Œçœ‹lossä¹Ÿç¡®å®æ˜¯é™ä½çš„ï¼Œå»é™¤è­¦å‘Šåçš„å®Œæ•´ä¿¡æ¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">(chatlm_mini_chinese) chr@chr:~/æ¡Œé¢/ChatLM-mini-Chinese$ accelerate launch ./train.py train</span><br><span class="line">The following values were not passed to `accelerate launch` and had defaults used instead:</span><br><span class="line">	`--num_processes` was <span class="built_in">set</span> to a value of `1`</span><br><span class="line">	`--num_machines` was <span class="built_in">set</span> to a value of `1`</span><br><span class="line">	`--mixed_precision` was <span class="built_in">set</span> to a value of `<span class="string">&#x27;no&#x27;</span>`</span><br><span class="line">	`--dynamo_backend` was <span class="built_in">set</span> to a value of `<span class="string">&#x27;no&#x27;</span>`</span><br><span class="line">To avoid this warning pass <span class="keyword">in</span> values <span class="keyword">for</span> each of the problematic parameters or run `accelerate config`.</span><br><span class="line">[2025-03-21 20:19:54.158] [INFO]: cpu memory available: 24.39 GB, disk space available: 668.51 GB, keep dataset <span class="keyword">in</span> memory: False.</span><br><span class="line">[2025-03-21 20:19:54.158] [INFO]: operation: train, keep training: False, loading datasets ...</span><br><span class="line">[2025-03-21 20:20:04.510] [INFO]: using device: cuda </span><br><span class="line">[2025-03-21 20:20:05.680] [INFO]: train dataset size: 5203576, steps per epoch:325223; validation dataset size: 13994, steps per validation: 874; datalodater num_workers: 0.</span><br><span class="line"></span><br><span class="line">epoch <span class="built_in">log</span>: epoch:0, avg_loss:4.247095609019069, cur_bleu4:0.0486591236416422, best_bleu4:0.0486591236416422, best_epoch:0</span><br><span class="line"></span><br><span class="line">epoch <span class="built_in">log</span>: epoch:1, avg_loss:3.805832653275791, cur_bleu4:0.06714899049061171, best_bleu4:0.06714899049061171, best_epoch:1</span><br><span class="line"></span><br><span class="line">epoch <span class="built_in">log</span>: epoch:2, avg_loss:3.713093634462342, cur_bleu4:0.03836117001107061, best_bleu4:0.06714899049061171, best_epoch:1</span><br><span class="line"></span><br><span class="line">epoch <span class="built_in">log</span>: epoch:3, avg_loss:3.658557256075041, cur_bleu4:0.024710511352158505, best_bleu4:0.06714899049061171, best_epoch:1</span><br><span class="line"></span><br><span class="line">epoch <span class="built_in">log</span>: epoch:4, avg_loss:3.6181896459202454, cur_bleu4:0.08591752119996698, best_bleu4:0.08591752119996698, best_epoch:4</span><br><span class="line"></span><br><span class="line">epoch <span class="built_in">log</span>: epoch:5, avg_loss:3.5855124745777927, cur_bleu4:0.04782050916056753, best_bleu4:0.08591752119996698, best_epoch:4</span><br><span class="line"></span><br><span class="line">epoch <span class="built_in">log</span>: epoch:6, avg_loss:3.5662105754453, cur_bleu4:0.09046048314026331, best_bleu4:0.09046048314026331, best_epoch:6</span><br><span class="line"></span><br><span class="line">epoch <span class="built_in">log</span>: epoch:7, avg_loss:3.5456458627353107, cur_bleu4:0.040374996576144455, best_bleu4:0.09046048314026331, best_epoch:6</span><br><span class="line">epoch:     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•ºâ”â”â”â”  88% -:--:-- 2 days, 10:03:54 epoch: 7/8, avg_loss: 3.566211, best_epoch: 6, best_bleu: 0.09046048314026331</span><br><span class="line">steps:     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% 0:00:00 6:24:13          step: 325223/325223, loss: 3.221098   </span><br></pre></td></tr></table></figure>

<p>å¥½çš„ï¼Œæ•™ç¨‹çš„ä¸‹ä¸€æ­¥æ˜¯SFTå¾®è°ƒï¼Œä½†æ˜¯æˆ‘æƒ³è¿™ä¸€æ­¥å…ˆè¯•è¯•æ•ˆæœã€‚</p>
<hr>
<h3 id="è¯•éªŒä¸€ä¸‹"><a href="#è¯•éªŒä¸€ä¸‹" class="headerlink" title="è¯•éªŒä¸€ä¸‹"></a>è¯•éªŒä¸€ä¸‹</h3><p>æ‰“å¼€model_saveæ–‡ä»¶å¤¹ï¼Œä½ ä¼šçœ‹åˆ°ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/c0fe0ead2ee03428a0c2b49943b68a4.png" class="" title="c0fe0ead2ee03428a0c2b49943b68a4">

<ul>
<li><p>å°†<code>hf_tokenizer</code>æ–‡ä»¶å¤¹ä¸‹çš„<code>special_tokens_map.json</code>ã€<code>tokenizer.json</code>å’Œ<code>tokenizer_config.json</code>å¤åˆ¶åˆ°<code>model_saveç›®å½•ä¸‹</code></p>
</li>
<li><p>å°†<code>train_latest_state</code>æ–‡ä»¶å¤¹ä¸‹çš„<code>model.safetensors</code>å¤åˆ¶åˆ°<code>model_save</code>ç›®å½•ä¸‹</p>
</li>
<li><p>è¿è¡Œä¸‹é¢å‘½ä»¤ä¸‹è½½ä¸€äº›é…ç½®æ–‡ä»¶å’Œæ¨¡å‹æ–‡ä»¶ï¼ˆç”¨å‰è¾ˆçš„é…ç½®æ–‡ä»¶ï¼‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone --depth <span class="number">1</span> https://www.modelscope.cn/charent/ChatLM-mini-Chinese.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>å°†ä¸Šé¢å…‹éš†å¾—åˆ°çš„æ–‡ä»¶å¤¹ä¸­çš„<code>config.json</code>å¤åˆ¶åˆ°<code>model_save</code>ç›®å½•ä¸‹ï¼Œå¹¶å°†è¯¥æ–‡ä»¶çš„æœ€åä¸€è¡Œçš„<code>vocab_size</code>æ”¹40961</p>
</li>
</ul>
<p>è¿™æ—¶å€™æ–‡ä»¶å¤¹ä¸‹æ˜¯è¿™æ ·çš„ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/2f7c0d35b027b359fecfd6f7a185996.png" class="" title="2f7c0d35b027b359fecfd6f7a185996">

<p>è¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python cli_demo.py</span><br></pre></td></tr></table></figure>

<p>æˆ‘çš„ç®€å•æµ‹è¯•ç»“æœï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/4d0a28c8a61a6cf72a8bd04e7e8c45a.png" class="" title="4d0a28c8a61a6cf72a8bd04e7e8c45a">

<p>å¥½çš„ï¼Œè¿™æ—¶å€™æ˜¯èƒ¡è¨€ä¹±è¯­çš„ï¼ˆæˆ‘ä¹Ÿä¸ç¡®è®¤<code>config.json</code>èƒ½ä¸èƒ½é‚£æ ·æ”¹ï¼Œä½†ä¸æ”¹è¿è¡Œä¸èµ·æ¥ï¼Œå…ˆè¿™æ ·å§ï¼Œç»§ç»­å¾€ä¸‹èµ°ï¼‰ã€‚</p>
<hr>
<h2 id="SFTå¾®è°ƒ"><a href="#SFTå¾®è°ƒ" class="headerlink" title="SFTå¾®è°ƒ"></a>SFTå¾®è°ƒ</h2><h3 id="ä¸‹è½½æ•°æ®é›†"><a href="#ä¸‹è½½æ•°æ®é›†" class="headerlink" title="ä¸‹è½½æ•°æ®é›†"></a>ä¸‹è½½æ•°æ®é›†</h3><p>å»<code>data/raw_data</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»º<code>bell_open_source</code>æ–‡ä»¶å¤¹ï¼Œç„¶åè¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://huggingface.co/datasets/BelleGroup/generated_chat_0.4M</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://huggingface.co/datasets/BelleGroup/train_0.5M_CN</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://huggingface.co/datasets/BelleGroup/train_2M_CN</span><br></pre></td></tr></table></figure>

<p>å…‹éš†å®Œæˆåï¼Œå°†å„æ–‡ä»¶å¤¹ä¸‹çš„<code>json</code>æ–‡ä»¶å¤åˆ¶åˆ°<code>bell_open_source</code>æ–‡ä»¶å¤¹ä¸‹</p>
<h3 id="æ¸…æ´—æ•°æ®-1"><a href="#æ¸…æ´—æ•°æ®-1" class="headerlink" title="æ¸…æ´—æ•°æ®"></a>æ¸…æ´—æ•°æ®</h3><p>å›åˆ°æ¸…æ´—æ•°æ®çš„è„šæœ¬ï¼š<code>utils/raw_data_process.py</code>ï¼Œ&#96;if _<em>name</em>_ &#x3D;&#x3D; â€˜_<em>main</em>_â€™ä¸‹é¢çš„éƒ¨åˆ†é™¤äº†å¼€å¤´éƒ¨åˆ†å’Œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">process_belle_knowledge_enhanced_dataset_for_finetune(max_len=<span class="number">320</span>, group_cnt=<span class="number">50000</span>)</span><br></pre></td></tr></table></figure>

<p>å¤–ï¼Œå‡æ³¨é‡Šæ‰ï¼Œå†æŒ‰ä¸‹å›¾æ‰€ç¤ºä½ç½®æ”¹ä¸€ä¸‹ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/image-20250325101716479.png" class="" title="image-20250325101716479">

<p>è¿è¡Œï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python raw_data_process.py</span><br></pre></td></tr></table></figure>

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/2d9dd25e5279a6444be89dd6ae9db4e.png" class="" title="2d9dd25e5279a6444be89dd6ae9db4e">

<p>å†å°†&#96;if _<em>name</em>_ &#x3D;&#x3D; â€˜_<em>main</em>_â€™ä¸‹é¢çš„éƒ¨åˆ†é™¤äº†å¼€å¤´éƒ¨åˆ†å’Œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parquet_to_json()</span><br></pre></td></tr></table></figure>

<p>å¤–å‡æ³¨é‡Šæ‰ï¼ˆç”Ÿæˆsft.jsonæ•°æ®ä¾›sftå¾®è°ƒï¼‰ï¼Œè¿è¡Œï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python raw_data_process.py</span><br></pre></td></tr></table></figure>

<p>å¥½çš„ï¼Œç°åœ¨sftæ•°æ®æœ‰äº†ï¼Œè¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"></span><br><span class="line">pip install tensorboard</span><br><span class="line"></span><br><span class="line">python sft_train.py</span><br></pre></td></tr></table></figure>

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/42e7638999c83740bea73557c23c9f2.png" class="" title="42e7638999c83740bea73557c23c9f2">

<p>å¥½çš„ï¼Œå¼€å§‹SFTäº†ï¼ˆ11:00ï¼‰ï¼Œå®Œäº‹äº†ï¼Œç”¨æ—¶7h+44 minï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/af3b357acf806a9fd91bf83ee450432.png" class="" title="af3b357acf806a9fd91bf83ee450432">

<h3 id="è¯•éªŒä¸€ä¸‹-1"><a href="#è¯•éªŒä¸€ä¸‹-1" class="headerlink" title="è¯•éªŒä¸€ä¸‹"></a>è¯•éªŒä¸€ä¸‹</h3><p>æŒ‰ä¸‹å›¾ä¿®æ”¹ä¸€ä¸‹ï¼Œä½¿ç”¨sftå¾—åˆ°çš„æ¨¡å‹è¿›è¡Œæ¨ç†ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/image-20250326110851718.png" class="" title="image-20250326110851718">

<p>è¿è¡Œï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python cli_demo.py</span><br></pre></td></tr></table></figure>

<p>è¯´çš„æœ‰ç‚¹åƒäººè¯äº†ï¼Œä½†é‡å¤æ¦‚ç‡å¾ˆé«˜ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/c3a38a8e6ce3e077de06a9411d56881.png" class="" title="c3a38a8e6ce3e077de06a9411d56881">

<p>æ‰“å¼€<code>model/chat_model.py</code>ï¼Œå°†é‡å¤è¯æƒ©ç½šæ‰“å¼€ï¼Œå¹¶è®¾ç½®ä¸º1.2ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/image-20250325193813523.png" class="" title="image-20250325193813523">

<p><strong>å†æ¬¡è¯•éªŒï¼š</strong></p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/6323398b3316d8f21637256586767e8.png" class="" title="6323398b3316d8f21637256586767e8">

<p>å¥½çš„ï¼Œå¤è¯»æœºç°è±¡æ²¡äº†ï¼Œ<code>1+1</code>ä¹Ÿèƒ½ç®—å¯¹äº†ï¼ˆç¥å¥‡ï¼‰ï¼Œä½†æ˜¯å…³äºæç™½æ˜¯è°ï¼Œå›ç­”çš„æ›´ç¦»è°±äº†ã€‚</p>
<hr>
<h2 id="RLHF-DPO"><a href="#RLHF-DPO" class="headerlink" title="RLHF -&gt; DPO"></a>RLHF -&gt; DPO</h2><p>OKOKï¼Œå¿«å®Œäº‹äº†ï¼Œå‰è¾ˆç”¨RLHFï¼ˆå¼ºåŒ–å­¦ä¹ äººç±»åé¦ˆä¼˜åŒ–æ–¹æ³•ï¼ŒReinforcement Learning from Human Feedbackï¼‰çš„DPOï¼ˆç›´æ¥åå¥½ä¼˜åŒ–ï¼ŒDirect Preference Optimizationï¼‰å¾®è°ƒï¼Œè¯´æ˜¯æ¯”è¾ƒèŠ‚çœæ˜¾å­˜ï¼Œæ— éœ€è®­ç»ƒå¥–åŠ±æ¨¡å‹ï¼Œå–å¾—æ­£å‘å›ç­”ï¼ˆchosenï¼‰å’Œè´Ÿå‘å›ç­”ï¼ˆrejectedï¼‰å³å¯å¼€å§‹å¾®è°ƒã€‚å¾®è°ƒçš„<code>chosen</code>æ–‡æœ¬æ¥è‡ªåŸæ•°æ®é›†<a target="_blank" rel="noopener" href="https://huggingface.co/datasets/c-s-ale/alpaca-gpt4-data-zh">alpaca-gpt4-data-zh</a>ï¼Œæ‹’ç»æ–‡æœ¬<code>rejected</code>æ¥è‡ªSFTå¾®è°ƒ1ä¸ªepochåçš„æ¨¡å‹è¾“å‡ºï¼Œå¦å¤–ä¸¤ä¸ªæ•°æ®é›†ï¼š<a target="_blank" rel="noopener" href="https://huggingface.co/datasets/Skepsun/huozi_rlhf_data_json">huozi_rlhf_data_json</a>å’Œ<a target="_blank" rel="noopener" href="https://huggingface.co/datasets/beyond/rlhf-reward-single-round-trans_chinese">rlhf-reward-single-round-trans_chinese</a>ï¼Œåˆå¹¶åå…±8ä¸‡æ¡dpoæ•°æ®ï¼Œdpoæ•°æ®é›†å¤„ç†è¿‡ç¨‹åœ¨<code>utils/dpo_data_process.py</code>ã€‚</p>
<h3 id="æ•°æ®é›†ä¸‹è½½åŠåˆ¶ä½œ"><a href="#æ•°æ®é›†ä¸‹è½½åŠåˆ¶ä½œ" class="headerlink" title="æ•°æ®é›†ä¸‹è½½åŠåˆ¶ä½œ"></a>æ•°æ®é›†ä¸‹è½½åŠåˆ¶ä½œ</h3><p>åœ¨<code>data/raw_data</code>æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œä¾æ¬¡è¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://huggingface.co/datasets/llm-wizard/alpaca-gpt4-data-zh</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://huggingface.co/datasets/Skepsun/huozi_rlhf_data_json</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://huggingface.co/datasets/beyond/rlhf-reward-single-round-trans_chinese</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œå°†</p>
<ul>
<li><p>alpaca_gpt4_data_zh&#x2F;alpaca_gpt4_data_zh.json</p>
</li>
<li><p>huozi_rlhf_data_json&#x2F;huozi_rlhf_data.json</p>
</li>
<li><p>rlhf-reward-single-round-trans_chinese&#x2F;data&#x2F;train-00000-of-00001-789dc5dece0f1fc1.parquetå’Œ</p>
<p>test-00000-of-00001-8ecd46436fadcf7f.parquet</p>
</li>
</ul>
<p>å¤åˆ¶åˆ°raw_dataæ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰“å¼€<code>utils/dpo_data_process.py</code>ï¼Œå°†ä¸»ç¨‹åºå…¥å£ä¸‹æ–¹çš„å‡½æ•°æ³¨é‡Šå»æ‰ï¼Œç„¶åè¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python dpo_data_process.py</span><br></pre></td></tr></table></figure>

<p>ç”±äºSTFå¾®è°ƒçš„è¯•éªŒä¸€ä¸‹ç« èŠ‚å·²ç»æŒ‡å®šäº†æ¨ç†è·¯å¾„ä½¿ç”¨sftçš„checkpoint-120000ï¼Œæ‰€ä»¥rejectedä½¿ç”¨çš„ä¹Ÿæ˜¯è¿™ä¸ªæ£€æŸ¥ç‚¹ã€‚</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/4c827d26cc2f531350a0c46f16fe5ea.png" class="" title="4c827d26cc2f531350a0c46f16fe5ea">

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/d42712e2f723e6b3d9fd87ede8e40ef.png" class="" title="d42712e2f723e6b3d9fd87ede8e40ef">

<hr>
<h3 id="DPOè®­ç»ƒ"><a href="#DPOè®­ç»ƒ" class="headerlink" title="DPOè®­ç»ƒ"></a>DPOè®­ç»ƒ</h3><p>æ•°æ®é›†åˆ¶ä½œå®Œæ¯•åï¼Œå…ˆæ›´æ”¹ä¸‹DPOåŠ è½½æ¨¡å‹çš„è·¯å¾„ï¼Œè®¾ç½®æˆsftçš„checkpoint-120000æ£€æŸ¥ç‚¹åŠ è½½ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/image-20250326142917174.png" class="" title="image-20250326142917174">

<p>è¿è¡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pip install wandb</span><br><span class="line"></span><br><span class="line">cd ..</span><br><span class="line"></span><br><span class="line">python dpo_train.py</span><br></pre></td></tr></table></figure>

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/276b78ff698e642d99babdbf9ad95e1.png" class="" title="276b78ff698e642d99babdbf9ad95e1">

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/99b30048901aa654d190e49846588d6.png" class="" title="99b30048901aa654d190e49846588d6">

<h3 id="è¯•éªŒä¸€ä¸‹-2"><a href="#è¯•éªŒä¸€ä¸‹-2" class="headerlink" title="è¯•éªŒä¸€ä¸‹"></a>è¯•éªŒä¸€ä¸‹</h3><p>æ›´æ”¹è·¯å¾„ï¼š</p>
<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/image-20250326152851163.png" class="" title="image-20250326152851163">

<p>è¿è¡Œï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python cli_demo.py</span><br></pre></td></tr></table></figure>

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/04733e147854cb62395463940ce8326.png" class="" title="04733e147854cb62395463940ce8326">

<img src="/2025/03/20/%E4%BB%8E%E9%9B%B6%E8%AE%AD%E7%BB%83%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B3%BB%E7%BB%9F%E4%B9%8BChatLM-mini-Chinese/11142dca3a425570c53ff7d93c52ba2.png" class="" title="11142dca3a425570c53ff7d93c52ba2">

<p>å¥½çš„å§ï¼Œä¾æ—§æ˜¯ç©å…·ã€‚</p>
<p>æœ€åè¿˜æœ‰ä¸‹æ¸¸ä»»åŠ¡çš„å¾®è°ƒ-ä¸‰å…ƒç»„ä¿¡æ¯æŠ½å–ä»»åŠ¡ï¼Œæœ‰ç©ºæ—¶å€™å†å¼„å§ã€‚</p>
<hr>
<h2 id="ä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒ-ä¸‰å…ƒç»„ä¿¡æ¯æŠ½å–"><a href="#ä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒ-ä¸‰å…ƒç»„ä¿¡æ¯æŠ½å–" class="headerlink" title="ä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒ-ä¸‰å…ƒç»„ä¿¡æ¯æŠ½å–"></a>ä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒ-ä¸‰å…ƒç»„ä¿¡æ¯æŠ½å–</h2><p>TODOâ€¦</p>
<hr>
<h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><h3 id="token-type"><a href="#token-type" class="headerlink" title="token_type"></a>token_type</h3><p><code>token_type=&#39;char&#39;</code>ï¼ˆå­—ç¬¦çº§ï¼‰å’Œ <code>token_type=&#39;byte&#39;</code>ï¼ˆå­—èŠ‚çº§ï¼‰çš„ä¸»è¦åŒºåˆ«åœ¨äº <strong>åˆ†è¯ç²’åº¦ã€å¯æ‰©å±•æ€§å’Œé€‚ç”¨åœºæ™¯</strong>ï¼Œä¸‹é¢è¯¦ç»†åˆ†æå®ƒä»¬çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<p><strong>1. <code>char</code>ï¼ˆå­—ç¬¦çº§ BPEï¼‰</strong></p>
<p><strong>ğŸ“Œ åŸç†</strong>ï¼š</p>
<ul>
<li>æŒ‰ç…§<strong>å­—ç¬¦</strong>ï¼ˆCharacterï¼‰å•ä½è¿›è¡Œåˆ†è¯ï¼Œä¸ä¼šæ‹†åˆ†å­—ç¬¦ã€‚</li>
<li>ä¾‹å¦‚ <code>&quot;ä¸­å›½&quot;</code> ä¼šä½œä¸ºä¸¤ä¸ªç‹¬ç«‹å­—ç¬¦ <code>&quot;ä¸­&quot;</code> å’Œ <code>&quot;å›½&quot;</code>ã€‚</li>
</ul>
<p><strong>âœ… ä¼˜åŠ¿</strong></p>
<ol>
<li><strong>æ›´ç›´è§‚æ˜“ç†è§£</strong><ul>
<li>è®­ç»ƒå‡ºæ¥çš„ Tokenizer ç»“æœæ›´æ¥è¿‘äººç±»çš„ç›´è§‰ï¼Œæ¯”å¦‚ <code>&quot;ä½ å¥½&quot;</code> ä¼šåˆ†æˆ <code>&quot;ä½ &quot;</code> å’Œ <code>&quot;å¥½&quot;</code>ï¼Œè€Œä¸ä¼šæ‹†åˆ†æˆæ›´å°çš„éƒ¨åˆ†ã€‚</li>
</ul>
</li>
<li><strong>é€‚ç”¨äºæ±‰è¯­ã€æ—¥è¯­ç­‰éç©ºæ ¼åˆ†éš”è¯­è¨€</strong><ul>
<li>é€‚ç”¨äºä¸­æ–‡ã€æ—¥æ–‡ç­‰ <strong>æ²¡æœ‰ç©ºæ ¼åˆ†è¯çš„è¯­è¨€</strong>ï¼Œå¯ä»¥ä¿ç•™å®Œæ•´å­—ç¬¦ï¼Œæé«˜å¯è¯»æ€§ã€‚</li>
</ul>
</li>
<li><strong>æ›´å°‘çš„ OOVï¼ˆOut of Vocabularyï¼Œæœªç™»å½•è¯ï¼‰</strong><ul>
<li>åªè¦è®­ç»ƒè¯­æ–™è¶³å¤Ÿå¤§ï¼ŒåŸºæœ¬ä¸ä¼šæœ‰ OOVï¼Œå› ä¸ºæ‰€æœ‰å¸¸è§å­—ç¬¦éƒ½ä¼šå‡ºç°åœ¨è¯è¡¨é‡Œã€‚</li>
</ul>
</li>
<li><strong>é€‚ç”¨äºå­—ç¬¦ç²’åº¦çš„ NLP ä»»åŠ¡</strong><ul>
<li>é€‚ç”¨äº <strong>æ‹¼å†™é”™è¯¯æ£€æµ‹ã€æ–‡æœ¬çº é”™ã€å…‰å­¦å­—ç¬¦è¯†åˆ«ï¼ˆOCRï¼‰</strong>ï¼Œå› ä¸ºèƒ½å¤„ç†æ¯ä¸ªå­—ç¬¦ã€‚</li>
</ul>
</li>
</ol>
<p><strong>âŒ ç¼ºç‚¹</strong></p>
<ol>
<li><strong>è¯è¡¨è¾ƒå¤§</strong><ul>
<li>æ¯ä¸ªå­—ç¬¦éƒ½æ˜¯ä¸€ä¸ª Tokenï¼Œå¯¼è‡´ Token æ€»æ•°è¾ƒå¤šï¼ˆå°¤å…¶æ˜¯ Unicode è¯­è¨€ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>åºåˆ—é•¿åº¦è¾ƒé•¿</strong><ul>
<li>ä¾‹å¦‚ <code>[&#39;ä½ &#39;, &#39;å¥½&#39;, &#39;ä¸–&#39;, &#39;ç•Œ&#39;]</code> è¿™æ ·æ‹†åˆ†æ—¶ï¼Œ<strong>ä¸€ä¸ªå•è¯å¯èƒ½ä¼šè¢«æ‹†æˆå¤šä¸ªå­—ç¬¦</strong>ï¼Œå¯¼è‡´åºåˆ—å˜é•¿ï¼Œå¢åŠ  Transformer è®¡ç®—é‡ã€‚</li>
</ul>
</li>
</ol>
<p><strong>2. <code>byte</code>ï¼ˆå­—èŠ‚çº§ BPEï¼‰</strong></p>
<p><strong>ğŸ“Œ åŸç†</strong>ï¼š</p>
<ul>
<li>æŒ‰ç…§<strong>å­—èŠ‚</strong>ï¼ˆByteï¼‰è¿›è¡Œåˆ†è¯ï¼Œè€Œä¸æ˜¯æŒ‰ç…§å­—ç¬¦ã€‚</li>
<li>ä¾‹å¦‚ <code>&quot;ä½ å¥½&quot;</code> åœ¨ UTF-8 ç¼–ç ä¸‹ä¼šè¢«æ‹†åˆ†æˆå¤šä¸ªå­—èŠ‚ <code>\xe4\xbd\xa0</code> å’Œ <code>\xe5\xa5\xbd</code>ã€‚</li>
</ul>
<p><strong>âœ… ä¼˜åŠ¿</strong></p>
<ol>
<li><strong>é€šç”¨æ€§æ›´å¼º</strong><ul>
<li>èƒ½å¤Ÿå¤„ç† <strong>ä»»ä½•è¯­è¨€ã€ç‰¹æ®Šç¬¦å·ã€è¡¨æƒ…ç¬¦å·</strong>ï¼Œç”šè‡³å¯ä»¥ç”¨äº <strong>ä»£ç ï¼ˆç¼–ç¨‹è¯­è¨€ï¼‰</strong>ã€‚</li>
</ul>
</li>
<li><strong>è¯è¡¨æ›´å°</strong><ul>
<li>åªéœ€å­¦ä¹  <strong>256 ä¸ªå­—èŠ‚ï¼ˆByte-Levelï¼‰</strong>ï¼Œå°±èƒ½è¦†ç›–æ‰€æœ‰ Unicode å­—ç¬¦ï¼Œä¸ä¼šæœ‰ OOVã€‚</li>
</ul>
</li>
<li><strong>æ•°æ®å‹ç¼©æ•ˆæœå¥½</strong><ul>
<li>ç”±äº BPE åœ¨å­—èŠ‚çº§åˆ«è¿ä½œï¼Œå®ƒå¯ä»¥åŠ¨æ€å­¦ä¹ å­è¯ï¼Œä»è€Œå‹ç¼©æ–‡æœ¬ï¼ˆå‡å°‘ Token æ•°é‡ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>é€‚ç”¨äºå¤šè¯­è¨€åœºæ™¯</strong><ul>
<li>æ¯”å¦‚ GPT-2 é€‰æ‹© Byte-level BPE å°±æ˜¯ä¸ºäº†æ”¯æŒ<strong>å¤šç§è¯­è¨€</strong>ã€‚</li>
</ul>
</li>
</ol>
<p><strong>âŒ ç¼ºç‚¹</strong></p>
<ol>
<li><strong>å¯è¯»æ€§å·®</strong><ul>
<li><code>byte</code> çº§åˆ«çš„åˆ†è¯ä¸å¯è¯»ï¼Œä¾‹å¦‚ <code>&quot;ä½ å¥½&quot;</code> å¯èƒ½å˜æˆ <code>[&#39;\xe4\xbd\xa0&#39;, &#39;\xe5\xa5\xbd&#39;]</code>ï¼Œå¯¹äºäººç±»æ¥è¯´å®Œå…¨çœ‹ä¸æ‡‚ã€‚</li>
</ul>
</li>
<li><strong>åˆ†è¯ä¸è‡ªç„¶</strong><ul>
<li>ä¾‹å¦‚ <code>&quot;apple&quot;</code> å¯èƒ½å˜æˆ <code>[&quot;ap&quot;, &quot;ple&quot;]</code>ï¼Œä¼šæ‹†åˆ†å¥‡æ€ªçš„éƒ¨åˆ†ã€‚</li>
</ul>
</li>
<li><strong>ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ï¼ˆCJK è¯­è¨€ï¼‰åˆ†è¯æ•ˆæœä¸å¦‚ <code>char</code></strong><ul>
<li>ç”±äº <code>byte</code> çº§åˆ«æ˜¯åŸºäº <strong>Unicode å­—èŠ‚æµ</strong>ï¼Œ<strong>å¯¹äº CJK è¯­è¨€ä¼šæ‹†å¾—å¾ˆç¢</strong>ï¼Œå¯¼è‡´ä¸Šä¸‹æ–‡ä¸¢å¤±ã€‚</li>
</ul>
</li>
</ol>
<p><strong>3. <code>char</code> vs <code>byte</code> é€‰æ‹©å»ºè®®</strong></p>
<table>
<thead>
<tr>
<th>é€‰æ‹©åœºæ™¯</th>
<th><code>char</code>ï¼ˆå­—ç¬¦çº§ BPEï¼‰</th>
<th><code>byte</code>ï¼ˆå­—èŠ‚çº§ BPEï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td><strong>é€‚ç”¨è¯­è¨€</strong></td>
<td>ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ï¼ˆCJKï¼‰</td>
<td>å¤šè¯­è¨€ï¼ˆç‰¹åˆ«æ˜¯å«ä»£ç ã€ç¬¦å·ï¼‰</td>
</tr>
<tr>
<td><strong>å¯è¯»æ€§</strong></td>
<td>å¥½ï¼Œäººèƒ½ç›´æ¥ç†è§£</td>
<td>å·®ï¼Œåˆ†è¯ç»“æœä¸å¯è¯»</td>
</tr>
<tr>
<td><strong>OOVï¼ˆæœªç™»å½•è¯ï¼‰</strong></td>
<td>ä½ï¼ŒåŸºæœ¬ä¸ä¼šæœ‰</td>
<td>æ°¸è¿œæ²¡æœ‰ OOV</td>
</tr>
<tr>
<td><strong>æ¨¡å‹é€‚é…</strong></td>
<td>æ›´é€‚åˆ NLP ä»»åŠ¡</td>
<td>é€‚åˆ GPT-2ã€ç¼–ç¨‹è¯­è¨€</td>
</tr>
<tr>
<td><strong>è¯è¡¨å¤§å°</strong></td>
<td>è¾ƒå¤§</td>
<td>éå¸¸å°ï¼ˆ256 tokensï¼‰</td>
</tr>
<tr>
<td><strong>åºåˆ—é•¿åº¦</strong></td>
<td>è¾ƒé•¿</td>
<td>è¾ƒçŸ­ï¼ˆæ›´é€‚åˆ Transformerï¼‰</td>
</tr>
<tr>
<td><strong>ç‰¹æ®Šå­—ç¬¦å¤„ç†</strong></td>
<td>éœ€è¦é¢å¤–å¤„ç†ç¬¦å·</td>
<td>ç›´æ¥æ”¯æŒä»»ä½•ç¬¦å·</td>
</tr>
</tbody></table>
<p><strong>ğŸ‘‰ æ¨èé€‰æ‹©</strong></p>
<ul>
<li><strong>ä¸­æ–‡ NLPï¼ˆASRã€ç¿»è¯‘ã€æ‘˜è¦ï¼‰ â†’ <code>char</code></strong></li>
<li><strong>å¤šè¯­è¨€ NLPï¼ˆGPT-2, LLaMAï¼‰ â†’ <code>byte</code></strong></li>
<li><strong>ä»£ç &#x2F;è¡¨æƒ…ç¬¦å·&#x2F;ç‰¹æ®Šç¬¦å· NLP â†’ <code>byte</code></strong></li>
<li><strong>å…‰å­¦å­—ç¬¦è¯†åˆ«ï¼ˆOCRï¼‰ â†’ <code>char</code></strong></li>
<li><strong>æ•°æ®é‡å°ï¼Œæ‹…å¿ƒ OOV â†’ <code>byte</code></strong></li>
</ul>
<p><strong>4. æ€»ç»“</strong></p>
<table>
<thead>
<tr>
<th><code>char</code>ï¼ˆå­—ç¬¦çº§ BPEï¼‰</th>
<th><code>byte</code>ï¼ˆå­—èŠ‚çº§ BPEï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>âœ… é€‚åˆ <strong>ä¸­æ–‡ã€æ—¥è¯­ç­‰éç©ºæ ¼åˆ†éš”è¯­è¨€</strong></td>
<td>âœ… é€‚åˆ <strong>å¤šè¯­è¨€ï¼ˆGPT-2&#x2F;LLaMAï¼‰</strong></td>
</tr>
<tr>
<td>âœ… <strong>å¯è¯»æ€§é«˜</strong>ï¼Œæ˜“ç†è§£</td>
<td>âŒ <strong>ä¸å¯è¯»</strong>ï¼Œéš¾ä»¥åˆ†æ</td>
</tr>
<tr>
<td>âŒ <strong>è¯è¡¨è¾ƒå¤§</strong>ï¼Œå å†…å­˜</td>
<td>âœ… <strong>è¯è¡¨å°</strong>ï¼ŒèŠ‚çœæ˜¾å­˜</td>
</tr>
<tr>
<td>âŒ <strong>åºåˆ—é•¿åº¦é•¿</strong>ï¼Œå¢åŠ è®¡ç®—é‡</td>
<td>âœ… <strong>åºåˆ—çŸ­</strong>ï¼Œæ›´é€‚åˆ Transformer</td>
</tr>
<tr>
<td>âœ… é€‚åˆ <strong>OCRã€æ–‡æœ¬ç”Ÿæˆ</strong></td>
<td>âœ… é€‚åˆ <strong>ä»£ç &#x2F;NLP&#x2F;é€šç”¨ AI</strong></td>
</tr>
</tbody></table>
<p><strong>æœ€ç»ˆå»ºè®®</strong>ï¼š</p>
<ul>
<li><strong>å¤„ç†å•ä¸€è¯­è¨€ï¼ˆå¦‚ä¸­æ–‡ NLPï¼‰</strong> â†’ <strong><code>char</code> æ›´åˆé€‚</strong></li>
<li><strong>å¤šè¯­è¨€å¤„ç†ï¼ˆå¦‚ GPT-2ï¼‰</strong> â†’ <strong><code>byte</code> æ›´åˆé€‚</strong></li>
<li><strong>å¦‚æœä¸ç¡®å®šï¼Œé»˜è®¤ <code>char</code> å³å¯</strong> ğŸš€</li>
</ul>
<hr>
<h3 id="dpoæ—¥å¿—"><a href="#dpoæ—¥å¿—" class="headerlink" title="dpoæ—¥å¿—"></a>dpoæ—¥å¿—</h3><p>ä»¥ä¸‹é¢è¿™æ¡ä¸ºä¾‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;loss&#x27;</span>: 0.1506, <span class="string">&#x27;learning_rate&#x27;</span>: 2.705977382875606e-07, <span class="string">&#x27;rewards/chosen&#x27;</span>: -0.2540930509567261, <span class="string">&#x27;rewards/rejected&#x27;</span>: -9.427597999572754, <span class="string">&#x27;rewards/accuracies&#x27;</span>: 0.949999988079071, <span class="string">&#x27;rewards/margins&#x27;</span>: 9.173505783081055, <span class="string">&#x27;logps/rejected&#x27;</span>: -284.3307189941406, <span class="string">&#x27;logps/chosen&#x27;</span>: -367.8659362792969, <span class="string">&#x27;logits/rejected&#x27;</span>: -5.64560079574585, <span class="string">&#x27;logits/chosen&#x27;</span>: -5.654943466186523, <span class="string">&#x27;epoch&#x27;</span>: 3.9&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯ä¸ªå­—æ®µåˆ†æ®µæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p>
<p><strong>ğŸ“Œ å…³é”®æŒ‡æ ‡è§£è¯»</strong></p>
<table>
<thead>
<tr>
<th>æŒ‡æ ‡</th>
<th>å«ä¹‰</th>
<th>ä½ çš„æ•°å€¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>loss</code></strong></td>
<td>è®­ç»ƒæŸå¤±</td>
<td><code>0.1506</code></td>
<td>ä¸‹é™äº†ï¼Œè¯´æ˜æ¨¡å‹åœ¨æ”¶æ•›</td>
</tr>
<tr>
<td><strong><code>learning_rate</code></strong></td>
<td>å½“å‰å­¦ä¹ ç‡</td>
<td><code>2.7e-07</code></td>
<td>å¯èƒ½å¤„äºè¡°å‡é˜¶æ®µ</td>
</tr>
<tr>
<td><strong><code>rewards/chosen</code></strong></td>
<td>é€‰ä¸­æ ·æœ¬çš„å¥–åŠ±åˆ†æ•°</td>
<td><code>-0.2541</code></td>
<td>è´Ÿæ•°ï¼Œå¯èƒ½æ˜¯å› ä¸º reward æ ‡å‡†åŒ–</td>
</tr>
<tr>
<td><strong><code>rewards/rejected</code></strong></td>
<td>è¢«æ‹’ç»æ ·æœ¬çš„å¥–åŠ±</td>
<td><code>-9.4276</code></td>
<td>è¿œä½äº <code>rewards/chosen</code>ï¼Œç¬¦åˆé¢„æœŸ</td>
</tr>
<tr>
<td><strong><code>rewards/accuracies</code></strong></td>
<td>è®­ç»ƒå‡†ç¡®ç‡</td>
<td><code>0.9500</code></td>
<td>éå¸¸é«˜ï¼Œæ¨¡å‹åŸºæœ¬å­¦ä¼šæ­£ç¡®é€‰æ‹©</td>
</tr>
<tr>
<td><strong><code>rewards/margins</code></strong></td>
<td>é€‰ä¸­ä¸æ‹’ç»æ ·æœ¬çš„å¥–åŠ±å·®è·</td>
<td><code>9.1735</code></td>
<td>è¯´æ˜æ¨¡å‹èƒ½å¾ˆå¥½åœ°åŒºåˆ†å¥½åå›ç­”</td>
</tr>
<tr>
<td><strong><code>logps/rejected</code></strong></td>
<td>æ‹’ç»æ ·æœ¬çš„ log æ¦‚ç‡</td>
<td><code>-284.33</code></td>
<td>æ•°å€¼å¤§ï¼Œè¡¨ç¤ºæ¨¡å‹æ›´å€¾å‘äºæ‹’ç»</td>
</tr>
<tr>
<td><strong><code>logps/chosen</code></strong></td>
<td>é€‰ä¸­æ ·æœ¬çš„ log æ¦‚ç‡</td>
<td><code>-367.87</code></td>
<td>æ•°å€¼æ›´å¤§ï¼Œè¡¨ç¤ºæ¨¡å‹ä¿¡å¿ƒè¾ƒä½</td>
</tr>
<tr>
<td><strong><code>logits/rejected</code></strong></td>
<td>æ‹’ç»æ ·æœ¬çš„åŸå§‹ logit åˆ†å€¼</td>
<td><code>-5.65</code></td>
<td>å’Œ chosen ç›¸å·®ä¸å¤§</td>
</tr>
<tr>
<td><strong><code>logits/chosen</code></strong></td>
<td>é€‰ä¸­æ ·æœ¬çš„åŸå§‹ logit åˆ†å€¼</td>
<td><code>-5.65</code></td>
<td>é€‰ä¸­æ ·æœ¬ç•¥å¥½</td>
</tr>
<tr>
<td><strong>epoch</strong></td>
<td>å½“å‰è½®æ•°</td>
<td>3.9</td>
<td>å³å°†å®Œæˆï¼ˆä»¥4ä¸ºç›®æ ‡ï¼‰</td>
</tr>
</tbody></table>
<blockquote>
<p>ä¿¡å¿ƒï¼ˆç½®ä¿¡åº¦ï¼‰ä½è¡¨æ˜è™½ç„¶èƒ½é€‰å¯¹ï¼Œä½†çŠ¹è±«ä¸å†³ï¼Œæ³›åŒ–ï¼ˆé²æ£’ï¼‰æ€§ä¸å¥½ã€‚</p>
</blockquote>
<p><strong>ğŸ“Œ è®­ç»ƒçŠ¶æ€åˆ†æ</strong></p>
<p>âœ… <strong>æŸå¤±ï¼ˆlossï¼‰å·²ç»é™ä½</strong>ï¼Œè¯´æ˜æ¨¡å‹æ­£åœ¨æœ‰æ•ˆæ”¶æ•›ã€‚<br> âœ… <strong>å‡†ç¡®ç‡ï¼ˆrewards&#x2F;accuraciesï¼‰å¾ˆé«˜</strong>ï¼šè¯´æ˜æ¨¡å‹èƒ½æ­£ç¡®åŒºåˆ†å¤§éƒ¨åˆ†æ ·æœ¬ã€‚<br> âœ… <strong>å¥–åŠ±åˆ†æ•°å¯¹æ¯”</strong>ï¼š</p>
<ul>
<li><code>rewards/chosen</code> (<code>-0.2541</code>) æ˜æ˜¾é«˜äº <code>rewards/rejected</code> (<code>9.4276</code>)ï¼Œè¯´æ˜æ¨¡å‹åœ¨å­¦ä¹ æ­£ç¡®åå¥½ã€‚</li>
<li><code>rewards/margins = 9.1735</code>ï¼Œè¯´æ˜æ¨¡å‹èƒ½æ‹‰å¼€å¥½åæ ·æœ¬çš„å·®è·ã€‚<br> âœ… å­¦ä¹ ç‡ä¸‹é™ï¼šå¯èƒ½å·²ç»è¿›å…¥ <strong>å­¦ä¹ ç‡è¡°å‡ï¼ˆdecayï¼‰</strong> é˜¶æ®µï¼Œé¢„è®¡è®­ç»ƒå³å°†ç»“æŸã€‚</li>
</ul>
<p><strong>ğŸ“Œ éœ€è¦å…³æ³¨çš„ç‚¹</strong></p>
<p>ğŸ”¹ <strong>Logit å·®è·è¾ƒå°</strong>ï¼ˆ<code>logits/chosen â‰ˆ logits/rejected</code>ï¼‰</p>
<ul>
<li>è¯´æ˜æ¨¡å‹å¯¹é€‰ä¸­æ ·æœ¬å’Œæ‹’ç»æ ·æœ¬çš„åŒºåˆ†åº¦è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</li>
<li>å¯ä»¥æ£€æŸ¥ <code>DPOTrainer</code> é‡Œçš„ <code>beta</code> å‚æ•°ï¼Œçœ‹çœ‹æ˜¯å¦éœ€è¦è°ƒæ•´ã€‚<br> ğŸ”¹ <strong>å­¦ä¹ ç‡å·²é™åˆ°è¾ƒä½æ°´å¹³</strong></li>
<li>å¦‚æœ loss ç»§ç»­ä¸‹é™ï¼Œå¯ä»¥è€ƒè™‘ <strong>æå‰åœæ­¢è®­ç»ƒï¼ˆearly stoppingï¼‰</strong>ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚</li>
<li>å¦‚æœ loss ä¸å†ä¸‹é™ï¼Œå¯ä»¥ <strong>å¢åŠ è®­ç»ƒè½®æ•°</strong> æˆ– <strong>è°ƒæ•´å­¦ä¹ ç‡è°ƒåº¦ç­–ç•¥</strong>ï¼ˆå¦‚ <code>cosine</code> ä»£æ›¿ <code>linear</code>ï¼‰ã€‚</li>
</ul>
<p><strong>ğŸ“Œ æ€»ç»“</strong></p>
<p>ğŸ“‰ <strong>è®­ç»ƒè¿›åº¦è‰¯å¥½</strong>ï¼Œæ¨¡å‹åœ¨æ”¶æ•›ï¼Œ<code>loss</code> é™ä½ï¼Œå‡†ç¡®ç‡é«˜ï¼ˆ<code>0.9500%</code>ï¼‰ï¼Œreward å·®è·æ˜æ˜¾ã€‚<br> ğŸ›  <strong>å¯ä»¥è€ƒè™‘</strong> è§‚å¯Ÿ logit å˜åŒ–ï¼Œè°ƒæ•´ <code>beta</code> æˆ–å­¦ä¹ ç‡è°ƒåº¦ç­–ç•¥ï¼Œç¡®ä¿æœ€ç»ˆæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚<br> ğŸš€ <strong>å¦‚æœ loss ç»§ç»­é™ä½</strong>ï¼Œå¯ä»¥ <strong>æå‰ç»“æŸè®­ç»ƒï¼Œä¿å­˜æœ€ä½³æ¨¡å‹ï¼</strong></p>
<hr>
<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ol>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/gmaaa123/article/details/140319691">https://blog.csdn.net/gmaaa123/article/details/140319691</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/charent/ChatLM-mini-Chinese">https://github.com/charent/ChatLM-mini-Chinese</a></li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/SFT/" rel="tag"># SFT</a>
              <a href="/tags/ChatLM-mini-Chinese/" rel="tag"># ChatLM-mini-Chinese</a>
              <a href="/tags/Pre-train/" rel="tag"># Pre-train</a>
              <a href="/tags/DPO/" rel="tag"># DPO</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/03/18/Qwen2-5VL%E5%AE%89%E8%A3%85%E4%B8%8E%E5%AE%98%E6%96%B9%E7%8E%A9%E6%B3%95%E4%BD%93%E9%AA%8C/" rel="prev" title="Qwen2.5VL 7Bå®‰è£…ä¸å®˜æ–¹ç©æ³•ä½“éªŒ">
                  <i class="fa fa-angle-left"></i> Qwen2.5VL 7Bå®‰è£…ä¸å®˜æ–¹ç©æ³•ä½“éªŒ
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/03/21/AI%E7%B3%BB%E5%88%97%E8%AF%BE%E7%A8%8B%EF%BC%9A%E5%AF%BC%E8%AE%BAand%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/" rel="next" title="AIç³»åˆ—è¯¾ç¨‹ï¼šå¯¼è®ºandæ•°å­¦åŸºç¡€1">
                  AIç³»åˆ—è¯¾ç¨‹ï¼šå¯¼è®ºandæ•°å­¦åŸºç¡€1 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2026</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Chr</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">482k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">29:14</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","src":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
