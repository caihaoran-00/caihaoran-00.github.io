<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"caihaoran-00.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="å‰è¨€ä»Šå¤©åœ¨æŸ¥çœ‹Shadowfita&#x2F;parakeet-tdt-0.6b-v2-fastapiè¿™ä¸ªä»“åº“ï¼Œçœ‹çœ‹ä»–çš„å®ç°æœ‰æ²¡æœ‰å¯å–ä¹‹å¤„æ—¶ï¼Œå‘ç°å…¶ä½¿ç”¨äº†dockerï¼Œè½¬å¿µä¸€æƒ³ï¼Œæˆ‘è¿˜æ²¡ä»å¤´æ‹ä¸‹dockerçš„å‘½ä»¤ï¼Œæ­£å¥½ç°åœ¨æœ‰æ—¶é—´ï¼ŒæŠŠè¿™ä¸ªå‘å¡«äº†å§ã€‚æœ¬æ–‡ä»ä¸¤éƒ¨åˆ†è¿›è¡Œå±•å¼€ä»‹ç»dockeråŸºç¡€ç”¨æ³•ï¼š  ä»Docker Hubæ‹‰å–é•œåƒ è‡ªå·±æ„å»ºé•œåƒ  Letâ€™s go!">
<meta property="og:type" content="article">
<meta property="og:title" content="dockerå¸¸ç”¨å‘½ä»¤">
<meta property="og:url" content="https://caihaoran-00.github.io/2025/07/23/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/index.html">
<meta property="og:site_name" content="Chr&#39;s Blog">
<meta property="og:description" content="å‰è¨€ä»Šå¤©åœ¨æŸ¥çœ‹Shadowfita&#x2F;parakeet-tdt-0.6b-v2-fastapiè¿™ä¸ªä»“åº“ï¼Œçœ‹çœ‹ä»–çš„å®ç°æœ‰æ²¡æœ‰å¯å–ä¹‹å¤„æ—¶ï¼Œå‘ç°å…¶ä½¿ç”¨äº†dockerï¼Œè½¬å¿µä¸€æƒ³ï¼Œæˆ‘è¿˜æ²¡ä»å¤´æ‹ä¸‹dockerçš„å‘½ä»¤ï¼Œæ­£å¥½ç°åœ¨æœ‰æ—¶é—´ï¼ŒæŠŠè¿™ä¸ªå‘å¡«äº†å§ã€‚æœ¬æ–‡ä»ä¸¤éƒ¨åˆ†è¿›è¡Œå±•å¼€ä»‹ç»dockeråŸºç¡€ç”¨æ³•ï¼š  ä»Docker Hubæ‹‰å–é•œåƒ è‡ªå·±æ„å»ºé•œåƒ  Letâ€™s go!">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-07-23T11:39:47.000Z">
<meta property="article:modified_time" content="2025-07-28T06:35:14.727Z">
<meta property="article:author" content="Chr">
<meta property="article:tag" content="docker">
<meta property="article:tag" content="nigix">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://caihaoran-00.github.io/2025/07/23/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://caihaoran-00.github.io/2025/07/23/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","path":"2025/07/23/dockerå¸¸ç”¨å‘½ä»¤/","title":"dockerå¸¸ç”¨å‘½ä»¤"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>dockerå¸¸ç”¨å‘½ä»¤ | Chr's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Chr's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Record and Share</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="æœç´¢..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A3%E6%96%87"><span class="nav-number">2.</span> <span class="nav-text">æ­£æ–‡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9C%85-%E4%BB%8EDocker-Hub%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F"><span class="nav-number">2.1.</span> <span class="nav-text">âœ… ä»Docker Hubæ‹‰å–é•œåƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%A7%B0-%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E7%A1%AE%E8%AE%A4-Docker-%E5%B7%B2%E5%AE%89%E8%A3%85"><span class="nav-number">2.1.1.</span> <span class="nav-text">ğŸ§° ç¬¬ä¸€æ­¥ï¼šç¡®è®¤ Docker å·²å®‰è£…</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%93%A6-%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E4%BB%8E-Docker-Hub-%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F"><span class="nav-number">2.1.2.</span> <span class="nav-text">ğŸ“¦ ç¬¬äºŒæ­¥ï¼šä» Docker Hub æ‹‰å–é•œåƒ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%94%8D-%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E6%9F%A5%E7%9C%8B%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F"><span class="nav-number">2.1.3.</span> <span class="nav-text">ğŸ” ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹æœ¬åœ°é•œåƒ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E2%96%B6%EF%B8%8F-%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8%EF%BC%88%E6%9C%80%E6%A0%B8%E5%BF%83%E6%93%8D%E4%BD%9C%EF%BC%89"><span class="nav-number">2.1.4.</span> <span class="nav-text">â–¶ï¸ ç¬¬å››æ­¥ï¼šè¿è¡Œå®¹å™¨ï¼ˆæœ€æ ¸å¿ƒæ“ä½œï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%9A%80-%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8%EF%BC%88%E6%8E%A8%E8%8D%90%E6%96%B9%E5%BC%8F%EF%BC%89"><span class="nav-number">2.1.5.</span> <span class="nav-text">ğŸš€ ç¬¬äº”æ­¥ï¼šåå°è¿è¡Œå®¹å™¨ï¼ˆæ¨èæ–¹å¼ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%8C%90-%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9A%E6%98%A0%E5%B0%84%E7%AB%AF%E5%8F%A3%EF%BC%88%E8%AE%A9%E5%A4%96%E9%83%A8%E8%83%BD%E8%AE%BF%E9%97%AE%EF%BC%89"><span class="nav-number">2.1.6.</span> <span class="nav-text">ğŸŒ ç¬¬å…­æ­¥ï¼šæ˜ å°„ç«¯å£ï¼ˆè®©å¤–éƒ¨èƒ½è®¿é—®ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%8C%8D-%E7%AC%AC%E4%B8%83%E6%AD%A5%EF%BC%9A%E9%AA%8C%E8%AF%81%E6%9C%8D%E5%8A%A1%E6%98%AF%E5%90%A6%E8%BF%90%E8%A1%8C"><span class="nav-number">2.1.7.</span> <span class="nav-text">ğŸŒ ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯æœåŠ¡æ˜¯å¦è¿è¡Œ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%94%8E-%E7%AC%AC%E5%85%AB%E6%AD%A5%EF%BC%9A%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%8A%B6%E6%80%81"><span class="nav-number">2.1.8.</span> <span class="nav-text">ğŸ” ç¬¬å…«æ­¥ï¼šæŸ¥çœ‹å®¹å™¨çŠ¶æ€</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%93%8B-%E7%AC%AC%E4%B9%9D%E6%AD%A5%EF%BC%9A%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97"><span class="nav-number">2.1.9.</span> <span class="nav-text">ğŸ“‹ ç¬¬ä¹æ­¥ï¼šæŸ¥çœ‹å®¹å™¨æ—¥å¿—</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%9B%91-%E7%AC%AC%E5%8D%81%E6%AD%A5%EF%BC%9A%E5%81%9C%E6%AD%A2%E5%92%8C%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8"><span class="nav-number">2.1.10.</span> <span class="nav-text">ğŸ›‘ ç¬¬åæ­¥ï¼šåœæ­¢å’Œå¯åŠ¨å®¹å™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%A7%B9-%E7%AC%AC%E5%8D%81%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8%EF%BC%88%E6%B8%85%E7%90%86%EF%BC%89"><span class="nav-number">2.1.11.</span> <span class="nav-text">ğŸ§¹ ç¬¬åä¸€æ­¥ï¼šåˆ é™¤å®¹å™¨ï¼ˆæ¸…ç†ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%97%91%EF%B8%8F-%E7%AC%AC%E5%8D%81%E4%BA%8C%E6%AD%A5%EF%BC%9A%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="nav-number">2.1.12.</span> <span class="nav-text">ğŸ—‘ï¸ ç¬¬åäºŒæ­¥ï¼šåˆ é™¤é•œåƒï¼ˆå¯é€‰ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E2%9C%85-%E6%80%BB%E7%BB%93%EF%BC%9A%E5%AE%8C%E6%95%B4%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="nav-number">2.1.13.</span> <span class="nav-text">âœ… æ€»ç»“ï¼šå®Œæ•´åŸºç¡€æ“ä½œæµç¨‹</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9C%85-%E8%87%AA%E5%B7%B1%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="nav-number">2.2.</span> <span class="nav-text">âœ… è‡ªå·±æ„å»ºé•œåƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E2%9C%85-%E6%AD%A3%E7%A1%AE%E7%9A%84%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84%EF%BC%9A%E4%B8%89%E6%AD%A5%E8%B5%B0%EF%BC%88%E4%BF%AE%E6%AD%A3%E7%89%88%EF%BC%89"><span class="nav-number">2.2.1.</span> <span class="nav-text">âœ… æ­£ç¡®çš„å­¦ä¹ è·¯å¾„ï¼šä¸‰æ­¥èµ°ï¼ˆä¿®æ­£ç‰ˆï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%8E%AF-%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84-FastAPI-%E9%95%9C%E5%83%8F"><span class="nav-number">2.2.2.</span> <span class="nav-text">ğŸ¯ ç¬¬ä¸€æ­¥ï¼šæœ€ç®€å•çš„ FastAPI é•œåƒ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%92%A1-%E6%B3%A8%E6%84%8F%EF%BC%9A"><span class="nav-number">2.3.</span> <span class="nav-text">ğŸ’¡ æ³¨æ„ï¼š</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E2%9C%85-%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E6%8C%82%E8%BD%BD%E6%96%87%E4%BB%B6%EF%BC%88-v%EF%BC%89%E5%AE%9E%E7%8E%B0%E7%83%AD%E6%9B%B4%E6%96%B0"><span class="nav-number">2.3.1.</span> <span class="nav-text">âœ… ç¬¬äºŒæ­¥ï¼šæŒ‚è½½æ–‡ä»¶ï¼ˆ-vï¼‰å®ç°çƒ­æ›´æ–°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E7%82%B9%E4%BA%94%E6%AD%A5%EF%BC%9A-it-%E4%BA%A4%E4%BA%92%E5%BC%8F%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8-v-%E6%8C%82%E8%BD%BD%E6%96%87%E4%BB%B6-%E5%B0%8F%E6%A1%88%E4%BE%8B-%E7%A4%BA%E4%BE%8B"><span class="nav-number">2.3.2.</span> <span class="nav-text">ç¬¬äºŒç‚¹äº”æ­¥ï¼š-it (äº¤äº’å¼è¿›å…¥å®¹å™¨)+ -v(æŒ‚è½½æ–‡ä»¶)å°æ¡ˆä¾‹&#x2F;ç¤ºä¾‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%94%8D-%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E9%AA%8C%E8%AF%81%E2%80%9C%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E2%80%9D"><span class="nav-number">2.3.3.</span> <span class="nav-text">ğŸ” ç¬¬ä¸‰æ­¥ï¼šéªŒè¯â€œæ•°æ®æŒä¹…åŒ–â€</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9C%85-%E5%BC%95%E5%85%A5-Redis%EF%BC%88%E7%94%A8-docker-compose%EF%BC%89"><span class="nav-number">2.4.</span> <span class="nav-text">âœ… å¼•å…¥ Redisï¼ˆç”¨ docker-composeï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E4%BF%AE%E6%94%B9-weather-script-py%EF%BC%88%E5%8A%A0%E5%85%A5-Redis-%E8%AE%A1%E6%95%B0%E5%99%A8%EF%BC%89"><span class="nav-number">2.4.1.</span> <span class="nav-text">1. ä¿®æ”¹ weather_script.pyï¼ˆåŠ å…¥ Redis è®¡æ•°å™¨ï¼‰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-docker-compose-yml"><span class="nav-number">2.4.2.</span> <span class="nav-text">2. docker-compose.yml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E2%96%B6-%E4%B8%80%E9%94%AE%E5%90%AF%E5%8A%A8%E4%B8%A4%E4%B8%AA%E6%9C%8D%E5%8A%A1"><span class="nav-number">2.4.3.</span> <span class="nav-text">â–¶ ä¸€é”®å¯åŠ¨ä¸¤ä¸ªæœåŠ¡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%F0%9F%A7%B1-%E5%9C%A8-docker-compose-yml-%E4%B8%AD%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="nav-number">2.4.4.</span> <span class="nav-text">ğŸ§± åœ¨ docker-compose.yml ä¸­æ„å»ºé•œåƒ</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%8C%90-Docker-Hub-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%EF%BC%88%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86%EF%BC%89"><span class="nav-number">3.</span> <span class="nav-text">ğŸŒ Docker Hub æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆè¡¥å……çŸ¥è¯†ï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84%E5%BD%95"><span class="nav-number">4.</span> <span class="nav-text">é™„å½•</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#compose%E5%81%9C%E6%AD%A2%E4%BD%86%E4%B8%8D%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8"><span class="nav-number">4.1.</span> <span class="nav-text">composeåœæ­¢ä½†ä¸åˆ é™¤å®¹å™¨</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Chr</p>
  <div class="site-description" itemprop="description">Welcome to my little world</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">89</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">101</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:1299964565@qq.com" title="E-Mail â†’ mailto:1299964565@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://caihaoran-00.github.io/2025/07/23/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chr">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chr's Blog">
      <meta itemprop="description" content="Welcome to my little world">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="dockerå¸¸ç”¨å‘½ä»¤ | Chr's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          dockerå¸¸ç”¨å‘½ä»¤
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-07-23 19:39:47" itemprop="dateCreated datePublished" datetime="2025-07-23T19:39:47+08:00">2025-07-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-07-28 14:35:14" itemprop="dateModified" datetime="2025-07-28T14:35:14+08:00">2025-07-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>8.9k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>32 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä»Šå¤©åœ¨æŸ¥çœ‹<a target="_blank" rel="noopener" href="https://github.com/Shadowfita/parakeet-tdt-0.6b-v2-fastapi/tree/main">Shadowfita&#x2F;parakeet-tdt-0.6b-v2-fastapi</a>è¿™ä¸ªä»“åº“ï¼Œçœ‹çœ‹ä»–çš„å®ç°æœ‰æ²¡æœ‰å¯å–ä¹‹å¤„æ—¶ï¼Œå‘ç°å…¶ä½¿ç”¨äº†dockerï¼Œè½¬å¿µä¸€æƒ³ï¼Œæˆ‘è¿˜æ²¡ä»å¤´æ‹ä¸‹dockerçš„å‘½ä»¤ï¼Œæ­£å¥½ç°åœ¨æœ‰æ—¶é—´ï¼ŒæŠŠè¿™ä¸ªå‘å¡«äº†å§ã€‚æœ¬æ–‡ä»ä¸¤éƒ¨åˆ†è¿›è¡Œå±•å¼€ä»‹ç»dockeråŸºç¡€ç”¨æ³•ï¼š</p>
<ul>
<li>ä»Docker Hubæ‹‰å–é•œåƒ</li>
<li>è‡ªå·±æ„å»ºé•œåƒ</li>
</ul>
<p>Letâ€™s go!</p>
<span id="more"></span>

<hr>
<h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><p>æ­£å¼å¼€å§‹Dockerçš„åŸºç¡€å‘½ä»¤ä»‹ç»ä¹‹å‰ï¼Œæœ‰å¿…è¦å…ˆä»‹ç»ä¸‹ä»€ä¹ˆæ˜¯Dockerä»¥åŠDockerçš„æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<p>Docker æ˜¯ä¸€ä¸ªâ€œ<strong>æ‰“åŒ…å·¥å…·</strong> â€ï¼Œå¯ä»¥æŠŠä½ çš„ç¨‹åºï¼ˆæ¯”å¦‚ä¸€ä¸ªç½‘ç«™ã€ä¸€ä¸ªåç«¯æœåŠ¡ï¼‰å’Œå®ƒè¿è¡Œæ‰€éœ€çš„ç¯å¢ƒï¼ˆæ“ä½œç³»ç»Ÿã€è½¯ä»¶ã€é…ç½®æ–‡ä»¶ç­‰ï¼‰ä¸€èµ·â€œæ‰“åŒ…â€æˆä¸€ä¸ªâ€œé›†è£…ç®±â€ï¼ˆå« <strong>å®¹å™¨</strong> ï¼‰ï¼Œç„¶ååœ¨ä»»ä½•åœ°æ–¹è¿è¡Œï¼Œæ•ˆæœéƒ½ä¸€æ ·ã€‚</p>
<blockquote>
<p>ğŸ§© ç±»æ¯”ï¼šå°±åƒä½ æŠŠå®¶é‡Œçš„å®¶å…·ã€ç”µå™¨ã€è£…ä¿®é£æ ¼éƒ½æ‰“åŒ…è¿›ä¸€ä¸ªé›†è£…ç®±ï¼Œè¿åˆ°å¦ä¸€ä¸ªåŸå¸‚ï¼Œæ‰“å¼€åï¼Œä¸€åˆ‡åŸå°ä¸åŠ¨ã€‚ </p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">DOCKERæ¦‚å¿µ</th>
<th align="center">ç”Ÿæ´»ç±»æ¯”</th>
<th align="center">è¯¦ç»†è§£é‡Š</th>
<th align="center">æŠ€æœ¯ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>Docker</strong></td>
<td align="center">å¿«é¤åº—çš„æ ‡å‡†åŒ–æ‰“åŒ…ç³»ç»Ÿ</td>
<td align="center">ä¸€å¥—è®©ç¨‹åºâ€œåœ¨å“ªéƒ½èƒ½ä¸€æ ·è¿è¡Œâ€çš„å·¥å…·ï¼Œè§£å†³â€œåœ¨æˆ‘ç”µè„‘èƒ½è·‘ï¼Œä½ ç”µè„‘ä¸è¡Œâ€çš„é—®é¢˜ã€‚</td>
<td align="center">å®¹å™¨åŒ–æŠ€æœ¯å¹³å°ï¼Œç»Ÿä¸€ç¯å¢ƒã€æ‰“åŒ…ã€è¿è¡Œæ–¹å¼ã€‚</td>
</tr>
<tr>
<td align="center"><strong>é•œåƒï¼ˆImageï¼‰</strong></td>
<td align="center">æ‰“åŒ…å¥½çš„å¿«é¤å¥—é¤ï¼ˆæœªæ‰“å¼€ï¼‰<br />ğŸ“¦ æ¯”å¦‚ï¼šé¦™è¾£é¸¡è…¿å ¡å¥—é¤</td>
<td align="center">å°±æ˜¯ä¸€ä¸ªâ€œåšå¥½çš„è½¯ä»¶åŒ…â€ï¼ŒåŒ…å«ç¨‹åº + ç¯å¢ƒ + ä¾èµ–ï¼Œ<strong>ä¸èƒ½ç›´æ¥è¿è¡Œ</strong>ï¼Œä½†å¯ä»¥å¤šæ¬¡å¤åˆ¶ã€‚</td>
<td align="center">é™æ€æ–‡ä»¶ã€åˆ†å±‚å­˜å‚¨ã€å¯å…±äº«ã€é€šè¿‡<code>docker images</code>æŸ¥çœ‹ã€‚</td>
</tr>
<tr>
<td align="center"><strong>å®¹å™¨ï¼ˆContainerï¼‰</strong></td>
<td align="center">ä½ æ­£åœ¨åƒçš„é‚£ä»½å¥—é¤<br>ğŸ½ï¸ æ‰“å¼€ç›’å­å¼€å§‹åƒ</td>
<td align="center">æ˜¯é•œåƒâ€œè¿è¡Œèµ·æ¥â€çš„å®ä¾‹ã€‚ç¨‹åºçœŸæ­£åœ¨å¹²æ´»çš„çŠ¶æ€ã€‚å¯ä»¥å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€‚</td>
<td align="center">åŠ¨æ€è¿è¡Œã€æ¯ä¸ªå®¹å™¨ç›¸äº’éš”ç¦»ã€é€šè¿‡<code>docker ps</code>æŸ¥çœ‹ã€‚</td>
</tr>
<tr>
<td align="center"><strong><code>Dockerfile</code></strong></td>
<td align="center">æ±‰å ¡åˆ¶ä½œè¯´æ˜ä¹¦ &#x2F; èœè°±</td>
<td align="center">ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå†™æ˜â€œæ€ä¹ˆä¸€æ­¥æ­¥åšå‡ºè¿™ä¸ªé•œåƒâ€ï¼Œæ¯”å¦‚è£…ç³»ç»Ÿã€æ”¾ä»£ç ã€è®¾å¯åŠ¨å‘½ä»¤ã€‚</td>
<td align="center">æ„å»ºé•œåƒçš„è„šæœ¬ï¼Œç”¨<code>docker build</code>æ‰§è¡Œã€‚</td>
</tr>
<tr>
<td align="center"><strong><code>Docker Hub</code></strong></td>
<td align="center">ç¾å›¢å¤–å– &#x2F; å¿«é¤åº—èœå•</td>
<td align="center">ä¸€ä¸ªâ€œåº”ç”¨å•†åº—â€ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½åˆ«äººåšå¥½çš„é•œåƒï¼Œæ¯”å¦‚ <code>Nginx</code>ã€<code>Redis</code>ã€‚</td>
<td align="center">å…¬å…±é•œåƒä»“åº“ï¼Œå®˜æ–¹ç»´æŠ¤ï¼Œå‘½ä»¤ï¼š<code>docker pull é•œåƒå</code>ã€‚</td>
</tr>
</tbody></table>
<blockquote>
<p>ä¸Šé¢é•œåƒæè¿°ä¸­æåˆ°çš„ä¸èƒ½ç›´æ¥è¿è¡Œæ˜¯æŒ‡éœ€è¦é€šè¿‡docker run é•œåƒåæ¥å¯åŠ¨ï¼Œå®æ—¶ä¸Šè¿™ä¸€æ­¥åŒ…å«äº†ï¼š</p>
<ul>
<li>æ£€æŸ¥æœ‰æ²¡æœ‰ <code>Nginx</code> é•œåƒï¼ˆæ²¡æœ‰å°±å»ä¸‹è½½ï¼‰</li>
<li>ä»é•œåƒåˆ›å»ºä¸€ä¸ªå®¹å™¨</li>
<li>å¯åŠ¨å®¹å™¨å†…çš„ä¸»è¿›ç¨‹ï¼ˆ<code>Nginx</code> æœåŠ¡ï¼‰</li>
<li>å¼€å§‹è¿è¡Œ</li>
</ul>
<p>æ‰€ä»¥è¯´ä¸èƒ½ç›´æ¥è¿è¡Œã€‚</p>
</blockquote>
<p>å¥½çš„ï¼Œä»‹ç»å®ŒåŸºç¡€æ¦‚å¿µäº†ï¼Œå’±ä»¬æ­£å¼å¼€å§‹DockeråŸºç¡€å‘½ä»¤ä»‹ç»ã€‚</p>
<hr>
<h3 id="âœ…-ä»Docker-Hubæ‹‰å–é•œåƒ"><a href="#âœ…-ä»Docker-Hubæ‹‰å–é•œåƒ" class="headerlink" title="âœ… ä»Docker Hubæ‹‰å–é•œåƒ"></a>âœ… ä»Docker Hubæ‹‰å–é•œåƒ</h3><p>æˆ‘ä»¬å…ˆä»Docker Hubæ‹‰å–é•œåƒå¼€å§‹åŸºç¡€å‘½ä»¤çš„ä»‹ç»ã€‚æˆ‘ä»¬ä¼šå®Œæˆä»¥ä¸‹ 6 ä¸ªå®Œæ•´åŸºç¡€æ“ä½œ ï¼š</p>
<ul>
<li>ä» Docker Hub æ‹‰å–é•œåƒï¼ˆpullï¼‰</li>
<li>æŸ¥çœ‹æœ¬åœ°é•œåƒï¼ˆimagesï¼‰</li>
<li>è¿è¡Œå®¹å™¨ï¼ˆrunï¼‰</li>
<li>æ˜ å°„ç«¯å£ï¼ˆ-pï¼‰</li>
<li>åå°è¿è¡Œï¼ˆ-dï¼‰</li>
<li>æŸ¥çœ‹å’Œç®¡ç†å®¹å™¨ï¼ˆps, stop, start, logsï¼‰</li>
</ul>
<blockquote>
<p>æ‰€æœ‰æ“ä½œéƒ½åŸºäº å®˜æ–¹é•œåƒ ï¼Œä¸è‡ªå·±æ„å»ºï¼Œå…ˆæŒæ¡â€œä½¿ç”¨åˆ«äººåšå¥½çš„é•œåƒâ€ </p>
</blockquote>
<h4 id="ğŸ§°-ç¬¬ä¸€æ­¥ï¼šç¡®è®¤-Docker-å·²å®‰è£…"><a href="#ğŸ§°-ç¬¬ä¸€æ­¥ï¼šç¡®è®¤-Docker-å·²å®‰è£…" class="headerlink" title="ğŸ§° ç¬¬ä¸€æ­¥ï¼šç¡®è®¤ Docker å·²å®‰è£…"></a>ğŸ§° ç¬¬ä¸€æ­¥ï¼šç¡®è®¤ Docker å·²å®‰è£…</h4><p>æ‰“å¼€ç»ˆç«¯ï¼ˆå‘½ä»¤è¡Œï¼‰ï¼Œè¾“å…¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --version</span><br></pre></td></tr></table></figure>

<p>ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Docker</span> version <span class="number">27</span>.<span class="number">3</span>.<span class="number">1</span>, build ce12230</span><br></pre></td></tr></table></figure>

<p>è¡¨ç¤º Docker å·²å®‰è£…å¥½ï¼ˆæ²¡è£…å¥½çš„è¯è¯·è‡ªè¡Œå®‰è£…ï¼‰ã€‚</p>
<hr>
<h4 id="ğŸ“¦-ç¬¬äºŒæ­¥ï¼šä»-Docker-Hub-æ‹‰å–é•œåƒ"><a href="#ğŸ“¦-ç¬¬äºŒæ­¥ï¼šä»-Docker-Hub-æ‹‰å–é•œåƒ" class="headerlink" title="ğŸ“¦ ç¬¬äºŒæ­¥ï¼šä» Docker Hub æ‹‰å–é•œåƒ"></a>ğŸ“¦ ç¬¬äºŒæ­¥ï¼šä» Docker Hub æ‹‰å–é•œåƒ</h4><p>æˆ‘ä»¬æ¥ä¸‹è½½ä¸€ä¸ªå« <code>Nginx</code> çš„å®˜æ–¹é•œåƒã€‚</p>
<p><code>Nginx</code> æ˜¯ä¸€ä¸ªæµè¡Œçš„ç½‘é¡µæœåŠ¡å™¨ã€‚</p>
<p><strong>å‘½ä»¤ï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure>

<p>ğŸ“Œ è§£é‡Šï¼š</p>
<ul>
<li><code>docker pull</code>ï¼šä» Docker Hub ä¸‹è½½é•œåƒ</li>
<li><code>nginx</code>ï¼šé•œåƒåç§°</li>
<li>é»˜è®¤ä¼šä¸‹è½½ <code>latest</code> æ ‡ç­¾ï¼ˆæœ€æ–°ç‰ˆï¼‰</li>
</ul>
<p>ğŸ‘‰ æ‰§è¡Œåä½ ä¼šçœ‹åˆ°ï¼š</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Using default <span class="params">tag:</span> latest</span><br><span class="line"><span class="params">latest:</span> Pulling from library<span class="symbol">/nginx</span></span><br><span class="line"><span class="number">59</span><span class="params">e22667830b:</span> Pull complete </span><br><span class="line"><span class="number">140</span><span class="params">da4f89dcb:</span> Pull complete </span><br><span class="line"><span class="number">96</span><span class="params">e47e70491e:</span> Pull complete </span><br><span class="line"><span class="number">2</span><span class="params">ef442a3816e:</span> Pull complete </span><br><span class="line"><span class="number">4</span><span class="params">b1e45a9989f:</span> Pull complete </span><br><span class="line"><span class="number">1</span><span class="params">d9f51194194:</span> Pull complete </span><br><span class="line"><span class="params">f30ffbee4c54:</span> Pull complete </span><br><span class="line"><span class="params">Digest:</span> sha256:<span class="number">84</span>ec966e61a8c7846f509da7eb081c55c1d56817448728924a87ab32f12a72fb</span><br><span class="line"><span class="params">Status:</span> Downloaded newer image for nginx:latest</span><br><span class="line">docker.io<span class="operator">/</span>library<span class="operator">/</span>nginx:latest</span><br></pre></td></tr></table></figure>

<p>âœ… æˆåŠŸï¼ä½ å·²ç»ä»äº’è”ç½‘ä¸‹è½½äº†ä¸€ä¸ªâ€œè½¯ä»¶å®‰è£…åŒ…â€ï¼ˆé•œåƒï¼‰ã€‚</p>
<hr>
<h4 id="ğŸ”-ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹æœ¬åœ°é•œåƒ"><a href="#ğŸ”-ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹æœ¬åœ°é•œåƒ" class="headerlink" title="ğŸ” ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹æœ¬åœ°é•œåƒ"></a>ğŸ” ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹æœ¬åœ°é•œåƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>ä½ ä¼šçœ‹åˆ°ï¼š</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">REPOSITORY</span>          TAG                    IMAGE ID              CREATED      	   SIZE</span><br><span class="line"><span class="attribute">nginx</span>               latest                <span class="number">2</span>cd1d97f893f   		<span class="number">9</span> days ago   	   <span class="number">192</span>MB</span><br></pre></td></tr></table></figure>

<p>ğŸ“Œ å­—æ®µè¯´æ˜ï¼š</p>
<ul>
<li><code>REPOSITORY</code>ï¼šé•œåƒåå­—</li>
<li><code>TAG</code>ï¼šç‰ˆæœ¬æ ‡ç­¾ï¼ˆå¦‚ <code>latest</code>, <code>1.24</code>, <code>alpine</code>ï¼‰</li>
<li><code>IMAGE ID</code>ï¼šé•œåƒçš„å”¯ä¸€ç¼–å·</li>
<li><code>SIZE</code>ï¼šå¤§å°</li>
</ul>
<p>âœ… è¿™ä¸ª <code>nginx</code> é•œåƒç°åœ¨å°±åœ¨ä½ ç”µè„‘é‡Œäº†ï¼Œå¯ä»¥éšæ—¶ä½¿ç”¨ã€‚</p>
<hr>
<h4 id="â–¶ï¸-ç¬¬å››æ­¥ï¼šè¿è¡Œå®¹å™¨ï¼ˆæœ€æ ¸å¿ƒæ“ä½œï¼‰"><a href="#â–¶ï¸-ç¬¬å››æ­¥ï¼šè¿è¡Œå®¹å™¨ï¼ˆæœ€æ ¸å¿ƒæ“ä½œï¼‰" class="headerlink" title="â–¶ï¸ ç¬¬å››æ­¥ï¼šè¿è¡Œå®¹å™¨ï¼ˆæœ€æ ¸å¿ƒæ“ä½œï¼‰"></a>â–¶ï¸ ç¬¬å››æ­¥ï¼šè¿è¡Œå®¹å™¨ï¼ˆæœ€æ ¸å¿ƒæ“ä½œï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run nginx</span><br></pre></td></tr></table></figure>

<p>ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>Docker ç”¨ <code>nginx</code> é•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨</li>
<li>Nginx æœåŠ¡å¼€å§‹è¿è¡Œ</li>
<li>ä½†ä½ ä¼šçœ‹åˆ°ä¸€å¤§å †æ—¥å¿—è¾“å‡ºï¼ˆå‰å°è¿è¡Œï¼‰</li>
<li>æŒ‰ <code>Ctrl+C</code> ä¼šåœæ­¢å®¹å™¨</li>
</ul>
<p>ğŸ’¡ è¿™å°±åƒä½ åœ¨ç”µè„‘ä¸ŠåŒå‡»è¿è¡Œä¸€ä¸ªç¨‹åºï¼Œç»ˆç«¯è¢«å ç”¨äº†ã€‚</p>
<p><strong>è¾“å‡ºï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration</span><br><span class="line">/docker-entrypoint.sh: Looking <span class="keyword">for</span> shell scripts <span class="keyword">in</span> /docker-entrypoint.d/</span><br><span class="line">/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh</span><br><span class="line">10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf</span><br><span class="line">10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 <span class="keyword">in</span> /etc/nginx/conf.d/default.conf</span><br><span class="line">/docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh</span><br><span class="line">/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh</span><br><span class="line">/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh</span><br><span class="line">/docker-entrypoint.sh: Configuration complete; ready <span class="keyword">for</span> start up</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: using the <span class="string">&quot;epoll&quot;</span> event method</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: nginx/1.29.0</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: built by gcc 12.2.0 (Debian 12.2.0-14+deb12u1) </span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: OS: Linux 6.5.0-44-generic</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker processes</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 29</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 30</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 31</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 32</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 33</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 34</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 35</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 36</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 37</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 38</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 39</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 40</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 41</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 42</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 43</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 44</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 45</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 46</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 47</span><br><span class="line">2025/07/24 02:03:13 [notice] 1#1: start worker process 48</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="ğŸš€-ç¬¬äº”æ­¥ï¼šåå°è¿è¡Œå®¹å™¨ï¼ˆæ¨èæ–¹å¼ï¼‰"><a href="#ğŸš€-ç¬¬äº”æ­¥ï¼šåå°è¿è¡Œå®¹å™¨ï¼ˆæ¨èæ–¹å¼ï¼‰" class="headerlink" title="ğŸš€ ç¬¬äº”æ­¥ï¼šåå°è¿è¡Œå®¹å™¨ï¼ˆæ¨èæ–¹å¼ï¼‰"></a>ğŸš€ ç¬¬äº”æ­¥ï¼šåå°è¿è¡Œå®¹å™¨ï¼ˆæ¨èæ–¹å¼ï¼‰</h4><p>æˆ‘ä»¬è®©å®¹å™¨åœ¨åå°è¿è¡Œï¼Œä¸å ç”¨ç»ˆç«¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d nginx</span><br></pre></td></tr></table></figure>

<p>ğŸ“Œ å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><code>-d</code>ï¼šdetached modeï¼Œåå°è¿è¡Œ</li>
<li>å®¹å™¨å¯åŠ¨åï¼Œç»ˆç«¯è¿”å›æç¤ºç¬¦ï¼Œä½ å¯ä»¥ç»§ç»­è¾“å…¥å‘½ä»¤</li>
</ul>
<p>ä½ ä¼šçœ‹åˆ°ä¸€ä¸²å­—ç¬¦ï¼ˆå®¹å™¨ IDï¼‰ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">031194</span>ac<span class="number">6682746</span>f<span class="number">4</span>ffdb<span class="number">852177</span><span class="keyword">c</span><span class="number">0</span>d<span class="number">67</span>ef<span class="number">659</span>a<span class="number">3</span>d<span class="number">2263287e7</span>a<span class="number">9e96</span>dc<span class="number">333e1</span>ced</span><br></pre></td></tr></table></figure>

<p>âœ… å®¹å™¨å·²åœ¨åå°è¿è¡Œï¼</p>
<hr>
<h4 id="ğŸŒ-ç¬¬å…­æ­¥ï¼šæ˜ å°„ç«¯å£ï¼ˆè®©å¤–éƒ¨èƒ½è®¿é—®ï¼‰"><a href="#ğŸŒ-ç¬¬å…­æ­¥ï¼šæ˜ å°„ç«¯å£ï¼ˆè®©å¤–éƒ¨èƒ½è®¿é—®ï¼‰" class="headerlink" title="ğŸŒ ç¬¬å…­æ­¥ï¼šæ˜ å°„ç«¯å£ï¼ˆè®©å¤–éƒ¨èƒ½è®¿é—®ï¼‰"></a>ğŸŒ ç¬¬å…­æ­¥ï¼šæ˜ å°„ç«¯å£ï¼ˆè®©å¤–éƒ¨èƒ½è®¿é—®ï¼‰</h4><p>ç°åœ¨å®¹å™¨åœ¨è¿è¡Œï¼Œä½†æˆ‘ä»¬è®¿é—®ä¸äº†ç½‘é¡µï¼Œå› ä¸ºæ²¡æœ‰â€œå¼€é—¨â€ã€‚</p>
<p>Nginx é»˜è®¤åœ¨å®¹å™¨çš„ 80 ç«¯å£è¿è¡Œï¼Œæˆ‘ä»¬è¦æŠŠå®ƒæ˜ å°„åˆ°ä¸»æœºçš„æŸä¸ªç«¯å£ï¼ˆæ¯”å¦‚ 8080ï¼‰ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰è¿è¡Œçš„å®¹å™¨</span></span><br><span class="line">docker docker ps</span><br></pre></td></tr></table></figure>

<p><strong>ä½ ä¼šçœ‹åˆ°ï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CONTAINER ID    IMAGE       COMMAND        		 CREATED           STATUS         PORTS       	NAMES</span><br><span class="line">031194ac6682    nginx   <span class="string">&quot;/docker-entrypoint.â€¦&quot;</span>   4 minutes ago   Up 4 minutes    80/tcp  	relaxed_carson</span><br></pre></td></tr></table></figure>

<p><strong>æˆ‘ä»¬æ¥ä¸€ä¸ªä¸€ä¸ªæ‹†è§£ç€çœ‹ï¼š</strong></p>
<p><strong>1ï¸âƒ£ <code>CONTAINER ID</code>ï¼ˆå®¹å™¨ IDï¼‰</strong></p>
<ul>
<li><p><strong>å«ä¹‰</strong>ï¼šè¿™ä¸ªå®¹å™¨çš„<strong>å”¯ä¸€ç¼–å·</strong>ï¼Œå°±åƒèº«ä»½è¯å·ã€‚</p>
</li>
<li><p><strong>ç¤ºä¾‹</strong>ï¼š<code>031194ac6682</code></p>
</li>
<li><p><strong>ç”¨é€”</strong>ï¼š</p>
<ul>
<li>ç”¨è¿™ä¸ª ID å¯ä»¥ç²¾ç¡®æ“ä½œå®¹å™¨ï¼Œæ¯”å¦‚ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker stop 031194ac6682</span><br><span class="line">docker <span class="built_in">rm</span> 031194ac6682</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<blockquote>
<p>ğŸ’¡ é€šå¸¸ç”¨å‰å‡ ä½å°±å¤Ÿäº†ï¼ˆå¦‚ <code>031194ac</code>ï¼‰ã€‚</p>
</blockquote>
<p><strong>2ï¸âƒ£ <code>IMAGE</code>ï¼ˆé•œåƒåï¼‰</strong></p>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šè¿™ä¸ªå®¹å™¨æ˜¯<strong>åŸºäºå“ªä¸ªé•œåƒåˆ›å»ºçš„</strong>ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>nginx</code></li>
<li><strong>è¯´æ˜</strong>ï¼š<ul>
<li>è¡¨ç¤ºè¿™ä¸ªå®¹å™¨æ˜¯ç”¨ <code>nginx</code> é•œåƒå¯åŠ¨çš„ã€‚</li>
</ul>
</li>
</ul>
<p><strong>3ï¸âƒ£ <code>COMMAND</code>ï¼ˆå¯åŠ¨å‘½ä»¤ï¼‰</strong></p>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šå®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„<strong>ä¸»å‘½ä»¤</strong>æ˜¯ä»€ä¹ˆã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>&quot;/docker-entrypoint.sh â€¦&quot;</code></li>
<li><strong>è¯´æ˜</strong>ï¼š<ul>
<li>è¿™æ˜¯ Nginx å®˜æ–¹é•œåƒçš„å¯åŠ¨è„šæœ¬ï¼Œç”¨æ¥åˆå§‹åŒ– Nginx æœåŠ¡ã€‚</li>
<li>å®ƒä¼šè‡ªåŠ¨è¿è¡Œ <code>nginx -g &#39;daemon off;&#39;</code> æ¥å¯åŠ¨æœåŠ¡å™¨ã€‚</li>
<li>æ˜¾ç¤º <code>â€¦</code> æ˜¯å› ä¸ºå†…å®¹å¤ªé•¿ï¼Œè¢«æˆªæ–­äº†ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>ğŸ” ä½ å¯ä»¥ç”¨ <code>docker inspect å®¹å™¨å</code> çœ‹å®Œæ•´å‘½ä»¤ã€‚</p>
</blockquote>
<p><strong>4ï¸âƒ£ <code>CREATED</code>ï¼ˆåˆ›å»ºæ—¶é—´ï¼‰</strong></p>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šè¿™ä¸ªå®¹å™¨æ˜¯ä»€ä¹ˆæ—¶å€™<strong>è¢«åˆ›å»ºå‡ºæ¥çš„</strong>ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>4 minutes ago</code></li>
<li><strong>è¯´æ˜</strong>ï¼š<ul>
<li>è¡¨ç¤º 4 åˆ†é’Ÿå‰è¿è¡Œäº† <code>docker run</code> å‘½ä»¤ã€‚</li>
</ul>
</li>
</ul>
<p><strong>5ï¸âƒ£ <code>STATUS</code>ï¼ˆçŠ¶æ€ï¼‰</strong></p>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šè¿™ä¸ªå®¹å™¨å½“å‰çš„<strong>è¿è¡ŒçŠ¶æ€</strong>ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>Up 4 minutes</code></li>
<li><strong>å¸¸è§çŠ¶æ€</strong>ï¼š</li>
</ul>
<table>
<thead>
<tr>
<th>çŠ¶æ€</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>Up 4 minutes</code></td>
<td>æ­£åœ¨è¿è¡Œï¼Œå·²è¿è¡Œ 4 åˆ†é’Ÿ âœ…</td>
</tr>
<tr>
<td><code>Exited (0) 2 hours ago</code></td>
<td>å·²åœæ­¢ï¼Œæ­£å¸¸é€€å‡º âŒ</td>
</tr>
<tr>
<td><code>Restarting</code></td>
<td>æ­£åœ¨é‡å¯ä¸­ ğŸ”„</td>
</tr>
<tr>
<td><code>Created</code></td>
<td>å·²åˆ›å»ºï¼Œä½†è¿˜æ²¡å¯åŠ¨ â¸ï¸</td>
</tr>
</tbody></table>
<blockquote>
<p>âœ… åªæœ‰ <code>Up</code> çŠ¶æ€çš„å®¹å™¨æ‰æ˜¯â€œæ´»â€çš„ã€‚</p>
</blockquote>
<p><strong>6ï¸âƒ£ <code>PORTS</code>ï¼ˆç«¯å£æ˜ å°„ï¼‰</strong></p>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šå®¹å™¨çš„ç«¯å£å’Œä¸»æœºç«¯å£çš„<strong>æ˜ å°„å…³ç³»</strong>ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š<code>80/tcp</code></li>
<li><strong>é—®é¢˜æ¥äº†</strong>ï¼šä½ çœ‹åˆ°çš„æ˜¯ <code>80/tcp</code>ï¼Œä½†<strong>æ²¡æœ‰æ˜¾ç¤ºä¸»æœºç«¯å£</strong>ï¼</li>
</ul>
<p>â“ ä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>å› ä¸ºä½ è¿è¡Œå®¹å™¨æ—¶<strong>æ²¡æœ‰ç”¨ <code>-p</code> å‚æ•°</strong>ï¼</p>
<p>æ¯”å¦‚ä½ å¯èƒ½ç”¨äº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d nginx</span><br></pre></td></tr></table></figure>

<p>è¿™è¡¨ç¤ºï¼š</p>
<ul>
<li>å®¹å™¨å†…éƒ¨çš„ Nginx åœ¨ 80 ç«¯å£è¿è¡Œ</li>
<li>ä½†<strong>æ²¡æœ‰æŠŠä¸»æœºçš„ç«¯å£æ˜ å°„è¿‡æ¥</strong>ï¼Œæ‰€ä»¥ä½ åœ¨æµè§ˆå™¨è®¿é—® <code>http://localhost:80</code> æ˜¯æ‰“ä¸å¼€çš„ï¼</li>
</ul>
<p>âœ… æ­£ç¡®åšæ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8080:80 nginx</span><br></pre></td></tr></table></figure>

<p>è¿™æ · <code>PORTS</code> åˆ—å°±ä¼šæ˜¾ç¤ºï¼š</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.0.0.0:8080</span>-&gt;<span class="number">80</span>/tcp</span><br></pre></td></tr></table></figure>

<p>æ„æ€æ˜¯ï¼š</p>
<ul>
<li>ä¸»æœºçš„ <code>8080</code> ç«¯å£ â†’ æ˜ å°„åˆ°å®¹å™¨çš„ <code>80</code> ç«¯å£</li>
<li>ä½ å°±å¯ä»¥é€šè¿‡ <code>http://localhost:8080</code> è®¿é—®ç½‘é¡µäº†ï¼</li>
</ul>
<p><strong>7ï¸âƒ£ <code>NAMES</code>ï¼ˆå®¹å™¨åå­—ï¼‰</strong></p>
<ul>
<li><p><strong>å«ä¹‰</strong>ï¼šDocker ç»™å®¹å™¨èµ·çš„<strong>åå­—</strong>ï¼Œæ–¹ä¾¿è®°å¿†å’Œç®¡ç†ã€‚</p>
</li>
<li><p><strong>ç¤ºä¾‹</strong>ï¼š<code>relaxed_carson</code></p>
</li>
<li><p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li><p>å¦‚æœä½ å¯åŠ¨æ—¶æ²¡ç”¨ <code>--name</code> æŒ‡å®šåå­—ï¼ŒDocker ä¼š<strong>éšæœºç”Ÿæˆ</strong>ä¸€ä¸ªï¼ˆå¦‚ <code>relaxed_carson</code>ã€<code>happy_turing</code>ï¼‰ã€‚</p>
</li>
<li><p><strong>ä½ å¯ä»¥ç”¨è¿™ä¸ªåå­—æ¥æ“ä½œå®¹å™¨ï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker stop relaxed_carson</span><br><span class="line">docker <span class="built_in">rm</span> relaxed_carson</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p><strong>âœ… æ¨èåšæ³•ï¼šè‡ªå·±èµ·ä¸ªå¥½è®°çš„åå­—</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name my-nginx nginx</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·åå­—å°±æ˜¯ <code>my-nginx</code>ï¼Œä¸€çœ‹å°±çŸ¥é“æ˜¯å¹²å˜›çš„ã€‚</p>
<p><strong>âœ… æ€»ç»“ï¼šè¡¨æ ¼å¯¹ç…§</strong></p>
<table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>å«ä¹‰</th>
<th>ä½ çš„ä¾‹å­</th>
</tr>
</thead>
<tbody><tr>
<td><code>CONTAINER ID</code></td>
<td>å®¹å™¨çš„å”¯ä¸€ç¼–å·</td>
<td><code>031194ac6682</code></td>
</tr>
<tr>
<td><code>IMAGE</code></td>
<td>åŸºäºå“ªä¸ªé•œåƒåˆ›å»º</td>
<td><code>nginx</code></td>
</tr>
<tr>
<td><code>COMMAND</code></td>
<td>å¯åŠ¨æ—¶è¿è¡Œçš„å‘½ä»¤</td>
<td><code>&quot;/docker-entrypoint.sh â€¦&quot;</code></td>
</tr>
<tr>
<td><code>CREATED</code></td>
<td>å®¹å™¨åˆ›å»ºæ—¶é—´</td>
<td><code>4 minutes ago</code></td>
</tr>
<tr>
<td><code>STATUS</code></td>
<td>å½“å‰çŠ¶æ€</td>
<td><code>Up 4 minutes</code> âœ…</td>
</tr>
<tr>
<td><code>PORTS</code></td>
<td>ç«¯å£æ˜ å°„</td>
<td><code>80/tcp</code>ï¼ˆâš ï¸ ç¼ºå°‘ä¸»æœºæ˜ å°„ï¼‰</td>
</tr>
<tr>
<td><code>NAMES</code></td>
<td>å®¹å™¨åå­—ï¼ˆéšæœºç”Ÿæˆï¼‰</td>
<td><code>relaxed_carson</code></td>
</tr>
</tbody></table>
<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœæ­¢ä¹‹å‰çš„å®¹å™¨ï¼ˆå®ƒæ²¡æ˜ å°„ç«¯å£ï¼‰</span></span><br><span class="line">docker stop 031194ac6682</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">031194ac6682</span><br></pre></td></tr></table></figure>

<p>ç„¶åé‡æ–°è¿è¡Œï¼ŒåŠ  <code>-p</code> å‚æ•°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8080:80 --name my-nginx nginx</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d1c05ed0591871d6a3bbc5b49705a1e470e6ba416adf3ab5df9cde59984151f6</span><br></pre></td></tr></table></figure>

<p>ğŸ“Œ å‚æ•°è¯¦è§£ï¼š</p>
<ul>
<li><code>-p 8080:80</code>ï¼šæŠŠ<strong>ä¸»æœºçš„ 8080 ç«¯å£</strong>æ˜ å°„åˆ°<strong>å®¹å™¨çš„ 80 ç«¯å£</strong></li>
<li><code>--name my-nginx</code>ï¼šç»™å®¹å™¨èµ·ä¸ªå¥½è®°çš„åå­—</li>
<li><code>nginx</code>ï¼šé•œåƒå</li>
</ul>
<p>âœ… ç°åœ¨ä½ å¯ä»¥é€šè¿‡ <code>http://localhost:8080</code> è®¿é—® Nginxï¼</p>
<hr>
<h4 id="ğŸŒ-ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯æœåŠ¡æ˜¯å¦è¿è¡Œ"><a href="#ğŸŒ-ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯æœåŠ¡æ˜¯å¦è¿è¡Œ" class="headerlink" title="ğŸŒ ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯æœåŠ¡æ˜¯å¦è¿è¡Œ"></a>ğŸŒ ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯æœåŠ¡æ˜¯å¦è¿è¡Œ</h4><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š</p>
<p>ğŸ‘‰ <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a></p>
<p>ä½ åº”è¯¥çœ‹åˆ°ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Welcome <span class="keyword">to</span> nginx!</span><br><span class="line"></span><br><span class="line"><span class="keyword">If</span> you see this page, the nginx web <span class="keyword">server</span> <span class="keyword">is</span> successfully installed <span class="keyword">and</span> working. Further <span class="keyword">configuration</span> <span class="keyword">is</span> required.</span><br><span class="line"></span><br><span class="line"><span class="keyword">For</span> online documentation <span class="keyword">and</span> support please refer <span class="keyword">to</span> nginx.org.</span><br><span class="line">Commercial support <span class="keyword">is</span> available at nginx.com.</span><br><span class="line"></span><br><span class="line">Thank you <span class="keyword">for</span> <span class="keyword">using</span> nginx.</span><br></pre></td></tr></table></figure>

<p>ğŸ‰ æˆåŠŸäº†ï¼ä½ å·²ç»ç”¨ Docker éƒ¨ç½²äº†ä¸€ä¸ªçœŸæ­£çš„ Web æœåŠ¡ï¼</p>
<hr>
<h4 id="ğŸ”-ç¬¬å…«æ­¥ï¼šæŸ¥çœ‹å®¹å™¨çŠ¶æ€"><a href="#ğŸ”-ç¬¬å…«æ­¥ï¼šæŸ¥çœ‹å®¹å™¨çŠ¶æ€" class="headerlink" title="ğŸ” ç¬¬å…«æ­¥ï¼šæŸ¥çœ‹å®¹å™¨çŠ¶æ€"></a>ğŸ” ç¬¬å…«æ­¥ï¼šæŸ¥çœ‹å®¹å™¨çŠ¶æ€</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure>

<p>ä½ ä¼šçœ‹åˆ°ï¼š</p>
<blockquote>
<p>å…·ä½“æ˜¾ç¤ºè¯·çœ‹ç¬¬å…­æ­¥ï¼Œè¿™é‡Œåªå±•ç¤ºå°‘éƒ¨åˆ†ã€‚</p>
</blockquote>
<figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CONTAINER ID  IMAGE              	PORTS            								NAMES</span><br><span class="line"><span class="function"><span class="title">d1c05ed05918</span>  nginx       0.0.0.0:8080-&gt;</span><span class="number">80</span>/<span class="function"><span class="title">tcp</span>, [::]:8080-&gt;</span><span class="number">80</span>/tcp                 	my-nginx</span><br></pre></td></tr></table></figure>

<p>âœ… è¡¨ç¤º <code>my-nginx</code> æ­£åœ¨è¿è¡Œï¼Œç«¯å£å·²æ˜ å°„ã€‚</p>
<p>  **<code>0.0.0.0:8080-&gt;80/tcp</code> **</p>
<table>
<thead>
<tr>
<th><code>0.0.0.0</code></th>
<th>è¡¨ç¤ºâ€œæ‰€æœ‰ IPv4 åœ°å€â€</th>
</tr>
</thead>
<tbody><tr>
<td><code>8080</code></td>
<td>ä¸»æœºï¼ˆä½ ç”µè„‘ï¼‰çš„ç«¯å£å·</td>
</tr>
<tr>
<td><code>-&gt;</code></td>
<td>â€œæ˜ å°„åˆ°â€</td>
</tr>
<tr>
<td><code>80</code></td>
<td>å®¹å™¨å†…éƒ¨çš„ç«¯å£å·</td>
</tr>
<tr>
<td><code>tcp</code></td>
<td>ä½¿ç”¨ TCP ç½‘ç»œåè®®</td>
</tr>
</tbody></table>
<p>âœ… æ•ˆæœï¼š </p>
<ul>
<li>ä½ åœ¨æµè§ˆå™¨è®¿é—® <code>http://localhost:8080</code> æˆ– <code>http://127.0.0.1:8080</code></li>
<li>è¯·æ±‚ä¼šè¢« Docker è½¬å‘ç»™å®¹å™¨çš„ 80 ç«¯å£</li>
<li>å®¹å™¨é‡Œçš„ Nginx å°±èƒ½å¤„ç†è¿™ä¸ªè¯·æ±‚</li>
</ul>
<p>**<code>[::]:8080-&gt;80/tcp</code> **</p>
<table>
<thead>
<tr>
<th><code>[::]</code></th>
<th>è¡¨ç¤ºâ€œæ‰€æœ‰ IPv6 åœ°å€â€ï¼ˆIPv6 çš„ <code>0.0.0.0</code>ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td><code>8080</code></td>
<td>ä¸»æœºç«¯å£</td>
</tr>
<tr>
<td><code>-&gt;80/tcp</code></td>
<td>åŒä¸Šï¼Œè½¬å‘ç»™å®¹å™¨çš„ 80 ç«¯å£</td>
</tr>
</tbody></table>
<p>âœ… è¿™æ˜¯ä¸ºäº†æ”¯æŒ IPv6 ç½‘ç»œï¼ŒåŠŸèƒ½å’Œå‰é¢ä¸€æ ·ã€‚ </p>
<hr>
<h4 id="ğŸ“‹-ç¬¬ä¹æ­¥ï¼šæŸ¥çœ‹å®¹å™¨æ—¥å¿—"><a href="#ğŸ“‹-ç¬¬ä¹æ­¥ï¼šæŸ¥çœ‹å®¹å™¨æ—¥å¿—" class="headerlink" title="ğŸ“‹ ç¬¬ä¹æ­¥ï¼šæŸ¥çœ‹å®¹å™¨æ—¥å¿—"></a>ğŸ“‹ ç¬¬ä¹æ­¥ï¼šæŸ¥çœ‹å®¹å™¨æ—¥å¿—</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs my-nginx</span><br></pre></td></tr></table></figure>

<p>ä½ ä¼šçœ‹åˆ° Nginx çš„å¯åŠ¨æ—¥å¿—ï¼Œåœ¨ç¬¬å››æ­¥å±•ç¤ºçš„åŸºç¡€ä¸Šå¢åŠ äº†(å› ä¸ºæˆ‘ä»¬åœ¨ç¬¬ä¸ƒæ­¥éªŒè¯æœåŠ¡æ˜¯å¦è¿è¡Œæ—¶è®¿é—®äº†è¯¥æœåŠ¡ï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">172.17.0.1 - - [24/Jul/2025:02:46:27 +0000] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 200 615 <span class="string">&quot;-&quot;</span> <span class="string">&quot;Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&quot;</span> <span class="string">&quot;-&quot;</span></span><br><span class="line">2025/07/24 02:46:27 [error] 29#29: *1 open() <span class="string">&quot;/usr/share/nginx/html/favicon.ico&quot;</span> failed (2: No such file or directory), client: 172.17.0.1, server: localhost, request: <span class="string">&quot;GET /favicon.ico HTTP/1.1&quot;</span>, host: <span class="string">&quot;localhost:8080&quot;</span>, referrer: <span class="string">&quot;http://localhost:8080/&quot;</span></span><br><span class="line">172.17.0.1 - - [24/Jul/2025:02:46:27 +0000] <span class="string">&quot;GET /favicon.ico HTTP/1.1&quot;</span> 404 153 <span class="string">&quot;http://localhost:8080/&quot;</span> <span class="string">&quot;Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&quot;</span> <span class="string">&quot;-&quot;</span></span><br></pre></td></tr></table></figure>

<p>æƒ³å®æ—¶æŸ¥çœ‹ï¼ŸåŠ  <code>-f</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f my-nginx</span><br></pre></td></tr></table></figure>

<p>æŒ‰ <code>Ctrl+C</code> åœæ­¢æŸ¥çœ‹ã€‚</p>
<hr>
<h4 id="ğŸ›‘-ç¬¬åæ­¥ï¼šåœæ­¢å’Œå¯åŠ¨å®¹å™¨"><a href="#ğŸ›‘-ç¬¬åæ­¥ï¼šåœæ­¢å’Œå¯åŠ¨å®¹å™¨" class="headerlink" title="ğŸ›‘ ç¬¬åæ­¥ï¼šåœæ­¢å’Œå¯åŠ¨å®¹å™¨"></a>ğŸ›‘ ç¬¬åæ­¥ï¼šåœæ­¢å’Œå¯åŠ¨å®¹å™¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœæ­¢(è¾“å‡ºmy-nginx)</span></span><br><span class="line">docker stop my-nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†æ¬¡å¯åŠ¨(è¾“å‡ºmy-nginx)</span></span><br><span class="line">docker start my-nginx</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‰ åœæ­¢åæµè§ˆå™¨æ‰“ä¸å¼€é¡µé¢ï¼Œå¯åŠ¨ååˆèƒ½è®¿é—®ã€‚</p>
<hr>
<h4 id="ğŸ§¹-ç¬¬åä¸€æ­¥ï¼šåˆ é™¤å®¹å™¨ï¼ˆæ¸…ç†ï¼‰"><a href="#ğŸ§¹-ç¬¬åä¸€æ­¥ï¼šåˆ é™¤å®¹å™¨ï¼ˆæ¸…ç†ï¼‰" class="headerlink" title="ğŸ§¹ ç¬¬åä¸€æ­¥ï¼šåˆ é™¤å®¹å™¨ï¼ˆæ¸…ç†ï¼‰"></a>ğŸ§¹ ç¬¬åä¸€æ­¥ï¼šåˆ é™¤å®¹å™¨ï¼ˆæ¸…ç†ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆåœæ­¢(è¾“å‡ºmy-nginx)</span></span><br><span class="line">docker stop my-nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†åˆ é™¤</span></span><br><span class="line">docker <span class="built_in">rm</span> my-nginx</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>docker stop my-nginx</code>åï¼Œ<code>docker ps</code>ï¼ˆæŸ¥çœ‹è¿è¡Œä¸­çš„é•œåƒï¼‰ä¸­å°±ä¸æ˜¾ç¤º<code>my_ngix</code>è¿™ä¸ªé•œåƒäº†ï¼Œä½†<code>docker ps -a</code>ï¼ˆæŸ¥çœ‹æ‰€æœ‰é•œåƒï¼‰ä¸­æœ‰æ˜¾ç¤ºï¼Œ<code>docker rm my-nginx</code>åï¼Œ<code>docker ps -a</code>ä¹Ÿä¸æ˜¾ç¤º<code>my_ngix</code>è¿™ä¸ªé•œåƒäº†ï¼Œè¯´æ˜è¿™ä¸ªé•œåƒè¢«åˆ é™¤äº†ã€‚</p>
<p>ç›´æ¥åˆ è¿è¡Œä¸­çš„å®¹å™¨ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) chr@chr:~/æ¡Œé¢/dify/docker$ <span class="built_in">sudo</span> docker <span class="built_in">rm</span> my-nginx</span><br><span class="line">Error response from daemon: cannot remove container <span class="string">&quot;/my-nginx&quot;</span>: container is running: stop the container before removing or force remove</span><br></pre></td></tr></table></figure></blockquote>
<hr>
<h4 id="ğŸ—‘ï¸-ç¬¬åäºŒæ­¥ï¼šåˆ é™¤é•œåƒï¼ˆå¯é€‰ï¼‰"><a href="#ğŸ—‘ï¸-ç¬¬åäºŒæ­¥ï¼šåˆ é™¤é•œåƒï¼ˆå¯é€‰ï¼‰" class="headerlink" title="ğŸ—‘ï¸ ç¬¬åäºŒæ­¥ï¼šåˆ é™¤é•œåƒï¼ˆå¯é€‰ï¼‰"></a>ğŸ—‘ï¸ ç¬¬åäºŒæ­¥ï¼šåˆ é™¤é•œåƒï¼ˆå¯é€‰ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi nginx</span><br></pre></td></tr></table></figure>

<blockquote>
<p>(base) chr@chr:~&#x2F;æ¡Œé¢&#x2F;dify&#x2F;docker$ sudo docker rmi nginx<br>Error response from daemon: conflict: unable to remove repository reference â€œnginxâ€ (must force) - container 7bb6d320d860 is using its referenced image 2cd1d97f893f</p>
</blockquote>
<p>ä¼šæç¤ºâ€œæœ‰å®¹å™¨ä¾èµ–â€ï¼Œå…ˆåˆ å®¹å™¨å†åˆ é•œåƒã€‚å…ˆæ‰§è¡Œç¬¬åä¸€æ­¥çš„æ­¥éª¤å†åˆ é™¤é•œåƒã€‚æœ€ç»ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(base) chr@chr:~/æ¡Œé¢/dify/docker$ <span class="built_in">sudo</span> docker rmi nginx</span><br><span class="line">Untagged: nginx:latest</span><br><span class="line">Untagged: nginx@sha256:84ec966e61a8c7846f509da7eb081c55c1d56817448728924a87ab32f12a72fb</span><br><span class="line">Deleted: sha256:2cd1d97f893f70cee86a38b7160c30e5750f3ed6ad86c598884ca9c6a563a501</span><br><span class="line">Deleted: sha256:3c1159cd77f83ede793fc21502ae30b39b04378b6b1b625451d701d555cc1cb9</span><br><span class="line">Deleted: sha256:221aaee6035b28a744a32189b7ff7853e07f6574185366a2272fb5e525e4e99e</span><br><span class="line">Deleted: sha256:701d5f8b1f92711c04588f86fe9b55b671bce6ba151a905644d5c79130a86db9</span><br><span class="line">Deleted: sha256:ab872be34a56e3b35c2caf7d2cbe335802742bd186e3fcbdd7d5228c36f6ef27</span><br><span class="line">Deleted: sha256:5064a019a0ed54289625d07404c88528252b0515dd3426dd8c400940e939c5a9</span><br><span class="line">Deleted: sha256:afe100bec4630446753dc1c0de8318b853d4bea6c897fa4c2aa19fab4d0bbdf4</span><br><span class="line">Deleted: sha256:7cc7fe68eff66f19872441a51938eecc4ad33746d2baa3abc081c1e6fe25988e</span><br></pre></td></tr></table></figure>

<p>å†è¿è¡Œ<code>docker images</code>ä¼šå‘ç°é‡Œé¢æ²¡æœ‰<code>nginx</code>é•œåƒäº†ã€‚</p>
<hr>
<h4 id="âœ…-æ€»ç»“ï¼šå®Œæ•´åŸºç¡€æ“ä½œæµç¨‹"><a href="#âœ…-æ€»ç»“ï¼šå®Œæ•´åŸºç¡€æ“ä½œæµç¨‹" class="headerlink" title="âœ… æ€»ç»“ï¼šå®Œæ•´åŸºç¡€æ“ä½œæµç¨‹"></a>âœ… æ€»ç»“ï¼šå®Œæ•´åŸºç¡€æ“ä½œæµç¨‹</h4><table>
<thead>
<tr>
<th>æ­¥éª¤</th>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>1. æ‹‰å–é•œåƒ</td>
<td><code>docker pull nginx</code></td>
<td>ä» Docker Hub ä¸‹è½½</td>
</tr>
<tr>
<td>2. æŸ¥çœ‹é•œåƒ</td>
<td><code>docker images</code></td>
<td>ç¡®è®¤é•œåƒå·²ä¸‹è½½</td>
</tr>
<tr>
<td>3. è¿è¡Œå®¹å™¨</td>
<td><code>docker run -d -p 8080:80 --name my-nginx nginx</code></td>
<td>åå°è¿è¡Œ + ç«¯å£æ˜ å°„ + èµ·å</td>
</tr>
<tr>
<td>4. æŸ¥çœ‹çŠ¶æ€</td>
<td><code>docker ps</code></td>
<td>çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</td>
</tr>
<tr>
<td>5. æŸ¥çœ‹æ—¥å¿—</td>
<td><code>docker logs my-nginx</code></td>
<td>çœ‹è¾“å‡ºä¿¡æ¯</td>
</tr>
<tr>
<td>6. åœæ­¢å®¹å™¨</td>
<td><code>docker stop my-nginx</code></td>
<td>å®‰å…¨åœæ­¢</td>
</tr>
<tr>
<td>7. å¯åŠ¨å®¹å™¨</td>
<td><code>docker start my-nginx</code></td>
<td>é‡æ–°å¯åŠ¨</td>
</tr>
<tr>
<td>8. åˆ é™¤å®¹å™¨</td>
<td><code>docker rm my-nginx</code></td>
<td>å½»åº•åˆ é™¤</td>
</tr>
<tr>
<td>9. åˆ é™¤é•œåƒ</td>
<td><code>docker rmi nginx</code></td>
<td>é‡Šæ”¾ç©ºé—´</td>
</tr>
</tbody></table>
<hr>
<h3 id="âœ…-è‡ªå·±æ„å»ºé•œåƒ"><a href="#âœ…-è‡ªå·±æ„å»ºé•œåƒ" class="headerlink" title="âœ… è‡ªå·±æ„å»ºé•œåƒ"></a>âœ… è‡ªå·±æ„å»ºé•œåƒ</h3><p>æœ¬éƒ¨åˆ†åˆ†ä¸ºä¸‰å°éƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>ç¬¬ä¸€æ­¥ï¼šçº¯ FastAPI è„šæœ¬ + Dockerfileï¼ˆä¸ä¾èµ–ä»»ä½•å¤–éƒ¨æœåŠ¡ï¼‰</strong> </li>
<li><strong>ç¬¬äºŒæ­¥ï¼šä½¿ç”¨ <code>-v</code> æŒ‚è½½å®ç°ä»£ç çƒ­æ›´æ–°</strong> </li>
<li><strong>ç¬¬ä¸‰æ­¥ï¼šç”¨ <code>docker-compose</code> å¼•å…¥ Redisï¼ˆæˆ–å…¶ä»–æœåŠ¡ï¼‰</strong></li>
</ol>
<p>ä½ è¯´å¾—<strong>å®Œå…¨æ­£ç¡®ï¼</strong> ğŸ™Œ</p>
<p>æˆ‘åˆšæ‰ä¸ºäº†å±•ç¤ºâ€œå¤šæœåŠ¡è”åŠ¨â€çš„æ•ˆæœï¼Œ<strong>æ“ä¹‹è¿‡æ€¥åœ°å¼•å…¥äº† Redis</strong>ï¼Œä½†è¿™å¯¹â€œç¬¬ä¸€ä¸ªä¾‹å­â€æ¥è¯´ç¡®å®<strong>è¶…çº²äº†</strong>ï¼Œä¸åˆ©äºå°ç™½å¾ªåºæ¸è¿›åœ°ç†è§£ã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨å°±æ¥<strong>é‡æ–°è°ƒæ•´æ•™å­¦é¡ºåº</strong>ï¼Œæ›´åŠ ç¬¦åˆâ€œç”±æµ…å…¥æ·±â€çš„å­¦ä¹ é€»è¾‘ï¼š</p>
<h4 id="âœ…-æ­£ç¡®çš„å­¦ä¹ è·¯å¾„ï¼šä¸‰æ­¥èµ°ï¼ˆä¿®æ­£ç‰ˆï¼‰"><a href="#âœ…-æ­£ç¡®çš„å­¦ä¹ è·¯å¾„ï¼šä¸‰æ­¥èµ°ï¼ˆä¿®æ­£ç‰ˆï¼‰" class="headerlink" title="âœ… æ­£ç¡®çš„å­¦ä¹ è·¯å¾„ï¼šä¸‰æ­¥èµ°ï¼ˆä¿®æ­£ç‰ˆï¼‰"></a>âœ… æ­£ç¡®çš„å­¦ä¹ è·¯å¾„ï¼šä¸‰æ­¥èµ°ï¼ˆä¿®æ­£ç‰ˆï¼‰</h4><ol>
<li><strong>ç¬¬ä¸€æ­¥ï¼šçº¯ FastAPI è„šæœ¬ + Dockerfileï¼ˆä¸ä¾èµ–ä»»ä½•å¤–éƒ¨æœåŠ¡ï¼‰</strong></li>
<li><strong>ç¬¬äºŒæ­¥ï¼šä½¿ç”¨ <code>-v</code> æŒ‚è½½å®ç°ä»£ç çƒ­æ›´æ–°</strong></li>
<li><strong>ç¬¬ä¸‰æ­¥ï¼šç”¨ <code>docker-compose</code> å¼•å…¥ Redisï¼ˆæˆ–å…¶ä»–æœåŠ¡ï¼‰</strong></li>
</ol>
<hr>
<h4 id="ğŸ¯-ç¬¬ä¸€æ­¥ï¼šæœ€ç®€å•çš„-FastAPI-é•œåƒ"><a href="#ğŸ¯-ç¬¬ä¸€æ­¥ï¼šæœ€ç®€å•çš„-FastAPI-é•œåƒ" class="headerlink" title="ğŸ¯ ç¬¬ä¸€æ­¥ï¼šæœ€ç®€å•çš„ FastAPI é•œåƒ"></a>ğŸ¯ ç¬¬ä¸€æ­¥ï¼šæœ€ç®€å•çš„ FastAPI é•œåƒ</h4><p><strong>ğŸ“ åˆ›å»ºé¡¹ç›®ç›®å½•</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> my-fastapi-app</span><br><span class="line"><span class="built_in">cd</span> my-fastapi-app</span><br></pre></td></tr></table></figure>

<p><strong><code>main.py</code>ï¼ˆæœ€ç®€å•çš„ FastAPI è„šæœ¬ï¼‰</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_root</span>():</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Hello from Docker!&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_item</span>(<span class="params">item_id: <span class="built_in">int</span>, q: <span class="built_in">str</span> = <span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;item_id&quot;</span>: item_id, <span class="string">&quot;q&quot;</span>: q&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>âœ… å®Œå…¨ç‹¬ç«‹ï¼Œä¸ä¾èµ–æ•°æ®åº“ã€ç¼“å­˜ã€ç½‘ç»œç­‰ä»»ä½•å¤–éƒ¨æœåŠ¡</p>
</blockquote>
<p><strong>requirements.txt</strong></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fastapi</span><br><span class="line">uvicorn[standard]</span><br></pre></td></tr></table></figure>

<p><strong>Dockerfile</strong></p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span>-slim</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip install --no-cache-dir -r requirements.txt</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8001</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;uvicorn&quot;</span>, <span class="string">&quot;main:app&quot;</span>, <span class="string">&quot;--host&quot;</span>, <span class="string">&quot;0.0.0.0&quot;</span>, <span class="string">&quot;--port&quot;</span>, <span class="string">&quot;8001&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è§£æï¼š</p>
<p><strong>ğŸ³ Dockerfile é€è¡Œè§£æ</strong></p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span>-slim</span><br></pre></td></tr></table></figure>
<p>âœ… å«ä¹‰ï¼š</p>
<ul>
<li>ä½¿ç”¨å®˜æ–¹çš„ Python é•œåƒä½œä¸º<strong>åŸºç¡€é•œåƒ</strong></li>
<li><code>python:3.9-slim</code> è¡¨ç¤ºï¼š<ul>
<li>Python ç‰ˆæœ¬ï¼š3.9</li>
<li><code>slim</code>ï¼šç²¾ç®€ç‰ˆï¼ˆåªåŒ…å«æœ€åŸºæœ¬ç³»ç»Ÿå·¥å…·ï¼Œä½“ç§¯å°ï¼Œé€‚åˆç”Ÿäº§ï¼‰</li>
</ul>
</li>
</ul>
<p>ğŸ’¡ ä¸ºä»€ä¹ˆç”¨ <code>slim</code>ï¼Ÿ</p>
<ul>
<li>æ›´å°çš„é•œåƒä½“ç§¯ï¼ˆé€šå¸¸ 100MB å·¦å³ vs æ™®é€šç‰ˆ 500MB+ï¼‰</li>
<li>æ›´å°‘çš„æ”»å‡»é¢ï¼ˆå®‰å…¨ï¼‰</li>
<li>æ›´å¿«çš„æ„å»ºå’Œä¼ è¾“é€Ÿåº¦</li>
</ul>
<blockquote>
<p>âœ… æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ<br>âŒ ä¸è¦ç”¨ <code>python:3.9</code>ï¼ˆå¤ªå¤§ï¼‰ï¼Œä¹Ÿä¸è¦ç”¨äºå¼€å‘çš„å¯ä»¥ç”¨ <code>python:3.9-bullseye</code>ï¼ˆå¸¦æ›´å¤šå·¥å…·ï¼‰</p>
</blockquote>
<hr>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br></pre></td></tr></table></figure>
<p>âœ… å«ä¹‰ï¼š</p>
<ul>
<li>è®¾ç½®â€œå·¥ä½œç›®å½•â€ä¸º <code>/app</code></li>
<li>åç»­æ‰€æœ‰å‘½ä»¤ï¼ˆå¦‚ <code>COPY</code>ã€<code>RUN</code>ã€<code>CMD</code>ï¼‰éƒ½ä¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹æ‰§è¡Œ</li>
</ul>
<p>ğŸ’¡ ç±»æ¯”ï¼š</p>
<p>å°±åƒä½ åœ¨ Linux ä¸­æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /app</span><br></pre></td></tr></table></figure>

<p>ğŸ“Œ æœ€ä½³å®è·µï¼š</p>
<ul>
<li>æ€»æ˜¯ä½¿ç”¨ <code>WORKDIR</code> æ˜ç¡®æŒ‡å®šè·¯å¾„</li>
<li>è·¯å¾„å°½é‡ç®€æ´ï¼Œå¦‚ <code>/app</code>ã€<code>/code</code>ã€<code>/app/project</code></li>
</ul>
<hr>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt .</span></span><br></pre></td></tr></table></figure>
<p>âœ… å«ä¹‰ï¼š</p>
<ul>
<li>æŠŠæœ¬åœ°çš„ <code>requirements.txt</code> æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨çš„å½“å‰ç›®å½•ï¼ˆå³ <code>/app</code>ï¼‰</li>
<li><code>.</code> è¡¨ç¤ºâ€œå½“å‰å·¥ä½œç›®å½•â€</li>
</ul>
<p>ğŸ’¡ ä¸ºä»€ä¹ˆå…ˆæ‹·è´ <code>requirements.txt</code>ï¼Ÿ</p>
<p>è¿™æ˜¯ä¸ºäº†<strong>åˆ©ç”¨ Docker çš„ç¼“å­˜æœºåˆ¶</strong>ï¼Œæå‡æ„å»ºé€Ÿåº¦ï¼</p>
<blockquote>
<p>Docker æ¯ä¸€æ­¥éƒ½ä¼šç¼“å­˜ã€‚å¦‚æœ <code>requirements.txt</code> æ²¡å˜ï¼Œ<code>pip install</code> è¿™æ­¥å°±ä¸ä¼šé‡æ–°æ‰§è¡Œï¼Œå³ä½¿ä½ æ”¹äº† <code>.py</code> æ–‡ä»¶ã€‚</p>
</blockquote>
<hr>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip install --no-cache-dir -r requirements.txt</span></span><br></pre></td></tr></table></figure>
<p>âœ… å«ä¹‰ï¼š</p>
<ul>
<li>åœ¨å®¹å™¨ä¸­è¿è¡Œå‘½ä»¤ï¼šå®‰è£… <code>requirements.txt</code> ä¸­åˆ—å‡ºçš„æ‰€æœ‰ Python åŒ…</li>
<li><code>--no-cache-dir</code>ï¼šä¸ä¿å­˜ pip ç¼“å­˜ï¼Œå‡å°é•œåƒä½“ç§¯</li>
<li><code>-r requirements.txt</code>ï¼šè¯»å–ä¾èµ–æ–‡ä»¶</li>
</ul>
<p>ğŸ’¡ ä¸ºä»€ä¹ˆåŠ  <code>--no-cache-dir</code>ï¼Ÿ</p>
<ul>
<li>pip é»˜è®¤ä¼šç¼“å­˜åŒ…åˆ° <code>/root/.cache/pip</code>ï¼Œå¢åŠ é•œåƒå¤§å°</li>
<li>å®¹å™¨æ˜¯â€œä¸€æ¬¡æ€§çš„â€ï¼Œä¸éœ€è¦ç¼“å­˜</li>
</ul>
<blockquote>
<p>âœ… å‡å°é•œåƒä½“ç§¯<br>âŒ å¦‚æœä¸åŠ ï¼Œå¯èƒ½å¤šå‡º 50~100MB</p>
</blockquote>
<hr>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br></pre></td></tr></table></figure>
<p>âœ… å«ä¹‰ï¼š</p>
<ul>
<li>æŠŠå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆ<code>main.py</code>ã€<code>Dockerfile</code> åŒçº§æ–‡ä»¶ï¼‰æ‹·è´åˆ°å®¹å™¨çš„ <code>/app</code> ç›®å½•ä¸‹</li>
</ul>
<h3 id="ğŸ’¡-æ³¨æ„ï¼š"><a href="#ğŸ’¡-æ³¨æ„ï¼š" class="headerlink" title="ğŸ’¡ æ³¨æ„ï¼š"></a>ğŸ’¡ æ³¨æ„ï¼š</h3><ul>
<li>è¿™ä¸€æ­¥åº”è¯¥åœ¨ <code>pip install</code> ä¹‹åï¼Œå¦åˆ™æ¯æ¬¡æ”¹ä»£ç éƒ½ä¼šå¯¼è‡´é‡æ–°å®‰è£…ä¾èµ–</li>
<li>å¦‚æœä½ æ”¹äº† <code>main.py</code>ï¼Œåªæœ‰è¿™ä¸€æ­¥åŠä¹‹åçš„å±‚ä¼šé‡æ–°æ„å»º</li>
</ul>
<hr>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8001</span></span><br></pre></td></tr></table></figure>
<p>âœ… å«ä¹‰ï¼š</p>
<ul>
<li><strong>å£°æ˜</strong>è¿™ä¸ªå®¹å™¨ä¼šåœ¨è¿è¡Œæ—¶ç›‘å¬ 8001 ç«¯å£</li>
<li>âš ï¸ å®ƒä¸ä¼šè‡ªåŠ¨æ˜ å°„ç«¯å£ï¼åªæ˜¯â€œè¯´æ˜æ–‡æ¡£â€æ€§è´¨</li>
</ul>
<p>ğŸ’¡ ç±»æ¯”ï¼š</p>
<p>å°±åƒä½ åœ¨ README é‡Œå†™ï¼šâ€œæœ¬æœåŠ¡è¿è¡Œåœ¨ 8001 ç«¯å£â€</p>
<p>ğŸ“Œ å®é™…æ˜ å°„é è¿è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 8000:8001 my-fastapi:1.0</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-p 8000:8001</code> æ‰æ˜¯çœŸæ­£æŠŠå®¹å™¨çš„ 8001 æ˜ å°„åˆ°ä¸»æœºçš„ 8000</li>
</ul>
<hr>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;uvicorn&quot;</span>, <span class="string">&quot;main:app&quot;</span>, <span class="string">&quot;--host&quot;</span>, <span class="string">&quot;0.0.0.0&quot;</span>, <span class="string">&quot;--port&quot;</span>, <span class="string">&quot;8001&quot;</span>]</span></span><br></pre></td></tr></table></figure>
<p><strong>âœ… å«ä¹‰ï¼š</strong></p>
<ul>
<li>å®¹å™¨<strong>å¯åŠ¨æ—¶é»˜è®¤è¿è¡Œçš„å‘½ä»¤</strong></li>
<li>ä½¿ç”¨ <code>uvicorn</code> æœåŠ¡å™¨è¿è¡Œ <code>main.py</code> ä¸­çš„ <code>app</code> å®ä¾‹</li>
<li><code>--host 0.0.0.0</code>ï¼šå…è®¸å¤–éƒ¨è®¿é—®ï¼ˆé‡è¦ï¼ä¸èƒ½ç”¨ <code>127.0.0.1</code>ï¼‰</li>
<li><code>--port 8000</code>ï¼šç›‘å¬ 8000 ç«¯å£</li>
</ul>
<p><strong>ğŸ’¡ <code>CMD</code> çš„ä¸‰ç§å†™æ³•å¯¹æ¯”ï¼š</strong></p>
<table>
<thead>
<tr>
<th>å†™æ³•</th>
<th>ç¤ºä¾‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>exec å½¢å¼ï¼ˆæ¨èï¼‰</strong></td>
<td><code>CMD [&quot;uvicorn&quot;, &quot;main:app&quot;, ...]</code></td>
<td>å®‰å…¨ã€å¯ä¼ å‚ã€æ¨èç”¨äºç”Ÿäº§</td>
</tr>
<tr>
<td><strong>shell å½¢å¼</strong></td>
<td><code>CMD uvicorn main:app --host 0.0.0.0</code></td>
<td>ç®€å•ï¼Œä½†æ— æ³•ä¼ å¤æ‚å‚æ•°</td>
</tr>
<tr>
<td><strong>è¦†ç›–æ–¹å¼</strong></td>
<td><code>docker run myapp python other.py</code></td>
<td>å¯è¦†ç›– <code>CMD</code></td>
</tr>
</tbody></table>
<blockquote>
<p>âœ… æ¨èä½¿ç”¨ <code>exec</code> å½¢å¼ï¼ˆæ•°ç»„å†™æ³•ï¼‰</p>
</blockquote>
<p><strong>ğŸ§  æ€»ç»“ï¼šæ¯ä¸€è¡Œçš„ä½œç”¨</strong></p>
<table>
<thead>
<tr>
<th>æŒ‡ä»¤</th>
<th>ä½œç”¨</th>
<th>æœ€ä½³å®è·µ</th>
</tr>
</thead>
<tbody><tr>
<td><code>FROM</code></td>
<td>é€‰æ‹©åŸºç¡€é•œåƒ</td>
<td>ç”¨ <code>slim</code> æˆ– <code>alpine</code> å‡å°ä½“ç§¯</td>
</tr>
<tr>
<td><code>WORKDIR</code></td>
<td>è®¾ç½®å·¥ä½œç›®å½•</td>
<td>é¿å…è·¯å¾„æ··ä¹±</td>
</tr>
<tr>
<td><code>COPY requirements.txt .</code></td>
<td>å…ˆæ‹·è´ä¾èµ–æ–‡ä»¶</td>
<td>åˆ©ç”¨ç¼“å­˜åŠ é€Ÿæ„å»º</td>
</tr>
<tr>
<td><code>RUN pip install</code></td>
<td>å®‰è£…ä¾èµ–</td>
<td>åŠ  <code>--no-cache-dir</code></td>
</tr>
<tr>
<td><code>COPY . .</code></td>
<td>æ‹·è´åº”ç”¨ä»£ç </td>
<td>æ”¾åœ¨ä¾èµ–å®‰è£…ä¹‹å</td>
</tr>
<tr>
<td><code>EXPOSE</code></td>
<td>å£°æ˜ç«¯å£</td>
<td>æ–‡æ¡£ä½œç”¨ï¼Œéå¼ºåˆ¶</td>
</tr>
<tr>
<td><code>CMD</code></td>
<td>å®¹å™¨å¯åŠ¨å‘½ä»¤</td>
<td>ç”¨æ•°ç»„å½¢å¼ï¼ŒæŒ‡å®šæœåŠ¡å™¨å’Œå‚æ•°</td>
</tr>
</tbody></table>
<p><strong>ğŸ›  æ„å»ºè¿‡ç¨‹çš„â€œåˆ†å±‚â€åŸç†ï¼ˆå…³é”®ï¼ï¼‰</strong></p>
<p>Docker é•œåƒæ˜¯<strong>åˆ†å±‚çš„</strong>ï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªâ€œå±‚â€ï¼š</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Layer</span> <span class="number">1</span>: FROM python:<span class="number">3</span>.<span class="number">9</span>-slim</span><br><span class="line"><span class="attribute">Layer</span> <span class="number">2</span>: WORKDIR /app</span><br><span class="line"><span class="attribute">Layer</span> <span class="number">3</span>: COPY requirements.txt .</span><br><span class="line"><span class="attribute">Layer</span> <span class="number">4</span>: RUN pip install ...</span><br><span class="line"><span class="attribute">Layer</span> <span class="number">5</span>: COPY . .</span><br><span class="line"><span class="attribute">Layer</span> <span class="number">6</span>: EXPOSE <span class="number">8001</span></span><br><span class="line"><span class="attribute">Layer</span> <span class="number">7</span>: CMD<span class="meta"> [...]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¦‚æœ <code>requirements.txt</code> æ²¡å˜ï¼ŒLayer 4 ä¼š<strong>ç›´æ¥ä½¿ç”¨ç¼“å­˜</strong></li>
<li>åªæœ‰ <code>COPY . .</code> è¿™ä¸€æ­¥ä¼šå› ä»£ç ä¿®æ”¹è€Œé‡æ–°æ„å»º</li>
<li>è¿™æ ·<strong>å¤§å¹…åŠ å¿«å¼€å‘æ„å»ºé€Ÿåº¦</strong></li>
</ul>
<p><strong>âœ… ä¸¾ä¸ªå®é™…ä¾‹å­</strong></p>
<p>å‡è®¾ä½ æ”¹äº† <code>main.py</code>ï¼Œé‡æ–°æ„å»ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t my-fastapi:1.0 .</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºå¯èƒ½åƒè¿™æ ·ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Step <span class="number">1</span>/<span class="number">7</span> : <span class="type">FROM</span> python:<span class="number">3.9</span>-slim</span><br><span class="line"> <span class="comment">---&gt; å·²ä½¿ç”¨ç¼“å­˜</span></span><br><span class="line">Step <span class="number">2</span>/<span class="number">7</span> : <span class="type">WORKDIR</span> /app</span><br><span class="line"> <span class="comment">---&gt; å·²ä½¿ç”¨ç¼“å­˜</span></span><br><span class="line">Step <span class="number">3</span>/<span class="number">7</span> : <span class="type">COPY</span> requirements.txt .</span><br><span class="line"> <span class="comment">---&gt; å·²ä½¿ç”¨ç¼“å­˜</span></span><br><span class="line">Step <span class="number">4</span>/<span class="number">7</span> : <span class="type">RUN</span> pip install ...</span><br><span class="line"> <span class="comment">---&gt; å·²ä½¿ç”¨ç¼“å­˜</span></span><br><span class="line">Step <span class="number">5</span>/<span class="number">7</span> : <span class="type">COPY</span> . .</span><br><span class="line"> <span class="comment">---&gt; ä½¿ç”¨æ–°æ–‡ä»¶ï¼ˆé‡æ–°æ‰“åŒ…ï¼‰</span></span><br><span class="line">Step <span class="number">6</span>/<span class="number">7</span> : <span class="type">EXPOSE</span> <span class="number">8001</span></span><br><span class="line"> <span class="comment">---&gt; å·²ä½¿ç”¨ç¼“å­˜</span></span><br><span class="line">Step <span class="number">7</span>/<span class="number">7</span> : <span class="type">CMD</span> [...]</span><br><span class="line"> <span class="comment">---&gt; å·²ä½¿ç”¨ç¼“å­˜</span></span><br></pre></td></tr></table></figure>

<p>âœ… åªæœ‰ç¬¬ 5 æ­¥é‡æ–°æ‰§è¡Œï¼Œå…¶ä»–éƒ½ç”¨ç¼“å­˜ï¼Œ<strong>ç§’çº§æ„å»º</strong>ï¼</p>
<p><strong>ğŸ“Œ å°è´´å£«ï¼šå¯ä»¥åŠ  <code>.dockerignore</code></strong></p>
<p>åˆ›å»º <code>.dockerignore</code> æ–‡ä»¶ï¼Œé¿å…ä¸å¿…è¦çš„æ–‡ä»¶è¢«æ‰“åŒ…è¿›é•œåƒï¼š</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">__pycache__</span></span><br><span class="line">*.pyc</span><br><span class="line"><span class="title">.git</span></span><br><span class="line"><span class="title">.gitignore</span></span><br><span class="line">Dockerfile</span><br><span class="line">README.md</span><br><span class="line"><span class="title">.env</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ · <code>COPY . .</code> æ—¶å°±ä¸ä¼šæŠŠç¼“å­˜ã€ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶ç­‰æ‹·è´è¿›å»ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–æ„å»ºã€‚</p>
</blockquote>
<p><strong>ğŸ›  æ„å»ºé•œåƒ</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t my-fastapi:1.0 .</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æµç¨‹ï¼š</p>
<ul>
<li>Docker æŠŠ å½“å‰ç›®å½•ï¼ˆ.ï¼‰  æ‰“åŒ… â†’ å‘é€ç»™ Docker å®ˆæŠ¤è¿›ç¨‹</li>
<li>Docker è¯»å–ç›®å½•ä¸­çš„ Dockerfile</li>
<li>æŒ‰ç…§ Dockerfile çš„æŒ‡ä»¤ä¸€æ­¥æ­¥æ„å»ºé•œåƒ</li>
<li>æ„å»ºå®Œæˆåï¼Œç»™é•œåƒèµ·åä¸º my-fastapi:1.0</li>
</ul>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">(base) chr@chr:~/æ¡Œé¢/docker_learn/my-fastapi-app$ <span class="built_in">sudo</span> docker build -t my-fastapi:1.0 .</span><br><span class="line">[<span class="built_in">sudo</span>] chr çš„å¯†ç ï¼š </span><br><span class="line">[+] Building 25.6s (10/10) FINISHED                                                                                   docker:default</span><br><span class="line"> =&gt; [internal] load build definition from Dockerfile                                                                            0.0s</span><br><span class="line"> =&gt; =&gt; transferring dockerfile: 241B                                                                                            0.0s</span><br><span class="line"> =&gt; [internal] load metadata <span class="keyword">for</span> docker.io/library/python:3.9-slim                                                              4.7s</span><br><span class="line"> =&gt; [internal] load .dockerignore                                                                                               0.0s</span><br><span class="line"> =&gt; =&gt; transferring context: 2B                                                                                                 0.0s</span><br><span class="line"> =&gt; [1/5] FROM docker.io/library/python:3.9-slim@sha256:4b826e2ca2191c24a03bdbf0c342a73c6ee4ce929eac5ebc47fef78f66b839d6        7.4s</span><br><span class="line"> =&gt; =&gt; resolve docker.io/library/python:3.9-slim@sha256:4b826e2ca2191c24a03bdbf0c342a73c6ee4ce929eac5ebc47fef78f66b839d6        0.0s</span><br><span class="line"> =&gt; =&gt; sha256:563a905f7a66ef3bd4d02019b2673b65510a5588298d4434061587089143a0e2 5.29kB / 5.29kB                                  0.0s</span><br><span class="line"> =&gt; =&gt; sha256:59e22667830bf04fb35e15ed9c70023e9d121719bb87f0db7f3159ee7c7e0b8d 28.23MB / 28.23MB                                4.6s</span><br><span class="line"> =&gt; =&gt; sha256:91067d9e380715f9eefb1d983fd5bd87963b4e1f4ebff09f171db071138341f8 3.51MB / 3.51MB                                  2.7s</span><br><span class="line"> =&gt; =&gt; sha256:02ba7daa58b611ed94c8be35617179d4c23f2697ad7c68d96c0de753049fc5f5 14.94MB / 14.94MB                                7.1s</span><br><span class="line"> =&gt; =&gt; sha256:4b826e2ca2191c24a03bdbf0c342a73c6ee4ce929eac5ebc47fef78f66b839d6 10.41kB / 10.41kB                                0.0s</span><br><span class="line"> =&gt; =&gt; sha256:e8eb0fa155c06b960988a9ff99b882ef654542f7d022de051b79bab4c4534d71 1.75kB / 1.75kB                                  0.0s</span><br><span class="line"> =&gt; =&gt; sha256:58b24570cdddb5b19c3f0b31392902adec6f970f3522b1253d83e35cf68a3482 249B / 249B                                      3.5s</span><br><span class="line"> =&gt; =&gt; extracting sha256:59e22667830bf04fb35e15ed9c70023e9d121719bb87f0db7f3159ee7c7e0b8d                                       0.3s</span><br><span class="line"> =&gt; =&gt; extracting sha256:91067d9e380715f9eefb1d983fd5bd87963b4e1f4ebff09f171db071138341f8                                       0.0s</span><br><span class="line"> =&gt; =&gt; extracting sha256:02ba7daa58b611ed94c8be35617179d4c23f2697ad7c68d96c0de753049fc5f5                                       0.2s</span><br><span class="line"> =&gt; =&gt; extracting sha256:58b24570cdddb5b19c3f0b31392902adec6f970f3522b1253d83e35cf68a3482                                       0.0s</span><br><span class="line"> =&gt; [internal] load build context                                                                                               0.0s</span><br><span class="line"> =&gt; =&gt; transferring context: 586B                                                                                               0.0s</span><br><span class="line"> =&gt; [2/5] WORKDIR /app                                                                                                          0.0s</span><br><span class="line"> =&gt; [3/5] COPY requirements.txt .                                                                                               0.0s</span><br><span class="line"> =&gt; [4/5] RUN pip install --no-cache-dir -r requirements.txt                                                                   13.1s</span><br><span class="line"> =&gt; [5/5] COPY . .                                                                                                              0.1s</span><br><span class="line"> =&gt; exporting to image                                                                                                          0.1s</span><br><span class="line"> =&gt; =&gt; exporting layers                                                                                                         0.1s</span><br><span class="line"> =&gt; =&gt; writing image sha256:a88f12b3278b1ea5fafde0017154709fb399974355443b001c874ff76ef611dc                                    0.0s</span><br><span class="line"> =&gt; =&gt; naming to docker.io/library/my-fastapi:1.0</span><br></pre></td></tr></table></figure></blockquote>
<p>âœ… æ£€æŸ¥æ˜¯å¦æˆåŠŸï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images | grep my-fastapi</span><br></pre></td></tr></table></figure>

<blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my-fastapi      1.0     a88f12b3278b      3 minutes ago       165MB</span><br></pre></td></tr></table></figure></blockquote>
<p><strong>â–¶ è¿è¡Œå®¹å™¨</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8000:8001 --name my-fastapi-app my-fastapi:1.0</span><br></pre></td></tr></table></figure>

<p><strong>ğŸ” æµ‹è¯•</strong></p>
<p>æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š</p>
<ul>
<li><code>http://localhost:8000</code> â†’ åº”è¯¥çœ‹åˆ° JSON è¿”å›</li>
<li><code>http://localhost:8000/items/123?q=test</code> â†’ æµ‹è¯•è·¯å¾„å‚æ•°</li>
<li><code>http://localhost:8000/docs</code> â†’ è‡ªåŠ¨ API æ–‡æ¡£ï¼ˆSwagger UIï¼‰ğŸ‰</li>
</ul>
<p>âœ… æˆåŠŸï¼</p>
<hr>
<h4 id="âœ…-ç¬¬äºŒæ­¥ï¼šæŒ‚è½½æ–‡ä»¶ï¼ˆ-vï¼‰å®ç°çƒ­æ›´æ–°"><a href="#âœ…-ç¬¬äºŒæ­¥ï¼šæŒ‚è½½æ–‡ä»¶ï¼ˆ-vï¼‰å®ç°çƒ­æ›´æ–°" class="headerlink" title="âœ… ç¬¬äºŒæ­¥ï¼šæŒ‚è½½æ–‡ä»¶ï¼ˆ-vï¼‰å®ç°çƒ­æ›´æ–°"></a>âœ… ç¬¬äºŒæ­¥ï¼šæŒ‚è½½æ–‡ä»¶ï¼ˆ-vï¼‰å®ç°çƒ­æ›´æ–°</h4><p>ç°åœ¨æˆ‘ä»¬æƒ³ï¼š<strong>æ”¹ä»£ç ä¸ç”¨é‡æ–° build</strong>ã€‚</p>
<p>ğŸ” åœæ­¢å¹¶é‡æ–°è¿è¡Œï¼ˆå¯ç”¨çƒ­é‡è½½ + æŒ‚è½½ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœæ­¢æ—§å®¹å™¨</span></span><br><span class="line">docker stop my-fastapi-app</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é‡æ–°è¿è¡Œï¼ŒæŒ‚è½½ä»£ç  + å¯ç”¨çƒ­é‡è½½</span></span><br><span class="line">docker run -d -p 8000:8001 \</span><br><span class="line">  -v $(<span class="built_in">pwd</span>):/app \</span><br><span class="line">  --name my-fastapi-app \</span><br><span class="line">  my-fastapi:1.0 \</span><br><span class="line">  uvicorn main:app --host 0.0.0.0 --port 8001 --reload</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ğŸ’¡ <code>--reload</code>ï¼šUvicorn çš„çƒ­é‡è½½åŠŸèƒ½<br><code>-v $(pwd):/app</code>ï¼šæŠŠæœ¬åœ°ä»£ç æŒ‚è½½è¿›å®¹å™¨</p>
</blockquote>
<p><strong>âœ ä¿®æ”¹ <code>main.py</code>ï¼Œç«‹å³ç”Ÿæ•ˆï¼</strong></p>
<p>æ¯”å¦‚æ”¹æˆï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_root</span>():</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Hello from Docker! (Updated)&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿å­˜åï¼Œ<strong>åˆ·æ–°æµè§ˆå™¨</strong>ï¼Œç«‹åˆ»çœ‹åˆ°å˜åŒ–ï¼</p>
<blockquote>
<p>ğŸ‰ æ— éœ€ <code>docker build</code>ï¼Œå¼€å‘æ•ˆç‡å¤§å¹…æå‡ï¼</p>
</blockquote>
<hr>
<h4 id="ç¬¬äºŒç‚¹äº”æ­¥ï¼š-it-äº¤äº’å¼è¿›å…¥å®¹å™¨-v-æŒ‚è½½æ–‡ä»¶-å°æ¡ˆä¾‹-ç¤ºä¾‹"><a href="#ç¬¬äºŒç‚¹äº”æ­¥ï¼š-it-äº¤äº’å¼è¿›å…¥å®¹å™¨-v-æŒ‚è½½æ–‡ä»¶-å°æ¡ˆä¾‹-ç¤ºä¾‹" class="headerlink" title="ç¬¬äºŒç‚¹äº”æ­¥ï¼š-it (äº¤äº’å¼è¿›å…¥å®¹å™¨)+ -v(æŒ‚è½½æ–‡ä»¶)å°æ¡ˆä¾‹&#x2F;ç¤ºä¾‹"></a>ç¬¬äºŒç‚¹äº”æ­¥ï¼š-it (äº¤äº’å¼è¿›å…¥å®¹å™¨)+ -v(æŒ‚è½½æ–‡ä»¶)å°æ¡ˆä¾‹&#x2F;ç¤ºä¾‹</h4><p><strong>æ•™å­¦æ¡ˆä¾‹ï¼šç”¨ Docker è¿è¡Œä¸€ä¸ªâ€œå¤©æ°”æŸ¥è¯¢æœåŠ¡â€</strong></p>
<p><strong>ç›®æ ‡</strong></p>
<p>é€šè¿‡ä¸€ä¸ªç®€å•çš„ Python å¤©æ°”æœåŠ¡ï¼Œæ¼”ç¤ºï¼š</p>
<ol>
<li>å¦‚ä½•ç”¨ <code>-it</code> è¿›å…¥å®¹å™¨</li>
<li>å¦‚ä½•ç”¨ <code>-v</code> æŒ‚è½½é…ç½®å’Œæ—¥å¿—</li>
<li>ä¸ºä»€ä¹ˆâ€œå…ˆè¿›å®¹å™¨å†æ“ä½œâ€é€‚åˆæ•™å­¦</li>
</ol>
<p><strong>é¡¹ç›®ç»“æ„</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">weather-app/</span><br><span class="line">â”œâ”€â”€ Dockerfile               <span class="params">#</span> æ„å»ºé•œåƒç”¨</span><br><span class="line">â”œâ”€â”€ requirements.txt         <span class="params">#</span> ä¾èµ–åˆ—è¡¨</span><br><span class="line">â”œâ”€â”€ weather<span class="built_in">_</span>app.py           <span class="params">#</span> å¤©æ°”æŸ¥è¯¢è„šæœ¬</span><br><span class="line">â”œâ”€â”€ config/</span><br><span class="line">â”‚   â””â”€â”€ city.txt             <span class="params">#</span> é…ç½®æ–‡ä»¶ï¼ˆæŒ‚è½½ç”¨ï¼‰</span><br><span class="line">â””â”€â”€ logs/</span><br><span class="line">    â””â”€â”€ app.log              <span class="params">#</span> æ—¥å¿—æ–‡ä»¶ï¼ˆå®¹å™¨å†™å…¥ï¼ŒæŒ‚è½½åˆ°ä¸»æœºï¼‰</span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡<code>requests</code></strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">requests</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æˆ‘ä»¬ç”¨ requests æ¨¡æ‹Ÿè°ƒç”¨å¤©æ°” API.ã€‚</p>
</blockquote>
<p><strong>ç¬¬äºŒæ­¥ï¼š<code>weather_script.py</code>ï¼ˆæ¨¡æ‹Ÿå¤©æ°”æŸ¥è¯¢ï¼‰</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># weather_script.py</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–è¦æŸ¥è¯¢çš„åŸå¸‚</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;config/city.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        city = f.read().strip()</span><br><span class="line"><span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">    city = <span class="string">&quot;åŒ—äº¬&quot;</span>  <span class="comment"># é»˜è®¤åŸå¸‚</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;ğŸŒ¤ï¸  æ­£åœ¨å¯åŠ¨å¤©æ°”æœåŠ¡ï¼ˆåŸå¸‚ï¼š<span class="subst">&#123;city&#125;</span>ï¼‰...&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ—¥å¿—å°†å†™å…¥ logs/app.log&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡æ‹ŸæŒç»­è¾“å‡ºå¤©æ°”</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    temp = random.randint(<span class="number">15</span>, <span class="number">35</span>)</span><br><span class="line">    status = random.choice([<span class="string">&quot;æ™´&quot;</span>, <span class="string">&quot;å¤šäº‘&quot;</span>, <span class="string">&quot;å°é›¨&quot;</span>])</span><br><span class="line">    log_line = <span class="string">f&quot;[<span class="subst">&#123;i:03d&#125;</span>] <span class="subst">&#123;city&#125;</span>ï¼š<span class="subst">&#123;temp&#125;</span>Â°Cï¼Œ<span class="subst">&#123;status&#125;</span>\n&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å†™å…¥æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;logs/app.log&quot;</span>, <span class="string">&quot;a&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(log_line)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;â†’ <span class="subst">&#123;city&#125;</span>ï¼š<span class="subst">&#123;temp&#125;</span>Â°Cï¼Œ<span class="subst">&#123;status&#125;</span>&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºé…ç½®(config&#x2F;)å’Œæ—¥å¿—(logs&#x2F;)ç›®å½•</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p config logs</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ä¸Šæµ·&quot;</span> &gt; config/city.txt</span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬å››æ­¥ï¼šå†™<code>Dockerfile</code></strong></p>
<figure class="highlight dockerfile"><figcaption><span>Dockerfile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å®˜æ–¹ Python é•œåƒ</span></span><br><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.9</span>-slim</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å·¥ä½œç›®å½•</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹·è´ä¾èµ–æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt .</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹·è´ä¾èµ–æ–‡ä»¶ï¼ˆå¦‚æœæœ‰ requirements.txtï¼‰</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> pip install --no-cache-dir -r requirements.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ç›´æ¥åœ¨ Dockerfile ä¸­å®‰è£…ï¼ˆç®€å•åœºæ™¯ï¼‰</span></span><br><span class="line"><span class="comment"># RUN pip install --no-cache-dir requests</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹·è´åº”ç”¨è„šæœ¬</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> weather_script.py .</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹·è´é…ç½®ç›®å½•ï¼ˆå¯é€‰ï¼Œé˜²æ­¢è¿è¡Œæ—¶æŠ¥é”™ï¼‰</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> config/ config/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜æ—¥å¿—ç›®å½•</span></span><br><span class="line"><span class="comment"># ï¼ˆå®é™…ç”± -v æŒ‚è½½ï¼Œè¿™é‡Œåªæ˜¯è¯´æ˜ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®é»˜è®¤å¯åŠ¨å‘½ä»¤</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;python&quot;</span>, <span class="string">&quot;weather_script.py&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬äº”æ­¥ï¼šæ„å»ºé•œåƒ</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t weather-app:1.0 .</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼Œå¦‚æœè¿è¡Œçš„æ˜¯<code>docker build -t weather-app:1.0 .</code>ï¼Œä¹Ÿå°±æ˜¯è¯´å¸¦é™¤<code>latest</code>å¤–çš„TAGäº†ï¼Œé‚£ä¹ˆä½¿ç”¨æˆ–ç§»é™¤è¯¥é•œåƒæ—¶éœ€å¸¦ä¸ŠTAGã€‚ä¾‹å¦‚ï¼š<code>docker run</code>çš„æ—¶å€™ä¹Ÿè¦å¸¦ä¸Šå¯¹åº”TAGï¼ˆä¸å†™TAGæˆ–æŒ‡å®šTAGä¸º<code>latest</code>ï¼Œé‚£ä¹ˆTAGå³ä¸º<code>latest</code>ï¼Œæ­¤æ—¶<code>docker run</code>ä¸ç”¨å¸¦TAGï¼‰ã€‚</p>
</blockquote>
<p>æ„å»ºæˆåŠŸåæ£€æŸ¥ï¼š </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images | grep weather-app</span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬å…­æ­¥ï¼šè¿è¡Œå®¹å™¨ï¼ˆ-it äº¤äº’å¼ï¼‰</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -it \</span><br><span class="line">  --name weather-debug \</span><br><span class="line">  -p 8899:8899 \</span><br><span class="line">  -v <span class="variable">$PWD</span>/config:/app/config \</span><br><span class="line">  -v <span class="variable">$PWD</span>/logs:/app/logs \</span><br><span class="line">  weather-app:1.0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ğŸ’¡ è§£é‡Šï¼š</p>
<ul>
<li><code>-it</code>ï¼šå¯ä»¥è¿›å…¥å®¹å™¨äº¤äº’</li>
<li><code>-v $PWD/config:/app/config</code>ï¼šæŒ‚è½½é…ç½®</li>
<li><code>-v $PWD/logs:/app/logs</code>ï¼šæŒ‚è½½æ—¥å¿—</li>
<li><code>python:3.9-slim</code>ï¼šåŸºç¡€é•œåƒ</li>
<li><code>/bin/bash</code>ï¼šè¿›å»åæ‰“å¼€ shell</li>
</ul>
</blockquote>
<p>ç„¶åç»ˆç«¯å°±å¼€å§‹è¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ğŸŒ¤ï¸  æ­£åœ¨å¯åŠ¨å¤©æ°”æœåŠ¡ï¼ˆåŸå¸‚ï¼šä¸Šæµ·ï¼‰...</span><br><span class="line">æ—¥å¿—å°†å†™å…¥ logs/app.log</span><br><span class="line">â†’ ä¸Šæµ·ï¼š35Â°Cï¼Œå¤šäº‘</span><br><span class="line">â†’ ä¸Šæµ·ï¼š16Â°Cï¼Œæ™´</span><br><span class="line">â†’ ä¸Šæµ·ï¼š17Â°Cï¼Œå°é›¨</span><br><span class="line">â†’ ä¸Šæµ·ï¼š29Â°Cï¼Œå°é›¨</span><br><span class="line">â†’ ä¸Šæµ·ï¼š30Â°Cï¼Œæ™´</span><br><span class="line">â†’ ä¸Šæµ·ï¼š30Â°Cï¼Œæ™´</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æƒ³è¦çš„ä¸æ˜¯è¿™ä¸ªæ•ˆæœï¼Œæˆ‘ä»¬æƒ³è¿›å®¹å™¨å†…éƒ¨å¯åŠ¨ï¼Œè°ƒæ•´ä¸‹ä¸Šé¢çš„æµç¨‹ï¼š</p>
<ul>
<li><p><code>ctrl+c</code>åœæ­¢å½“å‰å®¹å™¨</p>
</li>
<li><p><code>docker rm weather-debug</code>åˆ é™¤å®¹å™¨</p>
</li>
<li><p><code>docker rmi weather-app:1.0</code>åˆ é™¤é•œåƒ</p>
</li>
<li><p>æ³¨é‡Šå®¹å™¨æœ€åä¸€è¡Œçš„<code>CMD [&quot;python&quot;, &quot;weather_script.py&quot;]</code></p>
</li>
<li><p><code>sudo docker build -t weather-app:1.0 .</code>æ„å»ºå®¹å™¨</p>
</li>
<li><pre><code class="language-bash">docker run -it \
  --name weather-debug \
  -p 8899:8899 \
  -v $PWD/config:/app/config \
  -v $PWD/logs:/app/logs \
  weather-app:1.0
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  è¿è¡Œå®¹å™¨ã€‚</span><br><span class="line"></span><br><span class="line">ç„¶åä½ ä¼šå‘ç°ï¼Œè¿›å…¥Pythonå‘½ä»¤è¡Œäº†ã€‚è¿™å’‹å›äº‹å•Šï¼Œä½¿ç”¨`docker ps`ï¼Œå‘ç°ï¼ˆçœç•¥äº†PORTSï¼‰ï¼š</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">CONTAINER ID   IMAGE       			COMMAND     CREATED            STATUS                     NAMES</span><br><span class="line"><span class="number">5</span>d56c859613d   weather-app:<span class="number">1.0</span>  	<span class="string">&quot;python3&quot;</span>    <span class="number">29</span> seconds ago   Up <span class="number">28</span> seconds        weather-debug</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<p>å“¦ï¼Œè¿™é‡Œè¿˜æœ‰<code>COMMAND</code>å•Šï¼Œ<code>Dockerfile</code>ä¸­æ²¡æŒ‡å®š<code>COMMAND</code>å°±ç”¨é•œåƒè‡ªå¸¦çš„<code>COMMAND</code>ã€‚</p>
<p><strong>é‚£æˆ‘ä»¬å°±åœ¨å‘½ä»¤è¡ŒæŒ‡å®šï¼š</strong></p>
<blockquote>
<p>é¡ºä¾¿ä¸€æï¼Œå³ä½¿Dockerfileä¸­æ²¡æ³¨é‡Šæ‰<code>CMD</code>ä¹Ÿä¼šè¢«ä¸‹é¢çš„<code>/bin/bash</code>æ›¿ä»£æ‰ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -it \</span><br><span class="line">  --name weather-debug \</span><br><span class="line">  -p 8899:8899 \</span><br><span class="line">  -v <span class="variable">$PWD</span>/config:/app/config \</span><br><span class="line">  -v <span class="variable">$PWD</span>/logs:/app/logs \</span><br><span class="line">  weather-app:1.0 \</span><br><span class="line">  /bin/bash</span><br></pre></td></tr></table></figure>

<p><strong>è¿›å…¥å®¹å™¨åï¼Œä¸€æ­¥æ­¥æ“ä½œ</strong></p>
<p>ä½ ç°åœ¨åœ¨å®¹å™¨é‡Œäº†ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼äºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@4cbb4f6434da:/app#</span><br></pre></td></tr></table></figure>

<p><strong>â‘  æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹ä¸‹æœ‰ä»€ä¹ˆ</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@4cbb4f6434da:/app# <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">config	logs  requirements.txt	weather_script.py</span><br></pre></td></tr></table></figure>

<p><strong>â‘¡ éªŒè¯æŒ‚è½½æ˜¯å¦æˆåŠŸ</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> config/</span><br><span class="line"><span class="comment"># è¾“å‡ºï¼šcity.txt</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> config/city.txt</span><br><span class="line"><span class="comment"># è¾“å‡ºï¼šä¸Šæµ·</span></span><br></pre></td></tr></table></figure>

<p>âœ… è¯´æ˜ï¼š<strong>ä¸»æœºçš„é…ç½®æ–‡ä»¶å·²ç»åŒæ­¥è¿›æ¥äº†ï¼</strong></p>
<p><strong>â‘¢ è¿è¡Œå¤©æ°”è„šæœ¬</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python weather_script.py</span><br></pre></td></tr></table></figure>

<p>ä½ ä¼šçœ‹åˆ°ï¼š</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ğŸŒ¤ï¸  æ­£åœ¨å¯åŠ¨å¤©æ°”æœåŠ¡ï¼ˆåŸå¸‚ï¼šä¸Šæµ·ï¼‰<span class="params">...</span></span><br><span class="line">æ—¥å¿—å°†å†™å…¥ logs/app.<span class="keyword">log</span></span><br><span class="line">â†’ ä¸Šæµ·ï¼š<span class="number">27</span>Â°Cï¼Œå¤šäº‘</span><br><span class="line">â†’ ä¸Šæµ·ï¼š<span class="number">17</span>Â°Cï¼Œæ™´</span><br><span class="line">â†’ ä¸Šæµ·ï¼š<span class="number">25</span>Â°Cï¼Œå°é›¨</span><br><span class="line"><span class="params">...</span></span><br></pre></td></tr></table></figure>

<p>æŒ‰<code>ctrl+c</code>åœæ­¢è¾“å‡ºï¼Œç„¶åè¿è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f logs/app.log</span><br></pre></td></tr></table></figure>

<p>å®æ—¶æŸ¥çœ‹æ—¥å¿—å†…å®¹ã€‚</p>
<p>ä¸Šé¢è„šæœ¬è¿è¡Œåå°±å ç”¨ç»ˆç«¯äº†ï¼Œé‚£ä¹ˆèƒ½ä¸èƒ½åœ¨åå°è¿è¡Œå‘¢ï¼Œéœ€è¦æ—¶å†æŸ¥çœ‹æ—¥å¿—ã€‚ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚</p>
<p>**ç”¨ <code>nohup</code> å¯åŠ¨ï¼ˆå³ä½¿é€€å‡ºç»ˆç«¯ä¹Ÿä¸åœæ­¢ï¼‰ **</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> python weather_script.py &gt; logs/output.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¾“å‡ºï¼š[1] 12</p>
</blockquote>
<ul>
<li><code>nohup</code>ï¼š<strong>no hang up</strong>ï¼Œå³ä½¿ä½ é€€å‡ºç»ˆç«¯ï¼Œç¨‹åºä¹Ÿä¸åœæ­¢</li>
<li><code>&gt;</code>ï¼šæŠŠ<strong>æ ‡å‡†è¾“å‡º</strong>é‡å®šå‘åˆ°æ–‡ä»¶</li>
<li><code>2&gt;&amp;1</code>ï¼šæŠŠ<strong>é”™è¯¯è¾“å‡º</strong>ä¹Ÿé‡å®šå‘åˆ°åŒä¸€ä¸ªæ–‡ä»¶</li>
<li><code>&amp;</code>ï¼šè®©ç¨‹åºåœ¨<strong>åå°è¿è¡Œ</strong></li>
<li><code>logs/output.log</code>ï¼šæ—¥å¿—æ–‡ä»¶ï¼ˆä½ å¯ä»¥çœ‹ <code>cat</code> æˆ– <code>tail -f</code>ï¼‰</li>
</ul>
<p>**æŸ¥çœ‹æ—¥å¿— **</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f logs/output.log</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„æ­¤æ—¶logæ˜¯ä¸€æ¬¡è¿”å›çš„ï¼Œå¯ä½¿ç”¨<code>nohup python -u weather_script.py &gt; logs/output.log 2&gt;&amp;1 &amp;</code>ä½¿å…¶å®æ—¶ã€‚</p>
</blockquote>
<p>**åœæ­¢ç¨‹åº **</p>
<blockquote>
<p>æ–¹æ³• 1ï¼šç”¨ä½œä¸šå· <code>kill %1</code></p>
<p>æ–¹æ³• 2ï¼šç”¨è¿›ç¨‹ ID <code>kill 12</code></p>
<p>æ–¹æ³• 3ï¼šç”¨ç¨‹åºå <code>pkill -f weather_script.py</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill -f weather_script.py</span><br></pre></td></tr></table></figure>

<h4 id="ğŸ”-ç¬¬ä¸‰æ­¥ï¼šéªŒè¯â€œæ•°æ®æŒä¹…åŒ–â€"><a href="#ğŸ”-ç¬¬ä¸‰æ­¥ï¼šéªŒè¯â€œæ•°æ®æŒä¹…åŒ–â€" class="headerlink" title="ğŸ” ç¬¬ä¸‰æ­¥ï¼šéªŒè¯â€œæ•°æ®æŒä¹…åŒ–â€"></a>ğŸ” ç¬¬ä¸‰æ­¥ï¼šéªŒè¯â€œæ•°æ®æŒä¹…åŒ–â€</h4><p><strong>æ‰“å¼€å¦ä¸€ä¸ªç»ˆç«¯ï¼ŒæŸ¥çœ‹ä¸»æœºä¸Šçš„æ—¥å¿—</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f logs/app.log</span><br></pre></td></tr></table></figure>
<p>âœ… ä½ ä¼šçœ‹åˆ°å’Œå®¹å™¨é‡Œä¸€æ ·çš„æ—¥å¿—å†…å®¹ï¼</p>
<blockquote>
<p>ğŸ‰ è¯´æ˜ï¼šå®¹å™¨å†™å…¥çš„æ—¥å¿—ï¼Œ<strong>å®æ—¶åŒæ­¥åˆ°ä½ æœ¬åœ°ç”µè„‘</strong></p>
</blockquote>
<p><strong>ä¿®æ”¹ä¸»æœºä¸Šçš„åŸå¸‚é…ç½®</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æ·±åœ³&quot;</span> &gt; config/city.txt</span><br></pre></td></tr></table></figure>

<p><strong>é‡å¯è„šæœ¬ï¼ˆåœ¨å®¹å™¨é‡Œ Ctrl+C åœæ­¢ï¼Œå†è¿è¡Œï¼‰</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python weather_script.py</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ğŸŒ¤ï¸  æ­£åœ¨å¯åŠ¨å¤©æ°”æœåŠ¡ï¼ˆåŸå¸‚ï¼šæ·±åœ³ï¼‰...</span><br><span class="line">â†’ æ·±åœ³ï¼š<span class="number">26</span>Â°Cï¼Œå¤šäº‘</span><br></pre></td></tr></table></figure>

<p>âœ… è¯´æ˜ï¼š<strong>æ”¹æœ¬åœ°é…ç½®ï¼Œå®¹å™¨èƒ½ç«‹åˆ»è¯»åˆ°ï¼</strong></p>
<p>ğŸ§  å¯¹æ¯”ï¼šç”Ÿäº§ç¯å¢ƒæ€ä¹ˆå†™ï¼Ÿ</p>
<p>ç”Ÿäº§ç¯å¢ƒåº”è¯¥ç”¨â€œä¸€é”®å¯åŠ¨â€ï¼š</p>
<ul>
<li><p>æ³•ä¸€ï¼šå»æ‰<code>Dockerfile</code>ä¸­çš„<code>CMD</code>æ³¨é‡Šï¼Œå†é€šè¿‡ä¸‹é¢å‘½ä»¤å¯åŠ¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name weather-prod \</span><br><span class="line">  -p 8899:8899 \</span><br><span class="line">  -v <span class="variable">$PWD</span>/config:/app/config \</span><br><span class="line">  -v <span class="variable">$PWD</span>/logs:/app/logs \</span><br><span class="line">  --restart unless-stopped \</span><br><span class="line">  weather-app:1.0</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ³•äºŒï¼šä½¿ç”¨<code>docker-compose.yml</code>ï¼ˆè§ä¸‹æ–‡æ•™å­¦ï¼‰</p>
</li>
</ul>
<hr>
<h3 id="âœ…-å¼•å…¥-Redisï¼ˆç”¨-docker-composeï¼‰"><a href="#âœ…-å¼•å…¥-Redisï¼ˆç”¨-docker-composeï¼‰" class="headerlink" title="âœ… å¼•å…¥ Redisï¼ˆç”¨ docker-composeï¼‰"></a>âœ… å¼•å…¥ Redisï¼ˆç”¨ docker-composeï¼‰</h3><p>ç°åœ¨æˆ‘ä»¬å†å‡çº§ä¸€æ­¥ï¼ŒåŠ å…¥ Redisï¼Œå±•ç¤ºâ€œå¤šæœåŠ¡ååŒâ€ã€‚</p>
<h4 id="1-ä¿®æ”¹-weather-script-pyï¼ˆåŠ å…¥-Redis-è®¡æ•°å™¨ï¼‰"><a href="#1-ä¿®æ”¹-weather-script-pyï¼ˆåŠ å…¥-Redis-è®¡æ•°å™¨ï¼‰" class="headerlink" title="1. ä¿®æ”¹ weather_script.pyï¼ˆåŠ å…¥ Redis è®¡æ•°å™¨ï¼‰"></a>1. ä¿®æ”¹ <code>weather_script.py</code>ï¼ˆåŠ å…¥ Redis è®¡æ•°å™¨ï¼‰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»ç¯å¢ƒå˜é‡è¯»å– Redis é…ç½®</span></span><br><span class="line">redis_host = os.getenv(<span class="string">&quot;REDIS_HOST&quot;</span>, <span class="string">&quot;redis&quot;</span>)</span><br><span class="line">redis_port = <span class="built_in">int</span>(os.getenv(<span class="string">&quot;REDIS_PORT&quot;</span>, <span class="number">6379</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥ Redis</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    r = redis.Redis(host=redis_host, port=redis_port, db=<span class="number">0</span>, decode_responses=<span class="literal">True</span>)</span><br><span class="line">    r.ping()  <span class="comment"># æµ‹è¯•è¿æ¥</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;âœ… æˆåŠŸè¿æ¥åˆ° Redis&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;âŒ æ— æ³•è¿æ¥ Redis: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–åŸå¸‚</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;config/city.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        city = f.read().strip()</span><br><span class="line"><span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">    city = <span class="string">&quot;ä¸Šæµ·&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;ğŸŒ¤ï¸  å¤©æ°”æœåŠ¡å¯åŠ¨ï¼ˆåŸå¸‚ï¼š<span class="subst">&#123;city&#125;</span>ï¼‰...&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ—¥å¿—å°†å†™å…¥ logs/app.log&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡æ‹Ÿè¾“å‡ºå¤©æ°”</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line">    temp = random.randint(<span class="number">15</span>, <span class="number">35</span>)</span><br><span class="line">    status = random.choice([<span class="string">&quot;æ™´&quot;</span>, <span class="string">&quot;å¤šäº‘&quot;</span>, <span class="string">&quot;å°é›¨&quot;</span>, <span class="string">&quot;é˜´&quot;</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è®°å½•è®¿é—®æ¬¡æ•°</span></span><br><span class="line">    r.incr(<span class="string">&quot;weather_requests&quot;</span>)</span><br><span class="line">    count = r.get(<span class="string">&quot;weather_requests&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    log_line = <span class="string">f&quot;[<span class="subst">&#123;i:03d&#125;</span>] <span class="subst">&#123;city&#125;</span>ï¼š<span class="subst">&#123;temp&#125;</span>Â°Cï¼Œ<span class="subst">&#123;status&#125;</span> (è¯·æ±‚æ¬¡æ•°: <span class="subst">&#123;count&#125;</span>)\n&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;logs/app.log&quot;</span>, <span class="string">&quot;a&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(log_line)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;â†’ <span class="subst">&#123;city&#125;</span>ï¼š<span class="subst">&#123;temp&#125;</span>Â°Cï¼Œ<span class="subst">&#123;status&#125;</span> | ğŸ“Š è¯·æ±‚æ¬¡æ•°: <span class="subst">&#123;count&#125;</span>&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-docker-compose-yml"><a href="#2-docker-compose-yml" class="headerlink" title="2. docker-compose.yml"></a>2. <code>docker-compose.yml</code></h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ä¸€ç»„æœåŠ¡ï¼ˆå¯ä»¥æœ‰å¤šä¸ªï¼‰</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># æœåŠ¡ 1ï¼šå¤©æ°”æœåŠ¡</span></span><br><span class="line">  <span class="attr">weather:</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ä½¿ç”¨æœ¬åœ°æ„å»ºçš„é•œåƒ</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">weather-app:1.0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å®¹å™¨åå­—</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">weather-prod</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ç«¯å£æ˜ å°„ï¼šä¸»æœº:å®¹å™¨</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8899:8899&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ•°æ®æŒ‚è½½ï¼ˆæŒä¹…åŒ–ï¼‰</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./config:/app/config</span>    <span class="comment"># ä¸»æœºå½“å‰ç›®å½•çš„ config â†’ å®¹å™¨çš„ /app/config</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./logs:/app/logs</span>        <span class="comment"># ä¸»æœºçš„ logs â†’ å®¹å™¨çš„ /app/logs</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é‡å¯ç­–ç•¥</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ç¯å¢ƒå˜é‡</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">PYTHONUNBUFFERED=1</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">REDIS_HOST=redis</span>        <span class="comment"># æŒ‡å‘ redis æœåŠ¡ï¼ˆæœåŠ¡åå³ä¸»æœºåï¼‰</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">REDIS_PORT=6379</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¥åº·æ£€æŸ¥</span></span><br><span class="line">    <span class="attr">healthcheck:</span></span><br><span class="line">      <span class="attr">test:</span> [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;ls logs/app.log&quot;</span>]</span><br><span class="line">      <span class="attr">interval:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line">      <span class="attr">retries:</span> <span class="number">3</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å£°æ˜ä¾èµ–ï¼šå¿…é¡»ç­‰ redis å¯åŠ¨åæ‰å¯åŠ¨ weather</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment"># æœåŠ¡ 2ï¼šRedis ç¼“å­˜æ•°æ®åº“</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ä½¿ç”¨å®˜æ–¹ Redis é•œåƒ</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:6-alpine</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å®¹å™¨åå­—</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">redis-prod</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æš´éœ²ç«¯å£ï¼ˆå¯é€‰ï¼šå¦‚æœä½ è¦ä»ä¸»æœºè¿æ¥ Redisï¼‰</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;6379:6379&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ•°æ®æŒä¹…åŒ–ï¼šæŠŠ Redis æ•°æ®ä¿å­˜åˆ°ä¸»æœº</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data/redis:/data</span>      <span class="comment"># Redis æŒä¹…åŒ–æ–‡ä»¶ï¼ˆRDB/AOFï¼‰</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é‡å¯ç­–ç•¥</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¥åº·æ£€æŸ¥ï¼šRedis æ˜¯å¦å“åº” PING</span></span><br><span class="line">    <span class="attr">healthcheck:</span></span><br><span class="line">      <span class="attr">test:</span> [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;redis-cli&quot;</span>, <span class="string">&quot;ping&quot;</span>]</span><br><span class="line">      <span class="attr">interval:</span> <span class="string">10s</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">3s</span></span><br><span class="line">      <span class="attr">retries:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>**ğŸ¯ è¿™ä¸ªé…ç½®å®ç°äº†ä»€ä¹ˆï¼Ÿ **</p>
<table>
<thead>
<tr>
<th>âœ… ä¸¤ä¸ªæœåŠ¡</th>
<th><code>weather</code> å’Œ <code>redis</code></th>
</tr>
</thead>
<tbody><tr>
<td>âœ… è‡ªåŠ¨ç»„ç½‘</td>
<td>Docker ä¼šåˆ›å»ºä¸€ä¸ªé»˜è®¤ç½‘ç»œï¼Œä¸¤ä¸ªå®¹å™¨å¯ä»¥äº’ç›¸é€šä¿¡</td>
</tr>
<tr>
<td>âœ… æœåŠ¡å‘ç°</td>
<td><code>weather</code> å¯ä»¥ç”¨ <code>redis</code> ä½œä¸ºä¸»æœºåè®¿é—® Redis</td>
</tr>
<tr>
<td>âœ… ä¾èµ–å¯åŠ¨</td>
<td><code>depends_on</code> ç¡®ä¿ Redis å…ˆå¯åŠ¨</td>
</tr>
<tr>
<td>âœ… æ•°æ®æŒä¹…åŒ–</td>
<td>Redis æ•°æ®ä¿å­˜åœ¨ <code>./data/redis</code></td>
</tr>
<tr>
<td>âœ… å¥åº·æ£€æŸ¥</td>
<td>ä¸¤ä¸ªæœåŠ¡éƒ½æœ‰å¥åº·ç›‘æ§</td>
</tr>
</tbody></table>
<hr>
<h4 id="â–¶-ä¸€é”®å¯åŠ¨ä¸¤ä¸ªæœåŠ¡"><a href="#â–¶-ä¸€é”®å¯åŠ¨ä¸¤ä¸ªæœåŠ¡" class="headerlink" title="â–¶ ä¸€é”®å¯åŠ¨ä¸¤ä¸ªæœåŠ¡"></a>â–¶ ä¸€é”®å¯åŠ¨ä¸¤ä¸ªæœåŠ¡</h4><blockquote>
<p>æ³¨æ„åœ¨è¿™ä¸€æ­¥å¼€å§‹ä¹‹å‰å…ˆä½¿ç”¨æ›´æ”¹åçš„é‡æ–°æ„é€ weather-app:1.0é•œåƒï¼Œä»¥ä¸‹é»˜è®¤é•œåƒé‡æ–°æ„å»ºäº†ã€‚</p>
<p>Dockerfileå¦‚ä¸‹ï¼š</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">#</span> ä½¿ç”¨å®˜æ–¹ Python é•œåƒ</span><br><span class="line">FROM python:3.9-slim</span><br><span class="line"></span><br><span class="line"><span class="params">#</span> è®¾ç½®å·¥ä½œç›®å½•</span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line"><span class="params">#</span> æ‹·è´ä¾èµ–æ–‡ä»¶</span><br><span class="line">COPY requirements.txt .</span><br><span class="line"></span><br><span class="line"><span class="params">#</span> æ‹·è´ä¾èµ–æ–‡ä»¶ï¼ˆå¦‚æœæœ‰ requirements.txtï¼‰</span><br><span class="line">COPY requirements.txt .</span><br><span class="line">RUN pip install --no-cache-dir -r requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="params">#</span> æˆ–è€…ç›´æ¥åœ¨ Dockerfile ä¸­å®‰è£…ï¼ˆç®€å•åœºæ™¯ï¼‰</span><br><span class="line"><span class="params">#</span> RUN pip install --no-cache-dir requests</span><br><span class="line"></span><br><span class="line"><span class="params">#</span> æ‹·è´åº”ç”¨è„šæœ¬</span><br><span class="line">COPY weather<span class="built_in">_</span>script.py .</span><br><span class="line"></span><br><span class="line"><span class="params">#</span> æ‹·è´é…ç½®ç›®å½•ï¼ˆå¯é€‰ï¼Œé˜²æ­¢è¿è¡Œæ—¶æŠ¥é”™ï¼‰</span><br><span class="line">COPY config/ config/</span><br><span class="line"></span><br><span class="line">ENV PYTHONUNBUFFERED=1</span><br><span class="line"></span><br><span class="line"><span class="params">#</span> å£°æ˜æ—¥å¿—ç›®å½•</span><br><span class="line"><span class="params">#</span> ï¼ˆå®é™…ç”± -v æŒ‚è½½ï¼Œè¿™é‡Œåªæ˜¯è¯´æ˜ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="params">#</span> è®¾ç½®é»˜è®¤å¯åŠ¨å‘½ä»¤</span><br><span class="line">CMD [&quot;python&quot;, &quot;weather<span class="built_in">_</span>script.py&quot;]</span><br></pre></td></tr></table></figure></blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¡®ä¿ data ç›®å½•å­˜åœ¨</span></span><br><span class="line"><span class="built_in">mkdir</span> -p data/redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€é”®å¯åŠ¨ä¸¤ä¸ªæœåŠ¡</span></span><br><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[+] Running 3/3</span><br><span class="line"> âœ” Network weather-app-compose_default  Created                                                                                                                                                                                                         0.1s </span><br><span class="line"> âœ” Container redis-prod                 Started                                                                                                                                                                                                         0.2s </span><br><span class="line"> âœ” Container weather-prod               Started  </span><br></pre></td></tr></table></figure>

<p><strong>æŸ¥çœ‹ä¸¤ä¸ªå®¹å™¨æ˜¯å¦éƒ½åœ¨è¿è¡Œ</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose ps</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NAME           IMAGE             COMMAND            SERVICE   CREATED          STATUS              PORTS</span><br><span class="line">redis-prod  redis:6-alpine <span class="string">&quot;docker-entrypoint.sâ€¦&quot;</span>   redis     38 seconds ago   Up 37 seconds (healthy)      0.0.0.0:6379-&gt;6379/tcp, :::6379-&gt;6379/tcp</span><br><span class="line">weather-prod   weather-app:1.0   <span class="string">&quot;python3&quot;</span>          weather   38 seconds ago   Restarting (0) 9 seconds ago  </span><br></pre></td></tr></table></figure>

<p><strong>æŸ¥çœ‹æ—¥å¿—</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose logs -f weather</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡ºï¼š</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">weather-prod  | âœ… æˆåŠŸè¿æ¥åˆ° Redis</span><br><span class="line">weather-prod  | ğŸŒ¤ï¸  å¤©æ°”æœåŠ¡å¯åŠ¨ï¼ˆåŸå¸‚ï¼šä¸Šæµ·ï¼‰...</span><br><span class="line">weather-prod  | æ—¥å¿—å°†å†™å…¥ logs/app.log</span><br><span class="line">weather-prod  | â†’ ä¸Šæµ·ï¼š27Â°Cï¼Œå°é›¨ | ğŸ“Š è¯·æ±‚æ¬¡æ•°: 1</span><br><span class="line">weather-prod  | â†’ ä¸Šæµ·ï¼š16Â°Cï¼Œæ™´ | ğŸ“Š è¯·æ±‚æ¬¡æ•°: 2</span><br><span class="line">weather-prod  | â†’ ä¸Šæµ·ï¼š27Â°Cï¼Œé˜´ | ğŸ“Š è¯·æ±‚æ¬¡æ•°: 3</span><br><span class="line">weather-prod  | â†’ ä¸Šæµ·ï¼š34Â°Cï¼Œå¤šäº‘ | ğŸ“Š è¯·æ±‚æ¬¡æ•°: 4</span><br><span class="line">weather-prod  | â†’ ä¸Šæµ·ï¼š26Â°Cï¼Œå°é›¨ | ğŸ“Š è¯·æ±‚æ¬¡æ•°: 5</span><br><span class="line">weather-prod  | â†’ ä¸Šæµ·ï¼š26Â°Cï¼Œæ™´ | ğŸ“Š è¯·æ±‚æ¬¡æ•°: 6</span><br></pre></td></tr></table></figure>

<p><strong>è¿›å…¥RedisæŸ¥çœ‹è®¡æ•°</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it redis-prod redis-cli</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>Redis CLI</code>ä¸­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET weather_requests</span><br><span class="line"><span class="comment"># è¾“å‡ºï¼š &quot;109&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(base) chr@chr:~/æ¡Œé¢/docker_learn/weather-app-compose$ <span class="built_in">sudo</span> docker <span class="built_in">exec</span> -it redis-prod redis-cli</span><br><span class="line">127.0.0.1:6379&gt; GET weather_requests</span><br><span class="line"><span class="string">&quot;109&quot;</span></span><br></pre></td></tr></table></figure>

<p>**ğŸš€ å¸¸ç”¨ <code>docker compose</code> å‘½ä»¤ **</p>
<table>
<thead>
<tr>
<th><code>docker compose up -d</code></th>
<th>å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåå°è¿è¡Œï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td><code>docker compose up</code></td>
<td>å¯åŠ¨å¹¶æŸ¥çœ‹æ—¥å¿—ï¼ˆå‰å°ï¼‰</td>
</tr>
<tr>
<td><code>docker compose down</code></td>
<td>åœæ­¢å¹¶åˆ é™¤å®¹å™¨</td>
</tr>
<tr>
<td><code>docker compose down -v</code></td>
<td>åˆ é™¤å®¹å™¨å’ŒæŒ‚è½½çš„å·ï¼ˆæ…ç”¨ï¼‰</td>
</tr>
<tr>
<td><code>docker compose logs -f</code></td>
<td>æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼ˆ<code>-f</code> è¡¨ç¤º followï¼‰</td>
</tr>
<tr>
<td><code>docker compose ps</code></td>
<td>æŸ¥çœ‹è¿è¡Œä¸­çš„æœåŠ¡</td>
</tr>
<tr>
<td><code>docker compose restart</code></td>
<td>é‡å¯æœåŠ¡</td>
</tr>
<tr>
<td><code>docker compose build</code></td>
<td>é‡æ–°æ„å»ºé•œåƒï¼ˆå¦‚æœå†™äº† <code>build:</code>ï¼‰</td>
</tr>
</tbody></table>
<blockquote>
<p><code>docker compose down</code>æ˜¯åœæ­¢å¹¶åˆ é™¤å®¹å™¨ï¼Œåœæ­¢ä½†ä¸åˆ é™¤å®¹å™¨è¯·çœ‹é™„å½•1ï¼šcomposeåœæ­¢ä½†ä¸åˆ é™¤å®¹å™¨ã€‚</p>
</blockquote>
<hr>
<p>ä¸Šé¢æ–¹æ³•æœ‰ä¸ªå¼Šç«¯ï¼Œå¦‚æœæœ‰é‡åçš„é•œåƒï¼Œä½†è¿™ä¸ªé•œåƒå¹¶ä¸æ˜¯ç”¨æœ€æ–°çš„ä»£ç buildçš„ï¼Œå°±ä¼šå‡ºç°ä»£ç è¡Œä¸ºä¸é¢„æœŸä¸ä¸€è‡´çš„æƒ…å†µï¼Œé‚£ä¹ˆå¦‚ä½•å¤„ç†è¿™ç§æƒ…å†µå‘¢ï¼Ÿè¿è¡Œæ—¶é‡æ–°æ„å»ºé•œåƒå³å¯ï¼Œ</p>
<h4 id="ğŸ§±-åœ¨-docker-compose-yml-ä¸­æ„å»ºé•œåƒ"><a href="#ğŸ§±-åœ¨-docker-compose-yml-ä¸­æ„å»ºé•œåƒ" class="headerlink" title="ğŸ§± åœ¨ docker-compose.yml ä¸­æ„å»ºé•œåƒ"></a>ğŸ§± åœ¨ <code>docker-compose.yml</code> ä¸­æ„å»ºé•œåƒ</h4><p>å¯ä»¥è¿™æ ·å†™ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="comment"># æœåŠ¡ 1ï¼šå¤©æ°”æœåŠ¡</span></span><br><span class="line">  <span class="attr">weather:</span></span><br><span class="line">    <span class="comment"># ä½¿ç”¨æœ¬åœ°æ„å»º</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">weather-prod</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8899:8899&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./config:/app/config</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./logs:/app/logs</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">PYTHONUNBUFFERED=1</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">REDIS_HOST=redis</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">REDIS_PORT=6379</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line">    <span class="comment"># å¯é€‰ï¼šå¥åº·æ£€æŸ¥ï¼ˆå¦‚æœ weather æœåŠ¡æœ‰ /health æ¥å£ï¼‰</span></span><br><span class="line">    <span class="comment"># healthcheck:</span></span><br><span class="line">    <span class="comment">#   test: [&quot;CMD&quot;, &quot;sh&quot;, &quot;-c&quot;, &quot;ls logs/app.log&quot;]</span></span><br><span class="line">    <span class="comment">#   interval: 30s</span></span><br><span class="line">    <span class="comment">#   timeout: 10s</span></span><br><span class="line">    <span class="comment">#   retries: 3</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># æœåŠ¡ 2ï¼šRedis æœåŠ¡</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:6-alpine</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">redis-prod</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;6379:6379&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data/redis:/data</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">redis-server</span> <span class="string">--appendonly</span> <span class="literal">yes</span>  <span class="comment"># å¯ç”¨ AOF æŒä¹…åŒ–</span></span><br><span class="line">    <span class="attr">healthcheck:</span></span><br><span class="line">      <span class="attr">test:</span> [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;redis-cli&quot;</span>, <span class="string">&quot;ping&quot;</span>]</span><br><span class="line">      <span class="attr">interval:</span> <span class="string">10s</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">3s</span></span><br><span class="line">      <span class="attr">retries:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åè¿è¡Œï¼š </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d --build</span><br></pre></td></tr></table></figure>

<p>âœ… ä¼šè‡ªåŠ¨æ„å»ºé•œåƒå¹¶å¯åŠ¨ã€‚</p>
<hr>
<h2 id="ğŸŒ-Docker-Hub-æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆè¡¥å……çŸ¥è¯†ï¼‰"><a href="#ğŸŒ-Docker-Hub-æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆè¡¥å……çŸ¥è¯†ï¼‰" class="headerlink" title="ğŸŒ Docker Hub æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆè¡¥å……çŸ¥è¯†ï¼‰"></a>ğŸŒ Docker Hub æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆè¡¥å……çŸ¥è¯†ï¼‰</h2><p>ğŸ‘‰ <a target="_blank" rel="noopener" href="https://hub.docker.com/">https://hub.docker.com</a></p>
<p>è¿™æ˜¯ Docker çš„â€œåº”ç”¨å•†åº—â€æˆ–â€œé•œåƒä»“åº“â€ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œï¼š</p>
<ul>
<li>ğŸ” æœç´¢å®˜æ–¹æˆ–ç¤¾åŒºæä¾›çš„é•œåƒ</li>
<li>ğŸ”½ ä½¿ç”¨ <code>docker pull</code> ä¸‹è½½é•œåƒ</li>
<li>ğŸš€ ä½¿ç”¨ <code>docker run</code> å¯åŠ¨æœåŠ¡</li>
</ul>
<p>å¸¸è§é•œåƒï¼š</p>
<ul>
<li><code>nginx</code>ï¼šé«˜æ€§èƒ½ç½‘é¡µæœåŠ¡å™¨</li>
<li><code>redis</code>ï¼šå†…å­˜æ•°æ®åº“</li>
<li><code>mysql</code>, <code>postgres</code>ï¼šå…³ç³»å‹æ•°æ®åº“</li>
<li><code>python</code>, <code>node</code>, <code>golang</code>ï¼šç¼–ç¨‹è¯­è¨€ç¯å¢ƒ</li>
<li><code>alpine</code>ï¼šè¶…è½»é‡ Linux åŸºç¡€é•œåƒï¼ˆ~5MBï¼‰</li>
</ul>
<p>å‘½ä»¤æ ¼å¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‹‰å–é•œåƒ</span></span><br><span class="line">docker pull é•œåƒå[:æ ‡ç­¾]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œå®¹å™¨</span></span><br><span class="line">docker run [é€‰é¡¹] é•œåƒå[:æ ‡ç­¾]</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx</span><br><span class="line">docker run -d -p 80:80 nginx</span><br><span class="line"></span><br><span class="line">docker pull redis:7</span><br><span class="line">docker run -d -p 6379:6379 redis:7</span><br></pre></td></tr></table></figure>

<p>å°è´´å£«ï¼š</p>
<ul>
<li>ä¸å†™æ ‡ç­¾é»˜è®¤æ˜¯ <code>:latest</code></li>
<li>å›½å†…ç”¨æˆ·å»ºè®®é…ç½®<strong>é•œåƒåŠ é€Ÿå™¨</strong>æå‡ä¸‹è½½é€Ÿåº¦</li>
<li>ä½ ä¹Ÿå¯ä»¥æŠŠè‡ªå·±çš„é•œåƒä¸Šä¼ åˆ° Docker Hubï¼Œåˆ†äº«ç»™ä»–äºº</li>
</ul>
<hr>
<h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><h3 id="composeåœæ­¢ä½†ä¸åˆ é™¤å®¹å™¨"><a href="#composeåœæ­¢ä½†ä¸åˆ é™¤å®¹å™¨" class="headerlink" title="composeåœæ­¢ä½†ä¸åˆ é™¤å®¹å™¨"></a>composeåœæ­¢ä½†ä¸åˆ é™¤å®¹å™¨</h3><p>ğŸ“Œ å‘½ä»¤å¯¹æ¯”</p>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>ä½œç”¨</th>
<th>æ˜¯å¦åˆ é™¤å®¹å™¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>docker compose stop</code></td>
<td><strong>åœæ­¢å®¹å™¨</strong>ï¼Œä½†ä¿ç•™å®¹å™¨ã€ç½‘ç»œã€å·</td>
<td>âœ… ä¸åˆ é™¤</td>
</tr>
<tr>
<td><code>docker compose start</code></td>
<td>é‡æ–°å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨</td>
<td>âœ… å¯æ¢å¤</td>
</tr>
<tr>
<td><code>docker compose down</code></td>
<td>åœæ­¢å¹¶<strong>åˆ é™¤</strong>å®¹å™¨ã€ç½‘ç»œï¼ˆå·å¯é€‰ï¼‰</td>
<td>âŒ åˆ é™¤</td>
</tr>
</tbody></table>
<p>âœ… ä½¿ç”¨åœºæ™¯å¯¹æ¯”</p>
<p>åœºæ™¯ 1ï¼šåªæƒ³æš‚åœæœåŠ¡ï¼ˆæ¯”å¦‚æ”¹é…ç½®ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœæ­¢ä½†ä¸åˆ é™¤</span></span><br><span class="line">docker compose stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹ docker-compose.yml æˆ–ä»£ç </span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°å¯åŠ¨</span></span><br><span class="line">docker compose start</span><br></pre></td></tr></table></figure>
<p>âœ… å®¹å™¨ã€ç½‘ç»œã€æ•°æ®éƒ½è¿˜åœ¨ï¼Œå¯åŠ¨å¿«ï¼</p>
<p>åœºæ™¯ 2ï¼šå½»åº•æ¸…ç†ï¼ˆæ¯”å¦‚æ¢é•œåƒï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker compose down</span><br><span class="line"><span class="comment"># å®¹å™¨å’Œç½‘ç»œéƒ½è¢«åˆ é™¤</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœåŠ  <code>-v</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose down -v</span><br></pre></td></tr></table></figure>
<p>âœ… è¿<strong>æ•°æ®å·</strong>ä¹Ÿåˆ é™¤ï¼ˆæ…ç”¨ï¼ï¼‰</p>
<p>âœ… éªŒè¯ï¼š<code>stop</code> åå®¹å™¨è¿˜åœ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. åœæ­¢</span></span><br><span class="line">docker compose stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢çš„ï¼‰</span></span><br><span class="line">docker compose ps</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NAME               COMMAND             SERVICE   STATUS</span><br><span class="line">weather-<span class="keyword">prod</span>       <span class="string">&quot;python script.py&quot;</span>  weather   exited</span><br><span class="line">redis-<span class="keyword">prod</span>         <span class="string">&quot;redis-server&quot;</span>      redis     exited</span><br></pre></td></tr></table></figure>
<p>âœ… å®¹å™¨è¿˜åœ¨ï¼Œåªæ˜¯ <code>exited</code>ï¼ˆå·²åœæ­¢ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. é‡æ–°å¯åŠ¨</span></span><br><span class="line">docker compose start</span><br></pre></td></tr></table></figure>
<p>âœ… æœåŠ¡æ¢å¤ï¼Œæ•°æ®ä¸ä¸¢å¤±</p>
<p>âœ… è¿›é˜¶ï¼šåªåœæ­¢æŸä¸ªæœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åªåœæ­¢ weather æœåŠ¡</span></span><br><span class="line">docker compose stop weather</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªåœæ­¢ redis</span></span><br><span class="line">docker compose stop redis</span><br></pre></td></tr></table></figure>

<p>ç„¶åå¯ä»¥å•ç‹¬å¯åŠ¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose start weather</span><br></pre></td></tr></table></figure>

<p>âœ… æ€»ç»“</p>
<table>
<thead>
<tr>
<th>ä½ æƒ³åšä»€ä¹ˆ</th>
<th>å‘½ä»¤</th>
</tr>
</thead>
<tbody><tr>
<td>åœæ­¢ä½†ä¸åˆ é™¤å®¹å™¨</td>
<td><code>docker compose stop</code></td>
</tr>
<tr>
<td>é‡æ–°å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨</td>
<td><code>docker compose start</code></td>
</tr>
<tr>
<td>å½»åº•åˆ é™¤å®¹å™¨å’Œç½‘ç»œ</td>
<td><code>docker compose down</code></td>
</tr>
<tr>
<td>åˆ é™¤å®¹å™¨ + å·</td>
<td><code>docker compose down -v</code></td>
</tr>
</tbody></table>
<p>ğŸ¯ ç±»æ¯”ï¼šç”µè„‘æ“ä½œ</p>
<table>
<thead>
<tr>
<th>Docker å‘½ä»¤</th>
<th>ç±»æ¯”</th>
</tr>
</thead>
<tbody><tr>
<td><code>docker compose stop</code></td>
<td>å…³æœºï¼ˆä¸‹æ¬¡èƒ½å¼€æœºï¼‰</td>
</tr>
<tr>
<td><code>docker compose start</code></td>
<td>å¼€æœº</td>
</tr>
<tr>
<td><code>docker compose down</code></td>
<td>æ ¼å¼åŒ–ç¡¬ç›˜ + æ‹†ç”µè„‘</td>
</tr>
<tr>
<td><code>docker compose up</code></td>
<td>è£…æ–°ç”µè„‘</td>
</tr>
</tbody></table>
<hr>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/docker/" rel="tag"># docker</a>
              <a href="/tags/nigix/" rel="tag"># nigix</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/07/21/RAG%E5%AE%9E%E6%88%98%E7%AF%87%EF%BC%9APython/" rel="prev" title="RAGå®æˆ˜ç¯‡ï¼šPython">
                  <i class="fa fa-angle-left"></i> RAGå®æˆ˜ç¯‡ï¼šPython
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Chr</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">375k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">22:42</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","src":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
