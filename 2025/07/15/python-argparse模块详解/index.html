<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"caihaoran-00.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="å‰è¨€argparseæ˜¯Pythonæ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªå¸¸ç”¨æ¨¡å—ï¼Œä¸“é—¨ç”¨æ¥å¸®åŠ©è½»æ¾åœ°ç¼–å†™ç”¨æˆ·å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£ç¨‹åºã€‚å®ƒæ˜¯ç”¨æ¥è§£æå‘½ä»¤è¡Œå‚æ•°çš„æ¨¡å—ã€‚åœ¨ä¸€ä¸ªå¼€æºé¡¹ç›®ä¸­çœ‹åˆ°äº†å®ƒçš„æ¯”è¾ƒé«˜é˜¶çš„ç”¨æ³•ï¼Œç´¢æ€§å¼€ç¯‡æ–‡ç« ç³»ç»Ÿçš„æ•´ç†ä¸‹argparseæ¨¡å—çš„ç”¨æ³•ã€‚æœ¬ç¯‡æ–‡ç« å°†ä»æœ€åŸºç¡€çš„è®²èµ·ï¼Œç”±æµ…åŠæ·±çš„ä»‹ç»argparseæ¨¡å—çš„ä½¿ç”¨ï¼Œç›®æ ‡æ˜¯ä»…çœ‹æœ¬ç¯‡æ–‡ç« ç”šè‡³ä¸ç”¨å®æ“å°±èƒ½å¯¹argparseæœ‰ä¸ªå…¨é¢ä¸”å…·è±¡çš„è®¤è¯†ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="python: argparseæ¨¡å—è¯¦è§£">
<meta property="og:url" content="https://caihaoran-00.github.io/2025/07/15/python-argparse%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3/index.html">
<meta property="og:site_name" content="Chr&#39;s Blog">
<meta property="og:description" content="å‰è¨€argparseæ˜¯Pythonæ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªå¸¸ç”¨æ¨¡å—ï¼Œä¸“é—¨ç”¨æ¥å¸®åŠ©è½»æ¾åœ°ç¼–å†™ç”¨æˆ·å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£ç¨‹åºã€‚å®ƒæ˜¯ç”¨æ¥è§£æå‘½ä»¤è¡Œå‚æ•°çš„æ¨¡å—ã€‚åœ¨ä¸€ä¸ªå¼€æºé¡¹ç›®ä¸­çœ‹åˆ°äº†å®ƒçš„æ¯”è¾ƒé«˜é˜¶çš„ç”¨æ³•ï¼Œç´¢æ€§å¼€ç¯‡æ–‡ç« ç³»ç»Ÿçš„æ•´ç†ä¸‹argparseæ¨¡å—çš„ç”¨æ³•ã€‚æœ¬ç¯‡æ–‡ç« å°†ä»æœ€åŸºç¡€çš„è®²èµ·ï¼Œç”±æµ…åŠæ·±çš„ä»‹ç»argparseæ¨¡å—çš„ä½¿ç”¨ï¼Œç›®æ ‡æ˜¯ä»…çœ‹æœ¬ç¯‡æ–‡ç« ç”šè‡³ä¸ç”¨å®æ“å°±èƒ½å¯¹argparseæœ‰ä¸ªå…¨é¢ä¸”å…·è±¡çš„è®¤è¯†ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-07-15T03:03:10.000Z">
<meta property="article:modified_time" content="2025-07-15T12:01:25.365Z">
<meta property="article:author" content="Chr">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="argparse">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://caihaoran-00.github.io/2025/07/15/python-argparse%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://caihaoran-00.github.io/2025/07/15/python-argparse%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3/","path":"2025/07/15/python-argparseæ¨¡å—è¯¦è§£/","title":"python: argparseæ¨¡å—è¯¦è§£"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>python: argparseæ¨¡å—è¯¦è§£ | Chr's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Chr's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Record and Share</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="æœç´¢..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A3%E6%96%87"><span class="nav-number">2.</span> <span class="nav-text">æ­£æ–‡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%84%E7%A7%8D%E7%B1%BB%E5%9E%8B-%E5%9F%BA%E7%A1%80%E7%89%88"><span class="nav-number">2.1.</span> <span class="nav-text">å„ç§ç±»å‹(åŸºç¡€ç‰ˆ)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#h-or-help"><span class="nav-number">2.1.1.</span> <span class="nav-text">-h or --help</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84"><span class="nav-number">2.1.2.</span> <span class="nav-text">ä»£ç ç»“æ„</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E7%BB%86%E8%8A%82"><span class="nav-number">2.1.3.</span> <span class="nav-text">ä»£ç ç»†èŠ‚</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#nargs"><span class="nav-number">2.1.4.</span> <span class="nav-text">nargs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#default"><span class="nav-number">2.1.5.</span> <span class="nav-text">default</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#required"><span class="nav-number">2.1.6.</span> <span class="nav-text">required</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#choices"><span class="nav-number">2.1.7.</span> <span class="nav-text">choices</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#help"><span class="nav-number">2.1.8.</span> <span class="nav-text">help</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%BF%90%E8%A1%8C"><span class="nav-number">2.1.9.</span> <span class="nav-text">å‘½ä»¤è¡Œè¿è¡Œ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E5%91%BD%E4%BB%A4subparsers"><span class="nav-number">2.2.</span> <span class="nav-text">å­å‘½ä»¤subparsers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%E9%AA%8C%E8%AF%81%E5%87%BD%E6%95%B0-parse-known-args"><span class="nav-number">2.3.</span> <span class="nav-text">è‡ªå®šä¹‰ç±»å‹éªŒè¯å‡½æ•°+parse_known_args</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">3.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Chr</p>
  <div class="site-description" itemprop="description">Welcome to my little world</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">98</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">113</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:1299964565@qq.com" title="E-Mail â†’ mailto:1299964565@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://caihaoran-00.github.io/2025/07/15/python-argparse%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chr">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chr's Blog">
      <meta itemprop="description" content="Welcome to my little world">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="python: argparseæ¨¡å—è¯¦è§£ | Chr's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          python: argparseæ¨¡å—è¯¦è§£
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-07-15 11:03:10 / ä¿®æ”¹æ—¶é—´ï¼š20:01:25" itemprop="dateCreated datePublished" datetime="2025-07-15T11:03:10+08:00">2025-07-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/code/" itemprop="url" rel="index"><span itemprop="name">code</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>3.3k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>12 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><code>argparse</code>æ˜¯Pythonæ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªå¸¸ç”¨æ¨¡å—ï¼Œä¸“é—¨ç”¨æ¥å¸®åŠ©è½»æ¾åœ°ç¼–å†™ç”¨æˆ·å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£ç¨‹åºã€‚å®ƒæ˜¯ç”¨æ¥è§£æå‘½ä»¤è¡Œå‚æ•°çš„æ¨¡å—ã€‚åœ¨ä¸€ä¸ªå¼€æºé¡¹ç›®ä¸­çœ‹åˆ°äº†å®ƒçš„æ¯”è¾ƒé«˜é˜¶çš„ç”¨æ³•ï¼Œç´¢æ€§å¼€ç¯‡æ–‡ç« ç³»ç»Ÿçš„æ•´ç†ä¸‹<code>argparse</code>æ¨¡å—çš„ç”¨æ³•ã€‚æœ¬ç¯‡æ–‡ç« å°†ä»æœ€åŸºç¡€çš„è®²èµ·ï¼Œç”±æµ…åŠæ·±çš„ä»‹ç»<code>argparse</code>æ¨¡å—çš„ä½¿ç”¨ï¼Œç›®æ ‡æ˜¯ä»…çœ‹æœ¬ç¯‡æ–‡ç« ç”šè‡³ä¸ç”¨å®æ“å°±èƒ½å¯¹<code>argparse</code>æœ‰ä¸ªå…¨é¢ä¸”å…·è±¡çš„è®¤è¯†ã€‚</p>
<span id="more"></span>

<hr>
<h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><p>é¦–å…ˆï¼Œ<strong>ä»€ä¹ˆæ˜¯<code>argparse</code></strong>ï¼Œ<code>argparse = arg + parse</code>ï¼Œ</p>
<ul>
<li><code>arg</code> æ˜¯ argumentï¼ˆå‚æ•°ï¼‰ çš„ç¼©å†™</li>
<li><code>parse</code> æ„æ€æ˜¯â€œè§£æâ€œ</li>
</ul>
<p>æ‰€ä»¥ï¼Œ<code>argparse</code> å°±æ˜¯ç”¨æ¥ è§£æå‘½ä»¤è¡Œå‚æ•°çš„æ¨¡å— ã€‚å®ƒæ˜¯ <code>Python</code> æ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªæ¨¡å—ï¼Œä¸“é—¨ç”¨æ¥å¸®åŠ©ä½ è½»æ¾åœ°ç¼–å†™ç”¨æˆ·å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£ç¨‹åºã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ <code>argparse</code>ï¼Ÿ</strong></p>
<p>åœ¨å†™ Python è„šæœ¬æ—¶ï¼Œå¦‚æœä½ å¸Œæœ›è¿™ä¸ªè„šæœ¬èƒ½é€šè¿‡å‘½ä»¤è¡Œè¿è¡Œï¼Œå¹¶ä¸”æ¥æ”¶ä¸€äº›è¾“å…¥å‚æ•°ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python myscript.py --name Alice --age 25</span><br></pre></td></tr></table></figure>

<p>é‚£ä½ å°±ä¼šéœ€è¦ç”¨åˆ° <code>argparse</code> æ¥å¸®ä½ å¤„ç†è¿™äº›å‚æ•°ã€‚å®ƒå¯ä»¥ï¼š</p>
<ul>
<li>æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°</li>
<li>è‡ªåŠ¨ç”Ÿæˆå¸®åŠ©ä¿¡æ¯ï¼ˆå¦‚ <code>-h</code> æˆ– <code>--help</code>ï¼‰</li>
<li>åšç±»å‹æ£€æŸ¥å’Œé»˜è®¤å€¼è®¾ç½®</li>
<li>æ”¯æŒå¯é€‰å‚æ•°å’Œä½ç½®å‚æ•°</li>
<li>è®©ä½ çš„è„šæœ¬æ›´ä¸“ä¸šã€æ›´æ˜“äºä½¿ç”¨</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬å°†é€šè¿‡å‡ ä¸ª<strong>å…·ä½“çš„ä¾‹å­</strong>æ¥å…·ä½“ä½“ä¼š<code>argparse</code>æ¨¡å—çš„æ•ˆæœã€‚</p>
<h3 id="å„ç§ç±»å‹-åŸºç¡€ç‰ˆ"><a href="#å„ç§ç±»å‹-åŸºç¡€ç‰ˆ" class="headerlink" title="å„ç§ç±»å‹(åŸºç¡€ç‰ˆ)"></a>å„ç§ç±»å‹(åŸºç¡€ç‰ˆ)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ª ArgumentParser å¯¹è±¡ï¼Œç”¨äºè§£æå‘½ä»¤è¡Œå‚æ•°</span></span><br><span class="line">    parser = argparse.ArgumentParser(description=<span class="string">&quot;æ¼”ç¤º argparse çš„å„ç§ç±»å‹&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä¸¤ä¸ªä½ç½®å‚æ•°ï¼ˆpositional argumentsï¼‰</span></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;action&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, choices=[<span class="string">&#x27;greet&#x27;</span>, <span class="string">&#x27;farewell&#x27;</span>], <span class="built_in">help</span>=<span class="string">&#x27;æ“ä½œç±»å‹ï¼šæ‰“æ‹›å‘¼(greet) æˆ–é“åˆ«(farewell)&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;target&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">&#x27;æ“ä½œçš„ç›®æ ‡äººåæˆ–å¯¹è±¡&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># --name ç¼©å†™ä¸º -n</span></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-n&#x27;</span>, <span class="string">&#x27;--name&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">&#x27;ä½ çš„åå­—&#x27;</span>, required=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-a&#x27;</span>, <span class="string">&#x27;--age&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">25</span>, <span class="built_in">help</span>=<span class="string">&#x27;å¹´é¾„&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-ht&#x27;</span>, <span class="string">&#x27;--height&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">1.75</span>, <span class="built_in">help</span>=<span class="string">&#x27;èº«é«˜ï¼ˆç±³ï¼‰&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-v&#x27;</span>, <span class="string">&#x27;--verbose&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-hb&#x27;</span>, <span class="string">&#x27;--hobbies&#x27;</span>, nargs=<span class="string">&#x27;+&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">&#x27;ä½ çš„çˆ±å¥½åˆ—è¡¨&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-c&#x27;</span>, <span class="string">&#x27;--color&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, choices=[<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>], default=<span class="string">&#x27;red&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;é¢œè‰²&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è§£æå‘½ä»¤è¡Œå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå‘½åç©ºé—´å¯¹è±¡ args</span></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¦‚æœç”¨æˆ·å¯ç”¨äº† --verboseï¼Œåˆ™æ‰“å°å½“å‰è§£æåˆ°çš„æ‰€æœ‰å‚æ•°ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span> args.verbose:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[INFO] å‚æ•°è¯¦æƒ…å¦‚ä¸‹ï¼š&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">vars</span>(args))  <span class="comment"># vars() å¯ä»¥æŠŠ Namespace è½¬æˆå­—å…¸æ–¹ä¾¿æŸ¥çœ‹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ ¹æ® action æ‰§è¡Œä¸åŒé€»è¾‘</span></span><br><span class="line">    <span class="keyword">if</span> args.action == <span class="string">&#x27;greet&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Hello, <span class="subst">&#123;args.name&#125;</span>! å¾ˆé«˜å…´è§åˆ°ä½ ã€‚&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> args.action == <span class="string">&#x27;farewell&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Goodbye, <span class="subst">&#123;args.target&#125;</span>! å†è§å•¦ï½&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¾“å‡ºå…¶ä»–å‚æ•°ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;å¹´é¾„ï¼š<span class="subst">&#123;args.age&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;èº«é«˜ï¼š<span class="subst">&#123;args.height&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;é¢œè‰²åå¥½ï¼š<span class="subst">&#123;args.color&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¦‚æœæä¾›äº†çˆ±å¥½åˆ—è¡¨ï¼Œç”¨é€—å·è¿æ¥åè¾“å‡º</span></span><br><span class="line">    <span class="keyword">if</span> args.hobbies:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ä½ çš„çˆ±å¥½æ˜¯ï¼š<span class="subst">&#123;<span class="string">&#x27;, &#x27;</span>.join(args.hobbies)&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br></pre></td></tr></table></figure>

<hr>
<h4 id="h-or-help"><a href="#h-or-help" class="headerlink" title="-h or --help"></a><code>-h</code> or <code>--help</code></h4><p>é¦–å…ˆï¼Œå…ˆä¸ç®¡å…·ä½“ä»£ç ï¼Œæˆ‘ä»¬å…ˆè¿è¡Œä»¥ä¸‹ä»£ç çœ‹çœ‹<strong>å¸®åŠ©ä¿¡æ¯</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">python demo1.py -h  </span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line"><span class="comment"># python demo1.py --help</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">usage: demo1.py [-h] -n NAME [-a AGE] [-ht HEIGHT] [-v] [-hb HOBBIES [HOBBIES ...]] [-c &#123;red,green,blue&#125;] &#123;greet,farewell&#125; target</span><br><span class="line"></span><br><span class="line">æ¼”ç¤º argparse çš„å„ç§ç±»å‹</span><br><span class="line"></span><br><span class="line">positional arguments:</span><br><span class="line">  &#123;greet,farewell&#125;      æ“ä½œç±»å‹ï¼šæ‰“æ‹›å‘¼(greet) æˆ–é“åˆ«(farewell)</span><br><span class="line">  target                æ“ä½œçš„ç›®æ ‡äººåæˆ–å¯¹è±¡</span><br><span class="line"></span><br><span class="line">options:</span><br><span class="line">  -h, --<span class="built_in">help</span>            show this <span class="built_in">help</span> message <span class="keyword">and</span> exit</span><br><span class="line">  -n NAME, --name NAME  ä½ çš„åå­—</span><br><span class="line">  -a AGE, --age AGE     å¹´é¾„</span><br><span class="line">  -ht HEIGHT, --height HEIGHT</span><br><span class="line">                        èº«é«˜ï¼ˆç±³ï¼‰</span><br><span class="line">  -v, --verbose         æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</span><br><span class="line">  -hb HOBBIES [HOBBIES ...], --hobbies HOBBIES [HOBBIES ...]</span><br><span class="line">                        ä½ çš„çˆ±å¥½åˆ—è¡¨</span><br><span class="line">  -c &#123;red,green,blue&#125;, --color &#123;red,green,blue&#125;</span><br><span class="line">                        é¢œè‰²</span><br></pre></td></tr></table></figure>

<p><strong>æˆ‘ä»¬åˆ†éƒ¨åˆ†è®²è§£ï¼š</strong></p>
<p><strong>ç¬¬ä¸€éƒ¨åˆ†</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usage: demo1.py [-h] -n NAME [-a AGE] [-ht HEIGHT] [-v] [-hb HOBBIES [HOBBIES ...]] [-c &#123;red,green,blue&#125;] &#123;greet,farewell&#125; target</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯å‘½ä»¤è¡Œçš„<strong>ä½¿ç”¨æ ¼å¼è¯´æ˜</strong> ï¼Œå‘Šè¯‰ç”¨æˆ·è¿™ä¸ªè„šæœ¬åº”è¯¥æ€ä¹ˆç”¨ã€‚</p>
<ul>
<li><code>demo1.py</code>: è„šæœ¬åç§°</li>
<li><code>[-h]</code>: å¯é€‰å‚æ•° <code>-h</code> æˆ– <code>--help</code></li>
<li><code>-n NAME</code>,  <code>--name NAME</code>: å¿…é¡»æä¾›çš„å‚æ•°ï¼ˆå› ä¸ºè®¾ç½®äº† <code>required=True</code>ï¼‰</li>
<li><code>[-a AGE]</code>ï¼šå¯é€‰å‚æ•°ï¼Œå¯ä»¥çœç•¥</li>
<li><code>[-ht HEIGHT]</code>ï¼šå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºèº«é«˜</li>
<li><code>[-v]</code>ï¼šå¸ƒå°”å‹å¯é€‰å‚æ•°ï¼Œå‡ºç°å°±ä¸º <code>True</code></li>
<li><code>[-hb HOBBIES [...]]</code>ï¼šå¯é€‰å‚æ•°ï¼Œæ¥æ”¶å¤šä¸ªå­—ç¬¦ä¸²</li>
<li><code>[-c &#123;red,green,blue&#125;]</code>ï¼šå¯é€‰å‚æ•°ï¼Œåªèƒ½ä»æŒ‡å®šå€¼ä¸­é€‰</li>
<li><code>&#123;greet,farewell&#125;</code>ï¼šä½ç½®å‚æ•°ï¼Œåªèƒ½æ˜¯è¿™ä¸¤ä¸ªå€¼ä¸­çš„ä¸€ä¸ª</li>
<li><code>target</code>ï¼šä½ç½®å‚æ•°ï¼Œä»»æ„å­—ç¬¦ä¸²</li>
</ul>
<p>æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li>è™½ç„¶ä½ç½®å‚æ•°å®šä¹‰åœ¨äº†æœ€å‰é¢ï¼Œä½†åœ¨è¿™é‡Œæ˜¾ç¤ºæ—¶æ˜¯åœ¨æœ€åé¢</li>
<li>è¢«<code>[]</code>åŒ…ç€çš„å‚æ•°æ˜¯å¯é€‰å‚æ•°ï¼Œæœªè¢«åŒ…ç€çš„æ˜¯å¿…é¡»æä¾›çš„å‚æ•°</li>
<li>å¿…é¡»æä¾›çš„å‚æ•°åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯æŒ‡å®šäº†<code>required=True</code>ï¼Œå¦ä¸€ç§æ˜¯ä½ç½®å‚æ•°</li>
<li>å¿…é¡»æä¾›çš„å‚æ•°ä¸€èˆ¬ä¸ä½¿ç”¨<code>default</code>å‚æ•°</li>
<li>ä½ç½®å‚æ•°åªæ˜¯ä¸å¸¦å‰ç¼€<code>--</code>ï¼Œå…¶ä½™ç”¨æ³•ç›¸åŒ</li>
</ol>
<hr>
<p><strong>ç¬¬äºŒéƒ¨åˆ†ï¼š</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¼”ç¤º argparse çš„å„ç§ç±»å‹</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä½ åœ¨åˆ›å»º <code>ArgumentParser</code> æ—¶ä¼ å…¥çš„ <code>description</code> å‚æ•°å†…å®¹ï¼Œç”¨äºç®€è¦è¯´æ˜è¿™ä¸ªè„šæœ¬çš„ä½œç”¨ã€‚</p>
<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parser = argparse.ArgumentParser(description=<span class="string">&quot;æ¼”ç¤º argparse çš„å„ç§ç±»å‹&quot;</span>)</span><br></pre></td></tr></table></figure></blockquote>
<p><strong>ç¬¬ä¸‰éƒ¨åˆ†ï¼š</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">positional arguments:</span><br><span class="line">  &#123;greet,farewell&#125;      æ“ä½œç±»å‹ï¼šæ‰“æ‹›å‘¼(greet) æˆ–é“åˆ«(farewell)</span><br><span class="line">  target                æ“ä½œçš„ç›®æ ‡äººåæˆ–å¯¹è±¡</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä½ å®šä¹‰çš„ä¸¤ä¸ª<strong>ä½ç½®å‚æ•°</strong> ï¼š</p>
<ol>
<li><strong><code>&#123;greet,farewell&#125;</code></strong><ul>
<li>æ˜¯ä¸€ä¸ª<strong>æšä¸¾å‹ä½ç½®å‚æ•°</strong></li>
<li>ç”¨æˆ·å¿…é¡»è¾“å…¥ <code>greet</code> æˆ– <code>farewell</code> ä¸­çš„ä¸€ä¸ª</li>
<li>ç”¨äºæ§åˆ¶æ‰§è¡Œâ€œæ‰“æ‹›å‘¼â€è¿˜æ˜¯â€œé“åˆ«â€çš„é€»è¾‘</li>
</ul>
</li>
<li><strong><code>target</code></strong><ul>
<li>ä»»æ„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ“ä½œçš„å¯¹è±¡ï¼ˆå¦‚äººåï¼‰</li>
<li>æ²¡æœ‰é™åˆ¶ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥ä»»æ„å†…å®¹</li>
</ul>
</li>
</ol>
<p>è¿™ä¸¤ä¸ªå‚æ•°æ˜¯<strong>å¿…é¡»æä¾›çš„</strong> ï¼Œå¹¶ä¸”<strong>é¡ºåºä¸èƒ½é¢ å€’</strong> ã€‚</p>
<hr>
<p><strong>ç¬¬å››éƒ¨åˆ†ï¼š</strong></p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">options:</span><br><span class="line">  -h, --help            show this help message and exit</span><br><span class="line">  -n NAME, --name NAME  ä½ çš„åå­—</span><br><span class="line">  -a AGE, --age AGE     å¹´é¾„</span><br><span class="line">  -ht HEIGHT, --height HEIGHT</span><br><span class="line">                        èº«é«˜ï¼ˆç±³ï¼‰</span><br><span class="line">  -v, --verbose         æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</span><br><span class="line">  -hb HOBBIES [HOBBIES ...], --hobbies HOBBIES [HOBBIES ...]</span><br><span class="line">                        ä½ çš„çˆ±å¥½åˆ—è¡¨</span><br><span class="line">  -c &#123;red,green,blue&#125;, --color &#123;red,green,blue&#125;</span><br><span class="line">                        é¢œè‰²</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæ˜¯ç”¨æˆ·å®šä¹‰çš„ä¸€äº›é™¤ä½ç½®å‚æ•°å¤–çš„å‚æ•°ï¼Œéƒ½å®šä¹‰äº†çŸ­æ ¼å¼(å¦‚<code>-n</code>)å’Œé•¿æ ¼å¼(<code>--name</code>)ï¼Œå¯ä»¥ä»»é€‰å…¶ä¸€æˆ–è€…æ··ç”¨ã€‚</p>
<hr>
<h4 id="ä»£ç ç»“æ„"><a href="#ä»£ç ç»“æ„" class="headerlink" title="ä»£ç ç»“æ„"></a>ä»£ç ç»“æ„</h4><p>çœ‹å®Œäº†å¸®åŠ©ä¿¡æ¯ï¼Œæˆ‘ä»¬å†çœ‹ä¸‹ä»£ç ç»“æ„ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨<code>argparse</code>åº“çš„ç¨‹åºï¼Œä»£ç ç»“æ„å¯åˆ†ä¸ºå››éƒ¨åˆ†ï¼š</p>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ª <code>ArgumentParser</code> å¯¹è±¡ï¼Œç”¨äºè§£æå‘½ä»¤è¡Œå‚æ•°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¾‹</span></span><br><span class="line">parser = argparse.ArgumentParser(description=<span class="string">&quot;æ¼”ç¤º argparse çš„å„ç§ç±»å‹&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®šä¹‰å‚æ•°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¾‹</span></span><br><span class="line">parser.add_argument(<span class="string">&#x27;-n&#x27;</span>, <span class="string">&#x27;--name&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">&#x27;ä½ çš„åå­—&#x27;</span>, required=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>è§£æå‘½ä»¤è¡Œå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå‘½åç©ºé—´å¯¹è±¡ <code>args</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">args = parser.parse_args()</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨è§£æçš„å‚æ•°è¿›è¡Œåç»­é€»è¾‘</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¾‹</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;å¹´é¾„ï¼š<span class="subst">&#123;args.age&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h4 id="ä»£ç ç»†èŠ‚"><a href="#ä»£ç ç»†èŠ‚" class="headerlink" title="ä»£ç ç»†èŠ‚"></a>ä»£ç ç»†èŠ‚</h4><p>å¥½çš„ï¼Œå¯ç®—åˆ°çœ‹ä»£ç çš„æ—¶å€™äº†ğŸ¤¨ã€‚</p>
<p><strong>ä½ç½®å‚æ•°</strong><br>æ‰€è°“ä½ç½®å‚æ•°å°±æ˜¯æŒ‡å®šå‚æ•°æ—¶ä¸åŠ å‰ç¼€<code>--</code>ï¼Œå¯¹ä½ç½®æ•æ„Ÿã€‚</p>
<p><strong>å¯é€‰å‚æ•°</strong></p>
<p>æœ‰å‰ç¼€<code>--</code>æˆ–<code>-</code>ï¼Œ<code>--</code>åé¢è·Ÿå‚æ•°å…¨ç§°ï¼Œ<code>-</code>åé¢è·Ÿç®€ç§°ã€‚</p>
<p><strong><code>type</code></strong></p>
<p>è¿™é‡ŒæŒ‡å®šå‚æ•°çš„æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š<code>str</code>ã€<code>int</code>ã€<code>float</code>ï¼Œæ³¨æ„ï¼šä¸åŒ…æ‹¬<code>bool</code>ï¼Œ<code>bool</code>å‹å‚æ•°å¯ä»¥ä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">&#x27;-v&#x27;</span>, <span class="string">&#x27;--verbose&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>æŒ‡å®šæ”¹å‚æ•°åˆ™ä¸º<code>True</code>ï¼Œå¦åˆ™ä¸º<code>False</code>ã€‚</p>
<h4 id="nargs"><a href="#nargs" class="headerlink" title="nargs"></a><code>nargs</code></h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå‚æ•°åªæ¥å—ä¸€ä¸ªå€¼ï¼Œ<code>nargs</code>å°±æ˜¯ç”¨æ¥æ”¹å˜è¿™ä¸ªè¡Œä¸ºçš„ã€‚</p>
<ul>
<li><code>+</code>è¡¨ç¤ºè‡³å°‘ä¸€ä¸ªå€¼ï¼Œå¦åˆ™æŠ¥é”™</li>
<li><code>*</code>æ¥æ”¶ä»»æ„æ•°é‡çš„å€¼ï¼ˆåŒ…æ‹¬ 0 ä¸ªï¼‰</li>
</ul>
<h4 id="default"><a href="#default" class="headerlink" title="default"></a><code>default</code></h4><p>è¯¥å‚æ•°ç”¨äºæŒ‡å®šé»˜è®¤å€¼ï¼Œå¦‚æœå‘½ä»¤è¡ŒæœªæŒ‡å®šæŸå‚æ•°ï¼Œå¦‚æœè¯¥å‚æ•°å®šä¹‰é»˜è®¤å€¼äº†å°±ç”¨è¯¥é»˜è®¤å€¼æ›¿ä»£ï¼Œæ³¨æ„è¦ä¸<code>type</code>ç±»å‹ä¸€è‡´ï¼Œä¸”ä¸€èˆ¬ä¸ä¸<code>required=True</code>åŒæ—¶ä½¿ç”¨ã€‚</p>
<h4 id="required"><a href="#required" class="headerlink" title="required"></a><code>required</code></h4><p>è¯¥å‚æ•°ç”¨åœ¨å¯é€‰å‚æ•°ä¸­ï¼ˆä½ç½®å‚æ•°æœ¬æ¥å°±æ˜¯å¿…é¡»æŒ‡å®šçš„ï¼Œæ‰€ä»¥ä¸éœ€è¦è¯¥å‚æ•°ï¼‰ï¼Œç”¨äºæŒ‡å®šæ”¹å‚æ•°å¿…é¡»æŒ‡å®šï¼Œé»˜è®¤ä¸º<code>False</code>ï¼Œæ‰€ä»¥ä¸€èˆ¬å‡ºç°æ—¶å°±æ˜¯<code>required=False</code>ã€‚</p>
<h4 id="choices"><a href="#choices" class="headerlink" title="choices"></a><code>choices</code></h4><p><code>choices</code> çš„ä½œç”¨æ˜¯ï¼šé™åˆ¶ç”¨æˆ·åªèƒ½ä»æŒ‡å®šçš„é€‰é¡¹ä¸­é€‰æ‹©ä¸€ä¸ªå€¼ã€‚ ç”¨ä¸­æ‹¬å·<code>[]</code>æ‹¬èµ·æ¥ï¼Œæ³¨æ„å…¶ä¸­å…ƒç´ è¦ä¸<code>type</code>åŒ¹é…ã€‚</p>
<h4 id="help"><a href="#help" class="headerlink" title="help"></a><code>help</code></h4><p>å¸®åŠ©ä¿¡æ¯ï¼Œç”¨äºæè¿°å‚æ•°çš„æ„ä¹‰ã€‚è¿è¡Œ<code>python demo1.py -h</code>æ—¶ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<hr>
<blockquote>
<p>é™„ï¼šè¿˜æœ‰ä¸¤ç§å¾ˆéš¾è§åˆ°çš„ç±»å‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ç±»å‹çš„å¯é€‰å‚æ•° --input-file</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨ type=Path å¯ä»¥è‡ªåŠ¨å°†è¾“å…¥è½¬æ¢ä¸º Path å¯¹è±¡</span></span><br><span class="line">parser.add_argument(<span class="string">&#x27;--input-file&#x27;</span>, <span class="built_in">type</span>=Path, <span class="built_in">help</span>=<span class="string">&#x27;è¾“å…¥æ–‡ä»¶è·¯å¾„&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ç±»å‹çš„å¯é€‰å‚æ•° --output-file</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨ argparse.FileType(&#x27;w&#x27;) è¡¨ç¤ºä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">parser.add_argument(<span class="string">&#x27;--output-file&#x27;</span>, <span class="built_in">type</span>=argparse.FileType(<span class="string">&#x27;w&#x27;</span>), <span class="built_in">help</span>=<span class="string">&#x27;è¾“å‡ºæ–‡ä»¶ï¼ˆå†™æ¨¡å¼ï¼‰&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœæä¾›äº†è¾“å…¥æ–‡ä»¶è·¯å¾„ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> args.input_file:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;è¾“å…¥æ–‡ä»¶å­˜åœ¨å—ï¼Ÿ<span class="subst">&#123;args.input_file.exists()&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># å¦‚æœæä¾›äº†è¾“å‡ºæ–‡ä»¶ï¼Œå†™å…¥ä¸€æ®µæµ‹è¯•å†…å®¹</span></span><br><span class="line"><span class="keyword">if</span> args.output_file:</span><br><span class="line">    args.output_file.write(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•è¾“å‡ºã€‚\n&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å·²å†™å…¥è¾“å‡ºæ–‡ä»¶ã€‚&quot;</span>)</span><br></pre></td></tr></table></figure></blockquote>
<hr>
<h4 id="å‘½ä»¤è¡Œè¿è¡Œ"><a href="#å‘½ä»¤è¡Œè¿è¡Œ" class="headerlink" title="å‘½ä»¤è¡Œè¿è¡Œ"></a>å‘½ä»¤è¡Œè¿è¡Œ</h4><p>ç°åœ¨å’±ä»¬å‘½ä»¤è¡Œè¿è¡Œä»£ç çœ‹çœ‹ï¼Œç›´æ¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python demo1.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">usage: demo1.py [-h] -n NAME [-a AGE] [-ht HEIGHT] [-v] [-hb HOBBIES [HOBBIES ...]] [-c &#123;red,green,blue&#125;] &#123;greet,farewell&#125; target</span><br><span class="line">demo1.py: error: the following arguments are required: action, target, -n/--name</span><br></pre></td></tr></table></figure>

<p>æŠ¥é”™äº†ï¼Œæ„æ€æ˜¯<code>action, target, -n/--name</code>å‚æ•°æ˜¯å¿…è¦çš„ã€‚è¿™ä¸æˆ‘ä»¬ä¸Šé¢çš„è®²è§£ä¸€è‡´ï¼Œä½ç½®å‚æ•°å’Œ<code>required=True</code>æŒ‡å®šçš„å¯é€‰å‚æ•°æ˜¯å¿…é¡»æŒ‡å®šçš„ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬è¿è¡Œï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python demo1.py greet <span class="string">&#x27;chr&#x27;</span> -n <span class="string">&#x27;is me&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">Hello, <span class="keyword">is</span> me! å¾ˆé«˜å…´è§åˆ°ä½ ã€‚</span><br><span class="line">å¹´é¾„ï¼š<span class="number">25</span></span><br><span class="line">èº«é«˜ï¼š<span class="number">1.75</span></span><br><span class="line">é¢œè‰²åå¥½ï¼šred</span><br></pre></td></tr></table></figure>

<p>å†æ¥ä¸€ä¸ªçœ‹çœ‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">python demo1.py farewell <span class="string">&#x27;chr&#x27;</span> -n <span class="string">&#x27;is me&#x27;</span> --age <span class="number">27</span> --height <span class="number">1.77</span> -v -hb <span class="string">&#x27;girl&#x27;</span> <span class="string">&#x27;legs&#x27;</span> -c red</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">[INFO] å‚æ•°è¯¦æƒ…å¦‚ä¸‹ï¼š</span><br><span class="line">&#123;<span class="string">&#x27;action&#x27;</span>: <span class="string">&#x27;farewell&#x27;</span>, <span class="string">&#x27;target&#x27;</span>: <span class="string">&#x27;chr&#x27;</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;is me&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">27</span>, <span class="string">&#x27;height&#x27;</span>: <span class="number">1.77</span>, <span class="string">&#x27;verbose&#x27;</span>: <span class="literal">True</span>, <span class="string">&#x27;hobbies&#x27;</span>: [<span class="string">&#x27;girl&#x27;</span>, <span class="string">&#x27;legs&#x27;</span>], <span class="string">&#x27;color&#x27;</span>: <span class="string">&#x27;red&#x27;</span>&#125;</span><br><span class="line">Goodbye, <span class="built_in">chr</span>! å†è§å•¦ï½</span><br><span class="line">å¹´é¾„ï¼š<span class="number">27</span></span><br><span class="line">èº«é«˜ï¼š<span class="number">1.77</span></span><br><span class="line">é¢œè‰²åå¥½ï¼šred</span><br><span class="line">ä½ çš„çˆ±å¥½æ˜¯ï¼šgirl, legs</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥çš„æ‰€æœ‰å‚æ•°æœ€å¼€å§‹éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚<code>argparse</code> ä¼šæ ¹æ®ä½ åœ¨ add_argument ä¸­æŒ‡å®šçš„ typeï¼ˆå¦‚ intã€floatã€è‡ªå®šä¹‰å‡½æ•°ç­‰ï¼‰è¿›è¡Œè½¬æ¢ï¼Œ<code>str(30)</code>å¯ä»¥æ­£ç¡®è½¬åŒ–ä¸º<code>int(30)</code>ã€‚</p>
</blockquote>
<hr>
<h3 id="å­å‘½ä»¤subparsers"><a href="#å­å‘½ä»¤subparsers" class="headerlink" title="å­å‘½ä»¤subparsers"></a>å­å‘½ä»¤<code>subparsers</code></h3><p><code>subparsers</code> æ˜¯ <code>argparse</code> ä¸­ç”¨æ¥æ”¯æŒâ€œå­å‘½ä»¤â€çš„åŠŸèƒ½ ï¼Œå°±åƒ <code>Git</code> çš„ <code>git commit</code>ã€<code>git push</code> é‚£æ ·ï¼Œå¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªâ€œä¸»å‘½ä»¤â€ä¸‹é¢çš„å¤šä¸ªâ€œå°å‘½ä»¤â€ã€‚ </p>
<p>ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    parser = argparse.ArgumentParser(description=<span class="string">&quot;æ¼”ç¤º subparsers çš„æœ€å°ç¤ºä¾‹&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># âœ… å…¨å±€å‚æ•°ï¼ˆæ‰€æœ‰å­å‘½ä»¤éƒ½èƒ½ç”¨ï¼‰</span></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--verbose&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--log-level&#x27;</span>, choices=[<span class="string">&#x27;DEBUG&#x27;</span>, <span class="string">&#x27;INFO&#x27;</span>, <span class="string">&#x27;WARNING&#x27;</span>, <span class="string">&#x27;ERROR&#x27;</span>], default=<span class="string">&#x27;INFO&#x27;</span>,<span class="built_in">help</span>=<span class="string">&#x27;è®¾ç½®æ—¥å¿—ç­‰çº§&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å­å‘½ä»¤è§£æå™¨</span></span><br><span class="line">    subparsers = parser.add_subparsers(dest=<span class="string">&#x27;command&#x27;</span>, <span class="built_in">help</span>=<span class="string">&quot;æ‰“æ‹›å‘¼oræ‹œæ‹œ&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># âœ… å­å‘½ä»¤ï¼šhello</span></span><br><span class="line">    hello_parser = subparsers.add_parser(<span class="string">&#x27;hello&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;æ‰“æ‹›å‘¼&#x27;</span>)</span><br><span class="line">    hello_parser.add_argument(<span class="string">&#x27;--name&#x27;</span>, required=<span class="literal">True</span>, <span class="built_in">help</span>=<span class="string">&#x27;ä½ çš„åå­—&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># âœ… å­å‘½ä»¤ï¼šbye</span></span><br><span class="line">    bye_parser = subparsers.add_parser(<span class="string">&#x27;bye&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;é“åˆ«&#x27;</span>)</span><br><span class="line">    bye_parser.add_argument(<span class="string">&#x27;--name&#x27;</span>, required=<span class="literal">True</span>, <span class="built_in">help</span>=<span class="string">&#x27;ä½ çš„åå­—&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¾ç½®æ—¥å¿—ç­‰çº§ï¼ˆæ¼”ç¤ºç”¨é€”ï¼‰</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;[<span class="subst">&#123;args.log_level&#125;</span>] æ—¥å¿—ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.verbose:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[INFO] å‚æ•°è¯¦æƒ…å¦‚ä¸‹ï¼š&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">vars</span>(args))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.command == <span class="string">&#x27;hello&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ä½ å¥½ï¼Œ<span class="subst">&#123;args.name&#125;</span>ï¼&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> args.command == <span class="string">&#x27;bye&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;å†è§ï¼Œ<span class="subst">&#123;args.name&#125;</span>ï¼&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>è€ä¼ ç»Ÿï¼Œå…ˆï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">python .\demo2.py --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">usage: demo2.py [-h] [--verbose] [--log-level &#123;DEBUG,INFO,WARNING,ERROR&#125;] &#123;hello,bye&#125; ...</span><br><span class="line"></span><br><span class="line">æ¼”ç¤º subparsers çš„æœ€å°ç¤ºä¾‹</span><br><span class="line"></span><br><span class="line">positional arguments:</span><br><span class="line">  &#123;hello,bye&#125;           æ‰“æ‹›å‘¼<span class="keyword">or</span>æ‹œæ‹œ</span><br><span class="line">    hello               æ‰“æ‹›å‘¼</span><br><span class="line">    bye                 é“åˆ«</span><br><span class="line"></span><br><span class="line">options:</span><br><span class="line">  -h, --<span class="built_in">help</span>            show this <span class="built_in">help</span> message <span class="keyword">and</span> exit</span><br><span class="line">  --verbose             æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</span><br><span class="line">  --log-level &#123;DEBUG,INFO,WARNING,ERROR&#125;</span><br><span class="line">                        è®¾ç½®æ—¥å¿—ç­‰çº§</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li><code>&#123;hello,bye&#125;</code>æ˜¯ä½ç½®å‚æ•°ï¼Œå¿…é¡»è¦å†™ä¸€ä¸ª</li>
<li>å­å‘½ä»¤ä¸‹çš„<code>--name</code>è¿™ç§å¯é€‰å‚æ•°ä¸æ˜¾ç¤ºåœ¨å¸®åŠ©ä¿¡æ¯ä¸­</li>
</ul>
<hr>
<p><strong>æ€»ç»“ä¸‹è¿™ç§æ¡†æ¶çš„ç»“æ„</strong></p>
<p>åœ¨åŸºç¡€ç‰ˆçš„åŸºç¡€ä¸Šï¼š</p>
<ul>
<li><p>å®šä¹‰å­å‘½ä»¤è§£æå™¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¾‹</span></span><br><span class="line">subparsers = parser.add_subparsers(dest=<span class="string">&#x27;command&#x27;</span>, <span class="built_in">help</span>=<span class="string">&quot;æ‰“æ‹›å‘¼oræ‹œæ‹œ&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®šä¹‰å­å‘½ä»¤</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¾‹</span></span><br><span class="line">hello_parser = subparsers.add_parser(<span class="string">&#x27;hello&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;æ‰“æ‹›å‘¼&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®šä¹‰å­å‘½ä»¤çš„å‚æ•°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¾‹</span></span><br><span class="line">hello_parser.add_argument(<span class="string">&#x27;--name&#x27;</span>, required=<span class="literal">True</span>, <span class="built_in">help</span>=<span class="string">&#x27;ä½ çš„åå­—&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<p><strong>è¿è¡Œä¸‹çœ‹çœ‹</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python .\demo2.py --verbose hello --name <span class="string">&#x27;Alice&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">[INFO] æ—¥å¿—ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆã€‚</span><br><span class="line">[INFO] å‚æ•°è¯¦æƒ…å¦‚ä¸‹ï¼š</span><br><span class="line">&#123;<span class="string">&#x27;verbose&#x27;</span>: <span class="literal">True</span>, <span class="string">&#x27;log_level&#x27;</span>: <span class="string">&#x27;INFO&#x27;</span>, <span class="string">&#x27;command&#x27;</span>: <span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Alice&#x27;</span>&#125;</span><br><span class="line">ä½ å¥½ï¼ŒAliceï¼</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„ï¼Œå¦‚æœå°†<code>--verbose</code>æ”¾åœ¨æœ€åä¼šæŠ¥é”™ã€‚</p>
</blockquote>
<p><strong>å†æ¥ä¸€ä¸ªï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python demo2.py --log-level INFO bye --name Bob</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">[INFO] æ—¥å¿—ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆã€‚</span><br><span class="line">å†è§ï¼ŒBobï¼</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="è‡ªå®šä¹‰ç±»å‹éªŒè¯å‡½æ•°-parse-known-args"><a href="#è‡ªå®šä¹‰ç±»å‹éªŒè¯å‡½æ•°-parse-known-args" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹éªŒè¯å‡½æ•°+parse_known_args"></a>è‡ªå®šä¹‰ç±»å‹éªŒè¯å‡½æ•°+<code>parse_known_args</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰ç±»å‹éªŒè¯å‡½æ•°ï¼šåªæ¥å—é•¿åº¦ &lt;= 5 çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">short_string</span>(<span class="params">s</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(s) &gt; <span class="number">5</span>:</span><br><span class="line">        <span class="keyword">raise</span> argparse.ArgumentTypeError(<span class="string">&quot;å­—ç¬¦ä¸²ä¸èƒ½è¶…è¿‡5ä¸ªå­—ç¬¦&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè§£æå™¨</span></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">&#x27;--name&#x27;</span>, <span class="built_in">type</span>=short_string, <span class="built_in">help</span>=<span class="string">&#x27;æœ€å¤š5ä¸ªå­—ç¬¦çš„åå­—&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£æå·²çŸ¥å‚æ•°ï¼Œå¿½ç•¥æœªçŸ¥å‚æ•°</span></span><br><span class="line">args, unknown = parser.parse_known_args()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å°è§£æç»“æœ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å·²çŸ¥å‚æ•°:&quot;</span>, args)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æœªçŸ¥å‚æ•°:&quot;</span>, unknown)</span><br></pre></td></tr></table></figure>

<p><strong>è€ä¼ ç»Ÿï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python .\demo3.py --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">usage: demo3.py [-h] [--name NAME]</span><br><span class="line"></span><br><span class="line">options:</span><br><span class="line">  -h, --<span class="built_in">help</span>   show this <span class="built_in">help</span> message <span class="keyword">and</span> exit</span><br><span class="line">  --name NAME  æœ€å¤š<span class="number">5</span>ä¸ªå­—ç¬¦çš„åå­—</span><br></pre></td></tr></table></figure>

<p>æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚</p>
<p>ç›´æ¥è¿è¡Œï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python demo3.py --name Alice --age <span class="number">30</span> --verbose</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºï¼š</span></span><br><span class="line">å·²çŸ¥å‚æ•°: Namespace(name=<span class="string">&#x27;Alice&#x27;</span>)</span><br><span class="line">æœªçŸ¥å‚æ•°: [<span class="string">&#x27;--age&#x27;</span>, <span class="string">&#x27;30&#x27;</span>, <span class="string">&#x27;--verbose&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>å†æ¥ä¸€ä¸ªï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python demo3.py --name HelloWorld</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">usage: demo3.py [-h] [--name NAME]</span><br><span class="line">demo3.py: error: argument --name: å­—ç¬¦ä¸²ä¸èƒ½è¶…è¿‡<span class="number">5</span>ä¸ªå­—ç¬¦</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ä»¬æœ¬æ–‡ä¸€èµ·ç”±æµ…å…¥æ·±çš„çœ‹äº†<code>argparse</code>æ¨¡å—çš„ç›¸å…³ç”¨æ³•ï¼Œé€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†ï¼š</p>
<ul>
<li>å¦‚ä½•åˆ›å»ºè§£æå™¨å¹¶æ·»åŠ å„ç§ç±»å‹çš„å‚æ•°</li>
<li>ä½ç½®å‚æ•°ä¸å¯é€‰å‚æ•°çš„åŒºåˆ«åŠå…¶ä½¿ç”¨åœºæ™¯</li>
<li>å‚æ•°çš„åŸºæœ¬ç±»å‹ã€é»˜è®¤å€¼ã€å¿…å¡«é¡¹ã€æšä¸¾é™åˆ¶ç­‰å¸¸è§è®¾ç½®</li>
<li><code>nargs</code> çš„ä½¿ç”¨æ–¹æ³•ï¼Œæ”¯æŒå¤šå€¼è¾“å…¥</li>
<li>å¦‚ä½•æ§åˆ¶æ—¥å¿—ç­‰çº§ã€å¤„ç†æœªçŸ¥å‚æ•°</li>
<li>å­å‘½ä»¤ï¼ˆ<code>subparsers</code>ï¼‰çš„ä½¿ç”¨ï¼Œå®ç°ç±»ä¼¼ Git çš„å¤šå‘½ä»¤ä½“ç³»</li>
<li>è‡ªå®šä¹‰ç±»å‹éªŒè¯å‡½æ•°ï¼Œæé«˜å‚æ•°å®‰å…¨æ€§</li>
</ul>
<p><code>argparse</code> ä¸ä»…æ˜¯æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œæ›´æ˜¯ä¸€ç§ç¼–å†™å¥å£®å‘½ä»¤è¡Œè„šæœ¬çš„æœ€ä½³å®è·µæ–¹å¼ã€‚æ— è®ºä½ æ˜¯å†™ä¸€ä¸ªç®€å•çš„è„šæœ¬è¿˜æ˜¯å¼€å‘ä¸€ä¸ªå®Œæ•´çš„å‘½ä»¤è¡Œå·¥å…·ï¼ŒæŒæ¡ <code>argparse</code> éƒ½èƒ½è®©ä½ äº‹åŠåŠŸå€ã€‚</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"># Python</a>
              <a href="/tags/argparse/" rel="tag"># argparse</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/07/11/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%94%A4%E9%86%92%E8%AF%8D%E7%B3%BB%E7%BB%9F%E8%A7%A3%E6%9E%90/" rel="prev" title="è‡ªå®šä¹‰å”¤é†’è¯ç³»ç»Ÿè§£æ">
                  <i class="fa fa-angle-left"></i> è‡ªå®šä¹‰å”¤é†’è¯ç³»ç»Ÿè§£æ
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/07/21/%E6%9D%82%E8%B0%88%EF%BC%9A%E6%9C%80%E8%BF%91%E7%9A%84%E4%B8%80%E4%BA%9B%E5%A4%A7%E5%9D%91/" rel="next" title="æ‚è°ˆï¼šæœ€è¿‘çš„ä¸€äº›å¤§å‘">
                  æ‚è°ˆï¼šæœ€è¿‘çš„ä¸€äº›å¤§å‘ <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Chr</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">411k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">24:55</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","src":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
